!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Cesium")):"function"==typeof define&&define.amd?define(["Cesium"],t):"object"==typeof exports?exports.Cesiums=t(require("Cesium")):e.Cesiums=t(e.Cesium)}(window,function(G){return function(n){var i={};function __webpack_require__(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}return __webpack_require__.m=n,__webpack_require__.c=i,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)__webpack_require__.d(n,i,function(e){return t[e]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/dist",__webpack_require__(__webpack_require__.s=3)}([function(e,t){e.exports=G},function(e,$,Q){(function(K,X){var Y;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */(function(){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function t(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var a=e[r];t(i,a,n(a),e)}return i}function r(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function i(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}function o(e,t){return!(null==e||!e.length)&&-1<v(e,t,0)}function f(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function c(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function a(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function l(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function s(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function h(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function p(e,i,t){var r;return t(e,function(e,t,n){if(i(e,t,n))return r=t,!1}),r}function _(e,t,n,i){var r=e.length;for(n+=i?1:-1;i?n--:++n<r;)if(t(e[n],n,e))return n;return-1}function v(e,t,n){if(t==t)e:{--n;for(var i=e.length;++n<i;)if(e[n]===t){e=n;break e}e=-1}else e=_(e,d,n);return e}function g(e,t,n,i){--n;for(var r=e.length;++n<r;)if(i(e[n],t))return n;return-1}function d(e){return e!=e}function y(e,t){var n=null==e?0:e.length;return n?m(e,t)/n:ua}function b(t){return function(e){return null==e?sa:e[t]}}function x(t){return function(e){return null==t?sa:t[e]}}function j(e,i,r,o,t){return t(e,function(e,t,n){r=o?(o=!1,e):i(r,e,t,n)}),r}function m(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);o!==sa&&(n=n===sa?o:n+o)}return n}function A(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function E(t){return function(e){return t(e)}}function S(t,e){return c(e,function(e){return t[e]})}function O(e,t){return e.has(t)}function I(e,t){for(var n=-1,i=e.length;++n<i&&-1<v(t,e[n],0););return n}function R(e,t){for(var n=e.length;n--&&-1<v(t,e[n],0););return n}function z(e){return"\\"+H[e]}function W(e){var n=-1,i=Array(e.size);return e.forEach(function(e,t){i[++n]=[t,e]}),i}function U(t,n){return function(e){return t(n(e))}}function B(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",o[r++]=n)}return o}function L(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function D(e){if(qa.test(e)){for(var t=P.lastIndex=0;P.test(e);)++t;e=t}else e=Z(e);return e}function M(e){return qa.test(e)?e.match(P)||[]:e.split("")}var sa,ua=NaN,la=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ca=/\b__p\+='';/g,fa=/\b(__p\+=)''\+/g,pa=/(__e\(.*?\)|\b__t\))\+'';/g,da=/&(?:amp|lt|gt|quot|#39);/g,ha=/[&<>"']/g,ya=RegExp(da.source),_a=RegExp(ha.source),ga=/<%-([\s\S]+?)%>/g,va=/<%([\s\S]+?)%>/g,ma=/<%=([\s\S]+?)%>/g,ba=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ca=/^\w*$/,wa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pa=/[\\^$.*+?()[\]{}|]/g,Ea=RegExp(Pa.source),ka=/^\s+|\s+$/g,Aa=/^\s+/,Oa=/\s+$/,Sa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xa=/\{\n\/\* \[wrapped with (.+)\] \*/,Da=/,? & /,Ha=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ma=/\\(\\)?/g,Ta=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ja=/\w*$/,La=/^[-+]0x[0-9a-f]+$/i,Ba=/^0b[01]+$/i,Ia=/^\[object .+?Constructor\]$/,Ra=/^0o[0-7]+$/i,za=/^(?:0|[1-9]\d*)$/,Ua=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Va=/($^)/,Fa=/['\n\r\u2028\u2029\\]/g,C="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",w="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+C,Wa=RegExp("['’]","g"),Ga=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),P=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+C,"g"),Na=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",w].join("|"),"g"),qa=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Za=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ka="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Xa={};Xa["[object Float32Array]"]=Xa["[object Float64Array]"]=Xa["[object Int8Array]"]=Xa["[object Int16Array]"]=Xa["[object Int32Array]"]=Xa["[object Uint8Array]"]=Xa["[object Uint8ClampedArray]"]=Xa["[object Uint16Array]"]=Xa["[object Uint32Array]"]=!0,Xa["[object Arguments]"]=Xa["[object Array]"]=Xa["[object ArrayBuffer]"]=Xa["[object Boolean]"]=Xa["[object DataView]"]=Xa["[object Date]"]=Xa["[object Error]"]=Xa["[object Function]"]=Xa["[object Map]"]=Xa["[object Number]"]=Xa["[object Object]"]=Xa["[object RegExp]"]=Xa["[object Set]"]=Xa["[object String]"]=Xa["[object WeakMap]"]=!1;var Ya={};Ya["[object Arguments]"]=Ya["[object Array]"]=Ya["[object ArrayBuffer]"]=Ya["[object DataView]"]=Ya["[object Boolean]"]=Ya["[object Date]"]=Ya["[object Float32Array]"]=Ya["[object Float64Array]"]=Ya["[object Int8Array]"]=Ya["[object Int16Array]"]=Ya["[object Int32Array]"]=Ya["[object Map]"]=Ya["[object Number]"]=Ya["[object Object]"]=Ya["[object RegExp]"]=Ya["[object Set]"]=Ya["[object String]"]=Ya["[object Symbol]"]=Ya["[object Uint8Array]"]=Ya["[object Uint8ClampedArray]"]=Ya["[object Uint16Array]"]=Ya["[object Uint32Array]"]=!0,Ya["[object Error]"]=Ya["[object Function]"]=Ya["[object WeakMap]"]=!1;var H={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$a=parseFloat,Qa=parseInt,T="object"==(void 0===K?"undefined":_typeof(K))&&K&&K.Object===Object&&K,V="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,Ja=T||V||Function("return this")(),F="object"==_typeof($)&&$&&!$.nodeType&&$,G=F&&"object"==_typeof(X)&&X&&!X.nodeType&&X,es=G&&G.exports===F,N=es&&T.process,q=function(){try{var e=G&&G.require&&G.require("util").types;return e||N&&N.binding&&N.binding("util")}catch(e){}}(),ts=q&&q.isArrayBuffer,ns=q&&q.isDate,is=q&&q.isMap,rs=q&&q.isRegExp,os=q&&q.isSet,as=q&&q.isTypedArray,Z=b("length"),ss=x({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),us=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),ls=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cs=function x(C){function An(e){if(yu(e)&&!so(e)&&!(e instanceof Ln)){if(e instanceof On)return e;if($.call(e,"__wrapped__"))return Fe(e)}return new On(e)}function kn(){}function On(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=sa}function Ln(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Tn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Fn;++t<n;)this.add(e[t])}function Zn(e){this.size=(this.__data__=new Tn(e)).size}function qn(e,t){var n,i=so(e),r=!i&&ao(e),o=!i&&!r&&lo(e),a=!i&&!r&&!o&&yo(e),s=(r=(i=i||r||o||a)?A(e.length,N):[]).length;for(n in e)!t&&!$.call(e,n)||i&&("length"==n||o&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Se(n,s))||r.push(n);return r}function Qn(e){var t=e.length;return t?e[ir(0,t-1)]:sa}function it(e,t,n){(n===sa||lu(e[t],n))&&(n!==sa||t in e)||st(e,t,n)}function ot(e,t,n){var i=e[t];$.call(e,t)&&lu(i,n)&&(n!==sa||t in e)||st(e,t,n)}function ft(e,t){for(var n=e.length;n--;)if(lu(e[n][0],t))return n;return-1}function ct(e,i,r,o){return ii(e,function(e,t,n){i(o,e,r(e),n)}),o}function at(e,t){return e&&Cr(t,Wu(t),e)}function st(e,t,n){"__proto__"==t&&pn?pn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ht(e,t){for(var n=-1,i=t.length,r=k(i),o=null==e;++n<i;)r[n]=o?sa:Ru(e,t[n]);return r}function pt(e,t,n){return e==e&&(n!==sa&&(e=e<=n?e:n),t!==sa&&(e=t<=e?e:t)),e}function _t(n,i,o,e,t,a){var s,u=1&i,l=2&i,c=4&i;if(o&&(s=t?o(n,e,t,a):o(n)),s!==sa)return s;if(!du(n))return n;if(e=so(n)){if(s=function me(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&$.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(n),!u)return Lr(n,s)}else{var f=hi(n),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(lo(n))return Ir(n,u);if("[object Object]"==f||"[object Arguments]"==f||p&&!t){if(s=l||p?{}:Ae(n),!u)return l?function Mr(e,t){return Cr(e,di(e),t)}(n,function lt(e,t){return e&&Cr(t,Uu(t),e)}(s,n)):function Dr(e,t){return Cr(e,pi(e),t)}(n,at(s,n))}else{if(!Ya[f])return t?n:{};s=function ke(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return Rr(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return t=n?Rr(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return zr(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(t=new e.constructor(e.source,ja.exec(e))).lastIndex=e.lastIndex,t;case"[object Set]":return new i;case"[object Symbol]":return ei?F(ei.call(e)):{}}}(n,f,u)}}if(a||(a=new Zn),t=a.get(n))return t;if(a.set(n,s),ho(n))return n.forEach(function(e){s.add(_t(e,i,o,e,n,a))}),s;if(fo(n))return n.forEach(function(e,t){s.set(t,_t(e,i,o,t,n,a))}),s;l=c?l?ve:_e:l?Uu:Wu;var d=e?sa:l(n);return r(d||n,function(e,t){d&&(e=n[t=e]),ot(s,t,_t(e,i,o,t,n,a))}),s}function gt(e,t,n){var i=n.length;if(null==e)return!i;for(e=F(e);i--;){var r=n[i],o=t[r],a=e[r];if(a===sa&&!(r in e)||!o(a))return!1}return!0}function dt(e,t,n){if("function"!=typeof e)throw new q("Expected a function");return mi(function(){e.apply(sa,n)},t)}function yt(e,t,n,i){var r=-1,a=o,s=!0,u=e.length,l=[],p=t.length;if(!u)return l;n&&(t=c(t,E(n))),i?(a=f,s=!1):200<=t.length&&(a=O,s=!1,t=new Nn(t));e:for(;++r<u;){var d=e[r],h=null==n?d:n(d);d=i||0!==d?d:0;if(s&&h==h){for(var y=p;y--;)if(t[y]===h)continue e;l.push(d)}else a(t,h,i)||l.push(d)}return l}function bt(e,i){var r=!0;return ii(e,function(e,t,n){return r=!!i(e,t,n)}),r}function xt(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],a=t(o);if(null!=a&&(s===sa?a==a&&!wu(a):n(a,s)))var s=a,u=o}return u}function jt(e,i){var r=[];return ii(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r}function wt(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=Ee),r||(r=[]);++o<s;){var u=e[o];0<t&&n(u)?1<t?wt(u,t-1,n,i,r):a(r,u):i||(r[r.length]=u)}return r}function mt(e,t){return e&&oi(e,t,Wu)}function At(e,t){return e&&ai(e,t,Wu)}function kt(t,e){return i(e,function(e){return _u(t[e])})}function Et(e,t){for(var n=0,i=(t=Sr(t,e)).length;null!=e&&n<i;)e=e[Me(t[n++])];return n&&n==i?e:sa}function St(e,t,n){return t=t(e),so(e)?t:a(t,n(e))}function Ot(e){if(null==e)return e===sa?"[object Undefined]":"[object Null]";if(fn&&fn in F(e)){var t=$.call(e,fn),n=e[fn];try{e[fn]=sa;var i=!0}catch(e){}var r=Xe.call(e);i&&(t?e[fn]=n:delete e[fn]),e=r}else e=Xe.call(e);return e}function It(e,t){return t<e}function Rt(e,t){return null!=e&&$.call(e,t)}function zt(e,t){return null!=e&&t in F(e)}function Wt(e,t,n){for(var i=n?f:o,r=e[0].length,a=e.length,s=a,u=k(a),l=1/0,p=[];s--;){var d=e[s];s&&t&&(d=c(d,E(t))),l=En(d.length,l),u[s]=!n&&(t||120<=r&&120<=d.length)?new Nn(s&&d):sa}d=e[0];var h=-1,y=u[0];e:for(;++h<r&&p.length<l;){var _=d[h],g=t?t(_):_;_=n||0!==_?_:0;if(y?!O(y,g):!i(p,g,n)){for(s=a;--s;){var v=u[s];if(v?!O(v,g):!i(e[s],g,n))continue e}y&&y.push(g),p.push(_)}}return p}function Bt(e,t,i){return null==(t=null==(e=(t=Sr(t,e)).length<2?e:Et(e,hr(t,0,-1)))?e:e[Me(Ve(t))])?sa:n(t,e,i)}function Lt(e){return yu(e)&&"[object Arguments]"==Ot(e)}function Mt(e,t,n,i,r){if(e===t)return!0;if(null==e||null==t||!yu(e)&&!yu(t))return e!=e&&t!=t;e:{var o,a,s=so(e),u=so(t),l="[object Object]"==(o="[object Arguments]"==(o=s?"[object Array]":hi(e))?"[object Object]":o);u="[object Object]"==(a="[object Arguments]"==(a=u?"[object Array]":hi(t))?"[object Object]":a);if((a=o==a)&&lo(e)){if(!lo(t)){t=!1;break e}l=!(s=!0)}if(a&&!l)r||(r=new Zn),t=s||yo(e)?se(e,t,n,i,Mt,r):function he(e,t,n,i,r,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new nn(e),new nn(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return lu(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=W;case"[object Set]":if(s||(s=L),e.size!=t.size&&!(1&i))break;return(n=a.get(e))?n==t:(i|=2,a.set(e,t),t=se(s(e),s(t),i,r,o,a),a.delete(e),t);case"[object Symbol]":if(ei)return ei.call(e)==ei.call(t)}return!1}(e,t,o,n,i,Mt,r);else{if(!(1&n)&&(s=l&&$.call(e,"__wrapped__"),o=u&&$.call(t,"__wrapped__"),s||o)){e=s?e.value():e,t=o?t.value():t,r||(r=new Zn),t=Mt(e,t,n,i,r);break e}if(a)t:if(r||(r=new Zn),s=1&n,o=_e(e),u=o.length,a=_e(t).length,u==a||s){for(l=u;l--;){var c=o[l];if(!(s?c in t:$.call(t,c))){t=!1;break t}}if((a=r.get(e))&&r.get(t))t=a==t;else{a=!0,r.set(e,t),r.set(t,e);for(var f=s;++l<u;){var p=e[c=o[l]],d=t[c];if(i)var h=s?i(d,p,c,t,e,r):i(p,d,c,e,t,r);if(h===sa?p!==d&&!Mt(p,d,n,i,r):!h){a=!1;break}f||(f="constructor"==c)}a&&!f&&((n=e.constructor)!=(i=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)&&(a=!1)),r.delete(e),r.delete(t),t=a}}else t=!1;else t=!1}}return t}function $t(e,t,n,i){var r=n.length,o=r,a=!i;if(null==e)return!o;for(e=F(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var u=(s=n[r])[0],l=e[u],c=s[1];if(a&&s[2]){if(l===sa&&!(u in e))return!1}else{if(s=new Zn,i)var f=i(l,c,u,e,t,s);if(f===sa?!Mt(c,l,3,i,s):!f)return!1}}return!0}function Ft(e){return!(!du(e)||J&&J in e)&&(_u(e)?rt:Ia).test(Te(e))}function qt(e){return"function"==typeof e?e:null==e?$u:"object"==_typeof(e)?so(e)?Jt(e[0],e[1]):Ht(e):Zu(e)}function Vt(e){if(!ze(e))return wn(e);var t,n=[];for(t in F(e))$.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Kt(e,t){return e<t}function Gt(e,i){var r=-1,o=su(e)?k(e.length):[];return ii(e,function(e,t,n){o[++r]=i(e,t,n)}),o}function Ht(t){var n=xe(t);return 1==n.length&&n[0][2]?We(n[0][0],n[0][1]):function(e){return e===t||$t(e,t,n)}}function Jt(n,i){return Ie(n)&&i==i&&!du(i)?We(Me(n),i):function(e){var t=Ru(e,n);return t===sa&&t===i?zu(e,n):Mt(i,t,3)}}function Yt(c,f,p,d,h){c!==f&&oi(f,function(e,t){if(du(e)){h||(h=new Zn);var n=h,i=Be(c,t),r=Be(f,t);if(!(l=n.get(r))){var o=(l=d?d(i,r,t+"",c,f,n):sa)===sa;if(o){var a=so(r),s=!a&&lo(r),u=!a&&!s&&yo(r),l=r;a||s||u?l=so(i)?i:hu(i)?Lr(i):s?Ir(r,!(o=!1)):u?zr(r,!(o=!1)):[]:xu(r)||ao(r)?ao(l=i)?l=Ou(i):du(i)&&!_u(i)||(l=Ae(r)):o=!1}o&&(n.set(r,l),Yt(l,r,p,d,n),n.delete(r))}it(c,t,l)}else(n=d?d(Be(c,t),e,t+"",c,f,h):sa)===sa&&(n=e),it(c,t,n)},Uu)}function Qt(e,t){var n=e.length;if(n)return Se(t+=t<0?n:0,n)?e[t]:sa}function Xt(e,i,u){var r=-1;return i=c(i.length?i:[$u],E(ye())),function w(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}(e=Gt(e,function(t,e,n){return{a:c(i,function(e){return e(t)}),b:++r,c:t}}),function(e,t){var n;e:{n=-1;for(var i=e.a,r=t.a,o=i.length,a=u.length;++n<o;){var s=Wr(i[n],r[n]);if(s){if(a<=n){n=s;break e}n=s*("desc"==u[n]?-1:1);break e}}n=e.b-t.b}return n})}function tr(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var a=t[i],s=Et(e,a);n(s,a)&&lr(o,Sr(a,e),s)}return o}function er(e,t,n,i){var r=i?g:v,o=-1,a=t.length,s=e;for(e===t&&(t=Lr(t)),n&&(s=c(e,E(n)));++o<a;){var u=0,l=t[o];for(l=n?n(l):l;-1<(u=r(s,l,u,i));)s!==e&&un.call(s,u,1),un.call(e,u,1)}return e}function ur(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;Se(r)?un.call(e,r,1):xr(e,r)}}return e}function ir(e,t){return e+gn(Dn()*(t-e+1))}function or(e,t){var n="";if(!e||t<1||9007199254740991<t)return n;for(;t%2&&(n+=e),(t=gn(t/2))&&(e+=e),t;);return n}function fr(e,t){return bi(Ue(e,t,$u),e+"")}function lr(e,t,n,i){if(!du(e))return e;for(var r=-1,o=(t=Sr(t,e)).length,a=o-1,s=e;null!=s&&++r<o;){var u=Me(t[r]),l=n;if(r!=a){var c=s[u];(l=i?i(c,u,s):sa)===sa&&(l=du(c)?c:Se(t[r+1])?[]:{})}ot(s,u,l),s=s[u]}return e}function hr(e,t,n){var i=-1,r=e.length;for(t<0&&(t=r<-t?0:r+t),(n=r<n?r:n)<0&&(n+=r),r=n<t?0:n-t>>>0,t>>>=0,n=k(r);++i<r;)n[i]=e[i+t];return n}function pr(e,i){var r;return ii(e,function(e,t,n){return!(r=i(e,t,n))}),!!r}function _r(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=e[o];null!==a&&!wu(a)&&(n?a<=t:a<t)?i=o+1:r=o}return r}return vr(e,t,$u,n)}function vr(e,t,n,i){t=n(t);for(var r=0,o=null==e?0:e.length,a=t!=t,s=null===t,u=wu(t),l=t===sa;r<o;){var c=gn((r+o)/2),f=n(e[c]),p=f!==sa,d=null===f,h=f==f,y=wu(f);(a?i||h:l?h&&(i||p):s?h&&p&&(i||!d):u?h&&p&&!d&&(i||!y):!d&&!y&&(i?f<=t:f<t))?r=c+1:o=c}return En(o,4294967294)}function gr(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!lu(s,u)){var u=s;o[r++]=0===a?0:a}}return o}function dr(e){return"number"==typeof e?e:wu(e)?ua:+e}function yr(e){if("string"==typeof e)return e;if(so(e))return c(e,yr)+"";if(wu(e))return ti?ti.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function br(e,t,n){var i=-1,r=o,a=e.length,s=!0,u=[],l=u;if(n)s=!1,r=f;else if(200<=a){if(r=t?null:ci(e))return L(r);s=!1,r=O,l=new Nn}else l=t?[]:u;e:for(;++i<a;){var c=e[i],p=t?t(c):c;c=n||0!==c?c:0;if(s&&p==p){for(var d=l.length;d--;)if(l[d]===p)continue e;t&&l.push(p),u.push(c)}else r(l,p,n)||(l!==u&&l.push(p),u.push(c))}return u}function xr(e,t){return null==(e=(t=Sr(t,e)).length<2?e:Et(e,hr(t,0,-1)))||delete e[Me(Ve(t))]}function jr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?hr(e,i?0:o,i?o+1:r):hr(e,i?o+1:0,i?r:o)}function wr(e,t){var n=e;return n instanceof Ln&&(n=n.value()),l(t,function(e,t){return t.func.apply(t.thisArg,a([e],t.args))},n)}function mr(e,t,n){var i=e.length;if(i<2)return i?br(e[0]):[];for(var r=-1,o=k(i);++r<i;)for(var a=e[r],s=-1;++s<i;)s!=r&&(o[r]=yt(o[r]||a,e[s],t,n));return br(wt(o,1),t,n)}function Ar(e,t,n){for(var i=-1,r=e.length,o=t.length,a={};++i<r;)n(a,e[i],i<o?t[i]:sa);return a}function kr(e){return hu(e)?e:[]}function Er(e){return"function"==typeof e?e:$u}function Sr(e,t){return so(e)?e:Ie(e,t)?[e]:Ci(Iu(e))}function Or(e,t,n){var i=e.length;return n=n===sa?i:n,!t&&i<=n?e:hr(e,t,n)}function Ir(e,t){if(t)return e.slice();var n=e.length;n=rn?rn(n):new e.constructor(n);return e.copy(n),n}function Rr(e){var t=new e.constructor(e.byteLength);return new nn(t).set(new nn(e)),t}function zr(e,t){return new e.constructor(t?Rr(e.buffer):e.buffer,e.byteOffset,e.length)}function Wr(e,t){if(e!==t){var n=e!==sa,i=null===e,r=e==e,o=wu(e),a=t!==sa,s=null===t,u=t==t,l=wu(t);if(!s&&!l&&!o&&t<e||o&&a&&u&&!s&&!l||i&&a&&u||!n&&u||!r)return 1;if(!i&&!o&&!l&&e<t||l&&n&&r&&!i&&!o||s&&n&&r||!a&&r||!u)return-1}return 0}function Ur(e,t,n,i){var r=-1,o=e.length,a=n.length,s=-1,u=t.length,l=Pn(o-a,0),c=k(u+l);for(i=!i;++s<u;)c[s]=t[s];for(;++r<a;)(i||r<o)&&(c[n[r]]=e[r]);for(;l--;)c[s++]=e[r++];return c}function Br(e,t,n,i){var r=-1,o=e.length,a=-1,s=n.length,u=-1,l=t.length,c=Pn(o-s,0),f=k(c+l);for(i=!i;++r<c;)f[r]=e[r];for(c=r;++u<l;)f[c+u]=t[u];for(;++a<s;)(i||r<o)&&(f[c+n[a]]=e[r++]);return f}function Lr(e,t){var n=-1,i=e.length;for(t||(t=k(i));++n<i;)t[n]=e[n];return t}function Cr(e,t,n,i){var r=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=i?i(n[s],e[s],s,n,e):sa;u===sa&&(u=e[s]),r?st(n,s,u):ot(n,s,u)}return n}function Tr(o,a){return function(e,n){var i=so(e)?t:ct,r=a?a():{};return i(e,o,ye(n,2),r)}}function $r(a){return fr(function(e,t){var n=-1,i=t.length,r=1<i?t[i-1]:sa,o=2<i?t[2]:sa;r=3<a.length&&"function"==typeof r?(i--,r):sa;for(o&&Oe(t[0],t[1],o)&&(r=i<3?sa:r,i=1),e=F(e);++n<i;)(o=t[n])&&a(e,o,n,r);return e})}function Fr(o,a){return function(e,t){if(null==e)return e;if(!su(e))return o(e,t);for(var n=e.length,i=a?n:-1,r=F(e);(a?i--:++i<n)&&!1!==t(r[i],i,r););return e}}function Nr(s){return function(e,t,n){for(var i=-1,r=F(e),o=(n=n(e)).length;o--;){var a=n[s?o:++i];if(!1===t(r[a],a,r))break}return e}}function Zr(i){return function(e){e=Iu(e);var t=qa.test(e)?M(e):sa,n=t?t[0]:e.charAt(0);return e=t?Or(t,1).join(""):e.slice(1),n[i]()+e}}function qr(t){return function(e){return l(Mu(Du(e).replace(Wa,"")),t,"")}}function Vr(n){return function(){switch((e=arguments).length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var e,t=ni(n.prototype);return du(e=n.apply(t,e))?e:t}}function Gr(a){return function(e,t,n){var i=F(e);if(!su(e)){var o=ye(t,3);e=Wu(e),t=function r(e){return o(i[e],e,i)}}return-1<(t=a(e,t,n))?i[o?e[t]:t]:sa}}function Hr(s){return pe(function(i){var r=i.length,e=r,t=On.prototype.thru;for(s&&i.reverse();e--;){if("function"!=typeof(n=i[e]))throw new q("Expected a function");if(t&&!o&&"wrapper"==ge(n))var o=new On([],!0)}for(e=o?e:r;++e<r;){var n,a="wrapper"==(t=ge(n=i[e]))?fi(n):sa;o=a&&Re(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?o[ge(a[0])].apply(o,a[3]):1==n.length&&Re(n)?o[t]():o.thru(n)}return function(){var e=(n=arguments)[0];if(o&&1==n.length&&so(e))return o.plant(e).value();for(var t=0,n=r?i[t].apply(this,n):e;++t<r;)n=i[t].call(this,n);return n}})}function Jr(u,c,f,p,d,h,y,_,g,v){var m=128&c,b=1&c,C=2&c,w=24&c,P=512&c,E=C?sa:Vr(u);return function l(){for(var e=arguments.length,t=k(e),n=e;n--;)t[n]=arguments[n];if(w){var i,r=de(l);for(n=t.length,i=0;n--;)t[n]===r&&++i}if(p&&(t=Ur(t,p,d,w)),h&&(t=Br(t,h,y,w)),e-=i,w&&e<v)return r=B(t,r),ue(u,c,Jr,l.placeholder,f,t,r,_,g,v-e);if(r=b?f:this,n=C?r[u]:u,e=t.length,_){i=t.length;for(var o=En(_.length,i),a=Lr(t);o--;){var s=_[o];t[o]=Se(s,i)?a[s]:sa}}else P&&1<e&&t.reverse();return m&&g<e&&(t.length=g),this&&this!==Ja&&this instanceof l&&(n=E||Vr(n)),n.apply(r,t)}}function Yr(n,i){return function(e,t){return function Ut(e,i,r,o){return mt(e,function(e,t,n){i(o,r(e),t,n)}),o}(e,n,i(t),{})}}function Qr(i,r){return function(e,t){var n;if(e===sa&&t===sa)return r;if(e!==sa&&(n=e),t!==sa){if(n===sa)return t;t="string"==typeof e||"string"==typeof t?(e=yr(e),yr(t)):(e=dr(e),dr(t)),n=i(e,t)}return n}}function Xr(r){return pe(function(e){return e=c(e,E(ye())),fr(function(t){var i=this;return r(e,function(e){return n(e,i,t)})})})}function ne(e,t){var n=(t=t===sa?" ":yr(t)).length;return n<2?n?or(t,e):t:(n=or(t,_n(e/D(t))),qa.test(t)?Or(M(n),0,e).join(""):n.slice(0,e))}function re(o){return function(e,t,n){n&&"number"!=typeof n&&Oe(e,t,n)&&(t=n=sa),e=Au(e),t===sa?(t=e,e=0):t=Au(t),n=n===sa?e<t?1:-1:Au(n);var i=-1;t=Pn(_n((t-e)/(n||1)),0);for(var r=k(t);t--;)r[o?t:++i]=e,e+=n;return r}}function ee(n){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=Su(e),t=Su(t)),n(e,t)}}function ue(e,t,n,i,r,o,a,s,u,l){var c=8&t;return 4&(t=(t|(c?32:64))&~(c?64:32))||(t&=-4),r=[e,t,r,c?o:sa,c?a:sa,o=c?sa:o,a=c?sa:a,s,u,l],n=n.apply(sa,r),Re(e)&&vi(n,r),n.placeholder=i,Le(n,e,t)}function ie(e){var i=V[e];return function(e,t){if(e=Su(e),t=null==t?0:En(ku(t),292)){var n=(Iu(e)+"e").split("e");return+((n=(Iu(n=i(n[0]+"e"+(+n[1]+t)))+"e").split("e"))[0]+"e"+(+n[1]-t))}return i(e)}}function oe(n){return function(e){var t=hi(e);return"[object Map]"==t?W(e):"[object Set]"==t?function C(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(e):function k(t,e){return c(e,function(e){return[e,t[e]]})}(e,n(e))}}function fe(e,t,i,r,o,a,s,u){var l=2&t;if(!l&&"function"!=typeof e)throw new q("Expected a function");var c=r?r.length:0;if(c||(t&=-97,r=o=sa),s=s===sa?s:Pn(ku(s),0),u=u===sa?u:ku(u),c-=o?o.length:0,64&t){var f=r,p=o;r=o=sa}var d=l?sa:fi(e);return a=[e,t,i,r,o,f,p,a,s,u],d&&(t=(i=a[1])|(e=d[1]),r=128==e&&8==i||128==e&&256==i&&a[7].length<=d[8]||384==e&&d[7].length<=d[8]&&8==i,t<131||r)&&(1&e&&(a[2]=d[2],t|=1&i?0:4),(i=d[3])&&(r=a[3],a[3]=r?Ur(r,i,d[4]):i,a[4]=r?B(a[3],"__lodash_placeholder__"):d[4]),(i=d[5])&&(r=a[5],a[5]=r?Br(r,i,d[6]):i,a[6]=r?B(a[5],"__lodash_placeholder__"):d[6]),(i=d[7])&&(a[7]=i),128&e&&(a[8]=null==a[8]?d[8]:En(a[8],d[8])),null==a[9]&&(a[9]=d[9]),a[0]=d[0],a[1]=t),e=a[0],t=a[1],i=a[2],r=a[3],o=a[4],!(u=a[9]=a[9]===sa?l?0:e.length:Pn(a[9]-c,0))&&24&t&&(t&=-25),l=t&&1!=t?8==t||16==t?function Kr(o,a,s){var l=Vr(o);return function u(){for(var e=arguments.length,t=k(e),i=e,r=de(u);i--;)t[i]=arguments[i];return(e-=(i=e<3&&t[0]!==r&&t[e-1]!==r?[]:B(t,r)).length)<s?ue(o,a,Jr,u.placeholder,sa,t,i,sa,sa,s-e):n(this&&this!==Ja&&this instanceof u?l:o,this,t)}}(e,t,u):32!=t&&33!=t||o.length?Jr.apply(sa,a):function te(u,e,l,c){var f=1&e,p=Vr(u);return function i(){for(var e=-1,t=arguments.length,r=-1,o=c.length,a=k(o+t),s=this&&this!==Ja&&this instanceof i?p:u;++r<o;)a[r]=c[r];for(;t--;)a[r++]=arguments[++e];return n(s,f?l:this,a)}}(e,t,i,r):function Pr(t,n,i){var r=1&n,o=Vr(t);return function e(){return(this&&this!==Ja&&this instanceof e?o:t).apply(r?i:this,arguments)}}(e,t,i),Le((d?si:vi)(l,a),e,t)}function ce(e,t,n,i){return e===sa||lu(e,K[n])&&!$.call(i,n)?t:e}function ae(e,t,n,i,r,o){return du(e)&&du(t)&&(o.set(t,e),Yt(e,t,sa,ae,o),o.delete(t)),e}function le(e){return xu(e)?sa:e}function se(e,t,n,i,r,o){var a=1&n,s=e.length;if(s!=(u=t.length)&&!(a&&s<u))return!1;if((u=o.get(e))&&o.get(t))return u==t;var u=-1,l=!0,c=2&n?new Nn:sa;for(o.set(e,t),o.set(t,e);++u<s;){var f=e[u],p=t[u];if(i)var d=a?i(p,f,u,t,e,o):i(f,p,u,e,t,o);if(d!==sa){if(d)continue;l=!1;break}if(c){if(!h(t,function(e,t){if(!O(c,t)&&(f===e||r(f,e,n,i,o)))return c.push(t)})){l=!1;break}}else if(f!==p&&!r(f,p,n,i,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function pe(e){return bi(Ue(e,sa,Ze),e+"")}function _e(e){return St(e,Wu,pi)}function ve(e){return St(e,Uu,di)}function ge(e){for(var t=e.name+"",n=Wn[t],i=$.call(Wn,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function de(e){return($.call(An,"placeholder")?An:e).placeholder}function ye(){var e=(e=An.iteratee||Fu)===Fu?qt:e;return arguments.length?e(arguments[0],arguments[1]):e}function be(e,t){var n=e.__data__,i=_typeof(t);return("string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function xe(e){for(var t=Wu(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,r==r&&!du(r)]}return t}function je(e,t){var n=null==e?sa:e[t];return Ft(n)?n:sa}function we(e,t,n){for(var i=-1,r=(t=Sr(t,e)).length,o=!1;++i<r;){var a=Me(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&gu(r)&&Se(a,r)&&(so(e)||ao(e))}function Ae(e){return"function"!=typeof e.constructor||ze(e)?{}:ni(on(e))}function Ee(e){return so(e)||ao(e)||!!(ln&&e&&e[ln])}function Se(e,t){var n=_typeof(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&za.test(e))&&-1<e&&0==e%1&&e<t}function Oe(e,t,n){if(!du(n))return!1;var i=_typeof(t);return!!("number"==i?su(n)&&Se(t,n.length):"string"==i&&t in n)&&lu(n[t],e)}function Ie(e,t){if(so(e))return!1;var n=_typeof(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!wu(e))||Ca.test(e)||!ba.test(e)||null!=t&&e in F(t)}function Re(e){var t=ge(e),n=An[t];return"function"==typeof n&&t in Ln.prototype&&(e===n||!!(t=fi(n))&&e===t[0])}function ze(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||K)}function We(t,n){return function(e){return null!=e&&e[t]===n&&(n!==sa||t in F(e))}}function Ue(o,a,s){return a=Pn(a===sa?o.length-1:a,0),function(){for(var e=arguments,t=-1,i=Pn(e.length-a,0),r=k(i);++t<i;)r[t]=e[a+t];for(t=-1,i=k(a+1);++t<a;)i[t]=e[t];return i[a]=s(r),n(o,this,i)}}function Be(e,t){if("__proto__"!=t)return e[t]}function Le(e,t,n){var i=t+"";t=bi;var r,o=$e;return(o=(n=o(r=(r=i.match(xa))?r[1].split(Da):[],n)).length)&&(n[r=o-1]=(1<o?"& ":"")+n[r],n=n.join(2<o?", ":" "),i=i.replace(Sa,"{\n/* [wrapped with "+n+"] */\n")),t(e,i)}function Ce(n){var i=0,r=0;return function(){var e=Sn(),t=16-(e-r);if(r=e,0<t){if(800<=++i)return arguments[0]}else i=0;return n.apply(sa,arguments)}}function De(e,t){var n=-1,i=(r=e.length)-1;for(t=t===sa?r:t;++n<t;){var r,o=e[r=ir(n,i)];e[r]=e[n],e[n]=o}return e.length=t,e}function Me(e){if("string"==typeof e||wu(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Te(e){if(null==e)return"";try{return Y.call(e)}catch(e){}return e+""}function $e(n,i){return r(la,function(e){var t="_."+e[0];i&e[1]&&!o(n,t)&&n.push(t)}),n.sort()}function Fe(e){if(e instanceof Ln)return e.clone();var t=new On(e.__wrapped__,e.__chain__);return t.__actions__=Lr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ne(e,t,n){var i=null==e?0:e.length;return i?((n=null==n?0:ku(n))<0&&(n=Pn(i+n,0)),_(e,ye(t,3),n)):-1}function Pe(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==sa&&(r=ku(n),r=n<0?Pn(i+r,0):En(r,i-1)),_(e,ye(t,3),r,!0)}function Ze(e){return null!=e&&e.length?wt(e,1):[]}function qe(e){return e&&e.length?e[0]:sa}function Ve(e){var t=null==e?0:e.length;return t?e[t-1]:sa}function Ke(e,t){return e&&e.length&&t&&t.length?er(e,t):e}function Ge(e){return null==e?e:Hn.call(e)}function He(t){if(!t||!t.length)return[];var n=0;return t=i(t,function(e){if(hu(e))return n=Pn(e.length,n),!0}),A(n,function(e){return c(t,b(e))})}function Je(e,t){if(!e||!e.length)return[];var i=He(e);return null==t?i:c(i,function(e){return n(t,sa,e)})}function Ye(e){return(e=An(e)).__chain__=!0,e}function Qe(e,t){return t(e)}function nu(e,t){return(so(e)?r:ii)(e,ye(t,3))}function tu(e,t){return(so(e)?function e(t,n){for(var i=null==t?0:t.length;i--&&!1!==n(t[i],i,t););return t}:ri)(e,ye(t,3))}function ru(e,t){return(so(e)?c:Gt)(e,ye(t,3))}function eu(e,t,n){return t=n?sa:t,t=e&&null==t?e.length:t,fe(e,128,sa,sa,sa,sa,t)}function uu(e,t){var n;if("function"!=typeof t)throw new q("Expected a function");return e=ku(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=sa),n}}function fu(r,a,t){function e(e){var t=s,n=l;return s=l=sa,y=e,p=r.apply(n,t)}function u(e){var t=e-h;return e-=y,h===sa||a<=t||t<0||g&&c<=e}function i(){var e=Ki();if(u(e))return o(e);var t,n=mi;t=e-y,e=a-(e-h),t=g?En(e,c-t):e,d=n(i,t)}function o(t){return d=sa,n&&s?e(t):(s=l=sa,p)}function f(){var t=Ki(),n=u(t);if(s=arguments,l=this,h=t,n){if(d===sa)return y=t=h,d=mi(i,a),_?e(t):p;if(g)return d=mi(i,a),e(h)}return d===sa&&(d=mi(i,a)),p}var s,l,c,p,d,h,y=0,_=!1,g=!1,n=!0;if("function"!=typeof r)throw new q("Expected a function");return a=Su(a)||0,du(t)&&(_=!!t.leading,c=(g="maxWait"in t)?Pn(Su(t.maxWait)||0,a):c,n="trailing"in t?!!t.trailing:n),f.cancel=function(){d!==sa&&li(d),y=0,s=h=l=d=sa},f.flush=function(){return d===sa?p:o(Ki())},f}function cu(i,o){if("function"!=typeof i||null!=o&&"function"!=typeof o)throw new q("Expected a function");var e=function r(){var e=arguments,t=o?o.apply(this,e):e[0],n=r.cache;return n.has(t)?n.get(t):(e=i.apply(this,e),r.cache=n.set(t,e)||n,e)};return e.cache=new(cu.Cache||Fn),e}function au(t){if("function"!=typeof t)throw new q("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function lu(e,t){return e===t||e!=e&&t!=t}function su(e){return null!=e&&gu(e.length)&&!_u(e)}function hu(e){return yu(e)&&su(e)}function pu(e){if(!yu(e))return!1;var t=Ot(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!xu(e)}function _u(e){return!!du(e)&&("[object Function]"==(e=Ot(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function vu(e){return"number"==typeof e&&e==ku(e)}function gu(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}function du(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t)}function yu(e){return null!=e&&"object"==_typeof(e)}function bu(e){return"number"==typeof e||yu(e)&&"[object Number]"==Ot(e)}function xu(e){return!(!yu(e)||"[object Object]"!=Ot(e))&&(null===(e=on(e))||"function"==typeof(e=$.call(e,"constructor")&&e.constructor)&&e instanceof e&&Y.call(e)==tt)}function ju(e){return"string"==typeof e||!so(e)&&yu(e)&&"[object String]"==Ot(e)}function wu(e){return"symbol"==_typeof(e)||yu(e)&&"[object Symbol]"==Ot(e)}function mu(e){if(!e)return[];if(su(e))return ju(e)?M(e):Lr(e);if(cn&&e[cn]){e=e[cn]();for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}return("[object Map]"==(t=hi(e))?W:"[object Set]"==t?L:Lu)(e)}function Au(e){return e?(e=Su(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ku(e){var t=(e=Au(e))%1;return e==e?t?e-t:e:0}function Eu(e){return e?pt(ku(e),0,4294967295):0}function Su(e){if("number"==typeof e)return e;if(wu(e))return ua;if(du(e)&&(e=du(e="function"==typeof e.valueOf?e.valueOf():e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(ka,"");var t=Ba.test(e);return t||Ra.test(e)?Qa(e.slice(2),t?2:8):La.test(e)?ua:+e}function Ou(e){return Cr(e,Uu(e))}function Iu(e){return null==e?"":yr(e)}function Ru(e,t,n){return(e=null==e?sa:Et(e,t))===sa?n:e}function zu(e,t){return null!=e&&we(e,t,zt)}function Wu(e){return su(e)?qn(e):Vt(e)}function Uu(e){if(su(e))e=qn(e,!0);else if(du(e)){var t,n=ze(e),i=[];for(t in e)("constructor"!=t||!n&&$.call(e,t))&&i.push(t);e=i}else{if(t=[],null!=e)for(n in F(e))t.push(n);e=t}return e}function Bu(e,n){if(null==e)return{};var t=c(ve(e),function(e){return[e]});return n=ye(n),tr(e,t,function(e,t){return n(e,t[0])})}function Lu(e){return null==e?[]:S(e,Wu(e))}function Cu(e){return Fo(Iu(e).toLowerCase())}function Du(e){return(e=Iu(e))&&e.replace(Ua,ss).replace(Ga,"")}function Mu(e,t,n){return e=Iu(e),(t=n?sa:t)===sa?Za.test(e)?e.match(Na)||[]:e.match(Ha)||[]:e.match(t)||[]}function Tu(e){return function(){return e}}function $u(e){return e}function Fu(e){return qt("function"==typeof e?e:_t(e,1))}function Nu(i,t,e){var n=Wu(t),o=kt(t,n);null!=e||du(t)&&(o.length||!n.length)||(e=t,t=i,i=this,o=kt(t,Wu(t)));var s=!(du(e)&&"chain"in e&&!e.chain),u=_u(i);return r(o,function(e){var n=t[e];i[e]=n,u&&(i.prototype[e]=function(){var e=this.__chain__;if(s||e){var t=i(this.__wrapped__);return(t.__actions__=Lr(this.__actions__)).push({func:n,args:arguments,thisArg:i}),t.__chain__=e,t}return n.apply(i,a([this.value()],arguments))})}),i}function Pu(){}function Zu(e){return Ie(e)?b(Me(e)):function rr(t){return function(e){return Et(e,t)}}(e)}function qu(){return[]}function Vu(){return!1}var w,k=(C=null==C?Ja:cs.defaults(Ja.Object(),C,cs.pick(Ja,Ka))).Array,P=C.Date,H=C.Error,T=C.Function,V=C.Math,F=C.Object,G=C.RegExp,N=C.String,q=C.TypeError,Z=k.prototype,K=F.prototype,X=C["__core-js_shared__"],Y=T.prototype.toString,$=K.hasOwnProperty,Q=0,J=(w=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",Xe=K.toString,tt=Y.call(F),nt=Ja._,rt=G("^"+Y.call($).replace(Pa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),en=es?C.Buffer:sa,tn=C.Symbol,nn=C.Uint8Array,rn=en?en.allocUnsafe:sa,on=U(F.getPrototypeOf,F),an=F.create,sn=K.propertyIsEnumerable,un=Z.splice,ln=tn?tn.isConcatSpreadable:sa,cn=tn?tn.iterator:sa,fn=tn?tn.toStringTag:sa,pn=function(){try{var e=je(F,"defineProperty");return e({},"",{}),e}catch(e){}}(),dn=C.clearTimeout!==Ja.clearTimeout&&C.clearTimeout,hn=P&&P.now!==Ja.Date.now&&P.now,yn=C.setTimeout!==Ja.setTimeout&&C.setTimeout,_n=V.ceil,gn=V.floor,vn=F.getOwnPropertySymbols,mn=en?en.isBuffer:sa,bn=C.isFinite,Cn=Z.join,wn=U(F.keys,F),Pn=V.max,En=V.min,Sn=P.now,xn=C.parseInt,Dn=V.random,Hn=Z.reverse,jn=je(C,"DataView"),Bn=je(C,"Map"),In=je(C,"Promise"),Rn=je(C,"Set"),zn=je(C,"WeakMap"),Un=je(F,"create"),Vn=zn&&new zn,Wn={},Gn=Te(jn),Kn=Te(Bn),Xn=Te(In),Yn=Te(Rn),$n=Te(zn),Jn=tn?tn.prototype:sa,ei=Jn?Jn.valueOf:sa,ti=Jn?Jn.toString:sa,ni=function(){function n(){}return function(e){return du(e)?an?an(e):(n.prototype=e,e=new n,n.prototype=sa,e):{}}}();An.templateSettings={escape:ga,evaluate:va,interpolate:ma,variable:"",imports:{_:An}},(An.prototype=kn.prototype).constructor=An,(On.prototype=ni(kn.prototype)).constructor=On,(Ln.prototype=ni(kn.prototype)).constructor=Ln,Mn.prototype.clear=function(){this.__data__=Un?Un(null):{},this.size=0},Mn.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Mn.prototype.get=function(e){var t=this.__data__;return Un?"__lodash_hash_undefined__"===(e=t[e])?sa:e:$.call(t,e)?t[e]:sa},Mn.prototype.has=function(e){var t=this.__data__;return Un?t[e]!==sa:$.call(t,e)},Mn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Un&&t===sa?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(e){var t=this.__data__;return!((e=ft(t,e))<0||(e==t.length-1?t.pop():un.call(t,e,1),--this.size,0))},Tn.prototype.get=function(e){var t=this.__data__;return(e=ft(t,e))<0?sa:t[e][1]},Tn.prototype.has=function(e){return-1<ft(this.__data__,e)},Tn.prototype.set=function(e,t){var n=this.__data__,i=ft(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(Bn||Tn),string:new Mn}},Fn.prototype.delete=function(e){return e=be(this,e).delete(e),this.size-=e?1:0,e},Fn.prototype.get=function(e){return be(this,e).get(e)},Fn.prototype.has=function(e){return be(this,e).has(e)},Fn.prototype.set=function(e,t){var n=be(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Nn.prototype.add=Nn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.clear=function(){this.__data__=new Tn,this.size=0},Zn.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Zn.prototype.get=function(e){return this.__data__.get(e)},Zn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Tn){var i=n.__data__;if(!Bn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Fn(i)}return n.set(e,t),this.size=n.size,this};var ii=Fr(mt),ri=Fr(At,!0),oi=Nr(),ai=Nr(!0),si=Vn?function(e,t){return Vn.set(e,t),e}:$u,ui=pn?function(e,t){return pn(e,"toString",{configurable:!0,enumerable:!1,value:Tu(t),writable:!0})}:$u,li=dn||function(e){return Ja.clearTimeout(e)},ci=Rn&&1/L(new Rn([,-0]))[1]==1/0?function(e){return new Rn(e)}:Pu,fi=Vn?function(e){return Vn.get(e)}:Pu,pi=vn?function(t){return null==t?[]:(t=F(t),i(vn(t),function(e){return sn.call(t,e)}))}:qu,di=vn?function(e){for(var t=[];e;)a(t,pi(e)),e=on(e);return t}:qu,hi=Ot;(jn&&"[object DataView]"!=hi(new jn(new ArrayBuffer(1)))||Bn&&"[object Map]"!=hi(new Bn)||In&&"[object Promise]"!=hi(In.resolve())||Rn&&"[object Set]"!=hi(new Rn)||zn&&"[object WeakMap]"!=hi(new zn))&&(hi=function vo(e){var t=Ot(e);if(e=(e="[object Object]"==t?e.constructor:sa)?Te(e):"")switch(e){case Gn:return"[object DataView]";case Kn:return"[object Map]";case Xn:return"[object Promise]";case Yn:return"[object Set]";case $n:return"[object WeakMap]"}return t});var yi,_i,gi=X?_u:Vu,vi=Ce(si),mi=yn||function(e,t){return Ja.setTimeout(e,t)},bi=Ce(ui),Ci=(_i=(yi=cu(yi=function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(wa,function(e,t,n,i){r.push(n?i.replace(Ma,"$1"):t||e)}),r},function(e){return 500===_i.size&&_i.clear(),e})).cache,yi),wi=fr(function(e,t){return hu(e)?yt(e,wt(t,1,hu,!0)):[]}),Pi=fr(function(e,t){var n=Ve(t);return hu(n)&&(n=sa),hu(e)?yt(e,wt(t,1,hu,!0),ye(n,2)):[]}),Ei=fr(function(e,t){var n=Ve(t);return hu(n)&&(n=sa),hu(e)?yt(e,wt(t,1,hu,!0),sa,n):[]}),ki=fr(function(e){var t=c(e,kr);return t.length&&t[0]===e[0]?Wt(t):[]}),Ai=fr(function(e){var t=Ve(e),n=c(e,kr);return t===Ve(n)?t=sa:n.pop(),n.length&&n[0]===e[0]?Wt(n,ye(t,2)):[]}),Oi=fr(function(e){var t=Ve(e),n=c(e,kr);return(t="function"==typeof t?t:sa)&&n.pop(),n.length&&n[0]===e[0]?Wt(n,sa,t):[]}),Si=fr(Ke),xi=pe(function(e,t){var n=null==e?0:e.length,i=ht(e,t);return ur(e,c(t,function(e){return Se(e,n)?+e:e}).sort(Wr)),i}),Di=fr(function(e){return br(wt(e,1,hu,!0))}),Hi=fr(function(e){var t=Ve(e);return hu(t)&&(t=sa),br(wt(e,1,hu,!0),ye(t,2))}),Mi=fr(function(e){var t="function"==typeof(t=Ve(e))?t:sa;return br(wt(e,1,hu,!0),sa,t)}),Ti=fr(function(e,t){return hu(e)?yt(e,t):[]}),ji=fr(function(e){return mr(i(e,hu))}),Li=fr(function(e){var t=Ve(e);return hu(t)&&(t=sa),mr(i(e,hu),ye(t,2))}),Bi=fr(function(e){var t="function"==typeof(t=Ve(e))?t:sa;return mr(i(e,hu),sa,t)}),Ii=fr(He),Ri=fr(function(e){var t;return Je(e,t="function"==typeof(t=1<(t=e.length)?e[t-1]:sa)?(e.pop(),t):sa)}),zi=pe(function(t){var n=t.length,e=n?t[0]:0,i=this.__wrapped__,r=function u(e){return ht(e,t)};return!(1<n||this.__actions__.length)&&i instanceof Ln&&Se(e)?((i=i.slice(e,+e+(n?1:0))).__actions__.push({func:Qe,args:[r],thisArg:sa}),new On(i,this.__chain__).thru(function(e){return n&&!e.length&&e.push(sa),e})):this.thru(r)}),Ui=Tr(function(e,t,n){$.call(e,n)?++e[n]:st(e,n,1)}),Vi=Gr(Ne),Fi=Gr(Pe),Wi=Tr(function(e,t,n){$.call(e,n)?e[n].push(t):st(e,n,[t])}),Gi=fr(function(e,t,i){var r=-1,o="function"==typeof t,a=su(e)?k(e.length):[];return ii(e,function(e){a[++r]=o?n(t,e,i):Bt(e,t,i)}),a}),Ni=Tr(function(e,t,n){st(e,n,t)}),qi=Tr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Zi=fr(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Oe(e,t[0],t[1])?t=[]:2<n&&Oe(t[0],t[1],t[2])&&(t=[t[0]]),Xt(e,wt(t,1),[])}),Ki=hn||function(){return Ja.Date.now()},Xi=fr(function(e,t,n){var i=1;if(n.length){var r=B(n,de(Xi));i=32|i}return fe(e,i,t,n,r)}),Yi=fr(function(e,t,n){var i=3;if(n.length){var r=B(n,de(Yi));i=32|i}return fe(t,i,e,n,r)}),$i=fr(function(e,t){return dt(e,1,t)}),Qi=fr(function(e,t,n){return dt(e,Su(t)||0,n)});cu.Cache=Fn;var Ji,eo=fr(function(r,o){var a=(o=1==o.length&&so(o[0])?c(o[0],E(ye())):c(wt(o,1),E(ye()))).length;return fr(function(e){for(var t=-1,i=En(e.length,a);++t<i;)e[t]=o[t].call(this,e[t]);return n(r,this,e)})}),to=fr(function(e,t){return fe(e,32,sa,t,B(t,de(to)))}),no=fr(function(e,t){return fe(e,64,sa,t,B(t,de(no)))}),io=pe(function(e,t){return fe(e,256,sa,sa,sa,t)}),ro=ee(It),oo=ee(function(e,t){return t<=e}),ao=Lt(function(){return arguments}())?Lt:function(e){return yu(e)&&$.call(e,"callee")&&!sn.call(e,"callee")},so=k.isArray,uo=ts?E(ts):function Ct(e){return yu(e)&&"[object ArrayBuffer]"==Ot(e)},lo=mn||Vu,co=ns?E(ns):function Dt(e){return yu(e)&&"[object Date]"==Ot(e)},fo=is?E(is):function Tt(e){return yu(e)&&"[object Map]"==hi(e)},po=rs?E(rs):function Nt(e){return yu(e)&&"[object RegExp]"==Ot(e)},ho=os?E(os):function Pt(e){return yu(e)&&"[object Set]"==hi(e)},yo=as?E(as):function Zt(e){return yu(e)&&gu(e.length)&&!!Xa[Ot(e)]},_o=ee(Kt),go=ee(function(e,t){return e<=t}),mo=$r(function(e,t){if(ze(t)||su(t))Cr(t,Wu(t),e);else for(var n in t)$.call(t,n)&&ot(e,n,t[n])}),bo=$r(function(e,t){Cr(t,Uu(t),e)}),Co=$r(function(e,t,n,i){Cr(t,Uu(t),e,i)}),wo=$r(function(e,t,n,i){Cr(t,Wu(t),e,i)}),Po=pe(ht),Eo=fr(function(e,t){e=F(e);var n=-1,i=t.length;for((r=2<i?t[2]:sa)&&Oe(t[0],t[1],r)&&(i=1);++n<i;)for(var r,o=Uu(r=t[n]),a=-1,s=o.length;++a<s;){var u=o[a],l=e[u];(l===sa||lu(l,K[u])&&!$.call(e,u))&&(e[u]=r[u])}return e}),ko=fr(function(e){return e.push(sa,ae),n(Do,sa,e)}),Ao=Yr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Xe.call(t)),e[t]=n},Tu($u)),Oo=Yr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Xe.call(t)),$.call(e,t)?e[t].push(n):e[t]=[n]},ye),So=fr(Bt),xo=$r(function(e,t,n){Yt(e,t,n)}),Do=$r(function(e,t,n,i){Yt(e,t,n,i)}),Ho=pe(function(t,e){var n={};if(null==t)return n;var i=!1;e=c(e,function(e){return e=Sr(e,t),i||(i=1<e.length),e}),Cr(t,ve(t),n),i&&(n=_t(n,7,le));for(var r=e.length;r--;)xr(n,e[r]);return n}),Mo=pe(function(e,t){return null==e?{}:function nr(n,e){return tr(n,e,function(e,t){return zu(n,t)})}(e,t)}),To=oe(Wu),jo=oe(Uu),Lo=qr(function(e,t,n){return t=t.toLowerCase(),e+(n?Cu(t):t)}),Bo=qr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Io=qr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ro=Zr("toLowerCase"),zo=qr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Uo=qr(function(e,t,n){return e+(n?" ":"")+Fo(t)}),Vo=qr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Fo=Zr("toUpperCase"),Wo=fr(function(e,t){try{return n(e,sa,t)}catch(e){return pu(e)?e:new H(e)}}),Go=pe(function(t,e){return r(e,function(e){e=Me(e),st(t,e,Xi(t[e],t))}),t}),No=Hr(),qo=Hr(!0),Zo=fr(function(t,n){return function(e){return Bt(e,t,n)}}),Ko=fr(function(t,n){return function(e){return Bt(t,e,n)}}),Xo=Xr(c),Yo=Xr(u),$o=Xr(h),Qo=re(),Jo=re(!0),ea=Qr(function(e,t){return e+t},0),ta=ie("ceil"),na=Qr(function(e,t){return e/t},1),ia=ie("floor"),ra=Qr(function(e,t){return e*t},1),oa=ie("round"),aa=Qr(function(e,t){return e-t},0);return An.after=function(e,t){if("function"!=typeof t)throw new q("Expected a function");return e=ku(e),function(){if(--e<1)return t.apply(this,arguments)}},An.ary=eu,An.assign=mo,An.assignIn=bo,An.assignInWith=Co,An.assignWith=wo,An.at=Po,An.before=uu,An.bind=Xi,An.bindAll=Go,An.bindKey=Yi,An.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return so(e)?e:[e]},An.chain=Ye,An.chunk=function(e,t,n){if(t=(n?Oe(e,t,n):t===sa)?1:Pn(ku(t),0),!(n=null==e?0:e.length)||t<1)return[];for(var i=0,r=0,o=k(_n(n/t));i<n;)o[r++]=hr(e,i,i+=t);return o},An.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},An.concat=function(){var e=arguments.length;if(!e)return[];for(var t=k(e-1),n=arguments[0];e--;)t[e-1]=arguments[e];return a(so(n)?Lr(n):[n],wt(t,1))},An.cond=function(r){var o=null==r?0:r.length,t=ye();return r=o?c(r,function(e){if("function"!=typeof e[1])throw new q("Expected a function");return[t(e[0]),e[1]]}):[],fr(function(e){for(var t=-1;++t<o;){var i=r[t];if(n(i[0],this,e))return n(i[1],this,e)}})},An.conforms=function(e){return function vt(t){var n=Wu(t);return function(e){return gt(e,t,n)}}(_t(e,1))},An.constant=Tu,An.countBy=Ui,An.create=function(e,t){var n=ni(e);return null==t?n:at(n,t)},An.curry=function iu(e,t,n){return(e=fe(e,8,sa,sa,sa,sa,sa,t=n?sa:t)).placeholder=iu.placeholder,e},An.curryRight=function ou(e,t,n){return(e=fe(e,16,sa,sa,sa,sa,sa,t=n?sa:t)).placeholder=ou.placeholder,e},An.debounce=fu,An.defaults=Eo,An.defaultsDeep=ko,An.defer=$i,An.delay=Qi,An.difference=wi,An.differenceBy=Pi,An.differenceWith=Ei,An.drop=function(e,t,n){var i=null==e?0:e.length;return i?hr(e,(t=n||t===sa?1:ku(t))<0?0:t,i):[]},An.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?hr(e,0,(t=i-(t=n||t===sa?1:ku(t)))<0?0:t):[]},An.dropRightWhile=function(e,t){return e&&e.length?jr(e,ye(t,3),!0,!0):[]},An.dropWhile=function(e,t){return e&&e.length?jr(e,ye(t,3),!0):[]},An.fill=function(e,t,n,i){var r=null==e?0:e.length;if(!r)return[];for(n&&"number"!=typeof n&&Oe(e,t,n)&&(n=0,i=r),r=e.length,(n=ku(n))<0&&(n=r<-n?0:r+n),(i=i===sa||r<i?r:ku(i))<0&&(i+=r),i=i<n?0:Eu(i);n<i;)e[n++]=t;return e},An.filter=function(e,t){return(so(e)?i:jt)(e,ye(t,3))},An.flatMap=function(e,t){return wt(ru(e,t),1)},An.flatMapDeep=function(e,t){return wt(ru(e,t),1/0)},An.flatMapDepth=function(e,t,n){return n=n===sa?1:ku(n),wt(ru(e,t),n)},An.flatten=Ze,An.flattenDeep=function(e){return null!=e&&e.length?wt(e,1/0):[]},An.flattenDepth=function(e,t){return null!=e&&e.length?wt(e,t=t===sa?1:ku(t)):[]},An.flip=function(e){return fe(e,512)},An.flow=No,An.flowRight=qo,An.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},An.functions=function(e){return null==e?[]:kt(e,Wu(e))},An.functionsIn=function(e){return null==e?[]:kt(e,Uu(e))},An.groupBy=Wi,An.initial=function(e){return null!=e&&e.length?hr(e,0,-1):[]},An.intersection=ki,An.intersectionBy=Ai,An.intersectionWith=Oi,An.invert=Ao,An.invertBy=Oo,An.invokeMap=Gi,An.iteratee=Fu,An.keyBy=Ni,An.keys=Wu,An.keysIn=Uu,An.map=ru,An.mapKeys=function(e,i){var r={};return i=ye(i,3),mt(e,function(e,t,n){st(r,i(e,t,n),e)}),r},An.mapValues=function(e,i){var r={};return i=ye(i,3),mt(e,function(e,t,n){st(r,t,i(e,t,n))}),r},An.matches=function(e){return Ht(_t(e,1))},An.matchesProperty=function(e,t){return Jt(e,_t(t,1))},An.memoize=cu,An.merge=xo,An.mergeWith=Do,An.method=Zo,An.methodOf=Ko,An.mixin=Nu,An.negate=au,An.nthArg=function(t){return t=ku(t),fr(function(e){return Qt(e,t)})},An.omit=Ho,An.omitBy=function(e,t){return Bu(e,au(ye(t)))},An.once=function(e){return uu(2,e)},An.orderBy=function(e,t,n,i){return null==e?[]:(so(t)||(t=null==t?[]:[t]),so(n=i?sa:n)||(n=null==n?[]:[n]),Xt(e,t,n))},An.over=Xo,An.overArgs=eo,An.overEvery=Yo,An.overSome=$o,An.partial=to,An.partialRight=no,An.partition=qi,An.pick=Mo,An.pickBy=Bu,An.property=Zu,An.propertyOf=function(t){return function(e){return null==t?sa:Et(t,e)}},An.pull=Si,An.pullAll=Ke,An.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?er(e,t,ye(n,2)):e},An.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?er(e,t,sa,n):e},An.pullAt=xi,An.range=Qo,An.rangeRight=Jo,An.rearg=io,An.reject=function(e,t){return(so(e)?i:jt)(e,au(ye(t,3)))},An.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=ye(t,3);++i<o;){var a=e[i];t(a,i,e)&&(n.push(a),r.push(i))}return ur(e,r),n},An.rest=function(e,t){if("function"!=typeof e)throw new q("Expected a function");return fr(e,t=t===sa?t:ku(t))},An.reverse=Ge,An.sampleSize=function(e,t,n){return t=(n?Oe(e,t,n):t===sa)?1:ku(t),(so(e)?function et(e,t){return De(Lr(e),pt(t,0,e.length))}:function ar(e,t){var n=Lu(e);return De(n,pt(t,0,n.length))})(e,t)},An.set=function(e,t,n){return null==e?e:lr(e,t,n)},An.setWith=function(e,t,n,i){return i="function"==typeof i?i:sa,null==e?e:lr(e,t,n,i)},An.shuffle=function(e){return(so(e)?function ut(e){return De(Lr(e))}:function sr(e){return De(Lu(e))})(e)},An.slice=function(e,t,n){var i=null==e?0:e.length;return i?hr(e,t,n=n&&"number"!=typeof n&&Oe(e,t,n)?(t=0,i):(t=null==t?0:ku(t),n===sa?i:ku(n))):[]},An.sortBy=Zi,An.sortedUniq=function(e){return e&&e.length?gr(e):[]},An.sortedUniqBy=function(e,t){return e&&e.length?gr(e,ye(t,2)):[]},An.split=function(e,t,n){return n&&"number"!=typeof n&&Oe(e,t,n)&&(t=n=sa),(n=n===sa?4294967295:n>>>0)?(e=Iu(e))&&("string"==typeof t||null!=t&&!po(t))&&(!(t=yr(t))&&qa.test(e))?Or(M(e),0,n):e.split(t,n):[]},An.spread=function(i,r){if("function"!=typeof i)throw new q("Expected a function");return r=null==r?0:Pn(ku(r),0),fr(function(e){var t=e[r];return e=Or(e,0,r),t&&a(e,t),n(i,this,e)})},An.tail=function(e){var t=null==e?0:e.length;return t?hr(e,1,t):[]},An.take=function(e,t,n){return e&&e.length?hr(e,0,(t=n||t===sa?1:ku(t))<0?0:t):[]},An.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?hr(e,(t=i-(t=n||t===sa?1:ku(t)))<0?0:t,i):[]},An.takeRightWhile=function(e,t){return e&&e.length?jr(e,ye(t,3),!1,!0):[]},An.takeWhile=function(e,t){return e&&e.length?jr(e,ye(t,3)):[]},An.tap=function(e,t){return t(e),e},An.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new q("Expected a function");return du(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),fu(e,t,{leading:i,maxWait:t,trailing:r})},An.thru=Qe,An.toArray=mu,An.toPairs=To,An.toPairsIn=jo,An.toPath=function(e){return so(e)?c(e,Me):wu(e)?[e]:Lr(Ci(Iu(e)))},An.toPlainObject=Ou,An.transform=function(e,i,o){var t=so(e),n=t||lo(e)||yo(e);if(i=ye(i,4),null==o){var a=e&&e.constructor;o=n?t?new a:[]:du(e)&&_u(a)?ni(on(e)):{}}return(n?r:mt)(e,function(e,t,n){return i(o,e,t,n)}),o},An.unary=function(e){return eu(e,1)},An.union=Di,An.unionBy=Hi,An.unionWith=Mi,An.uniq=function(e){return e&&e.length?br(e):[]},An.uniqBy=function(e,t){return e&&e.length?br(e,ye(t,2)):[]},An.uniqWith=function(e,t){return t="function"==typeof t?t:sa,e&&e.length?br(e,sa,t):[]},An.unset=function(e,t){return null==e||xr(e,t)},An.unzip=He,An.unzipWith=Je,An.update=function(e,t,n){return null!=e&&(e=lr(e,t,(n=Er(n))(Et(e,t)),void 0)),e},An.updateWith=function(e,t,n,i){return i="function"==typeof i?i:sa,null!=e&&(e=lr(e,t,(n=Er(n))(Et(e,t)),i)),e},An.values=Lu,An.valuesIn=function(e){return null==e?[]:S(e,Uu(e))},An.without=Ti,An.words=Mu,An.wrap=function(e,t){return to(Er(t),e)},An.xor=ji,An.xorBy=Li,An.xorWith=Bi,An.zip=Ii,An.zipObject=function(e,t){return Ar(e||[],t||[],ot)},An.zipObjectDeep=function(e,t){return Ar(e||[],t||[],lr)},An.zipWith=Ri,An.entries=To,An.entriesIn=jo,An.extend=bo,An.extendWith=Co,Nu(An,An),An.add=ea,An.attempt=Wo,An.camelCase=Lo,An.capitalize=Cu,An.ceil=ta,An.clamp=function(e,t,n){return n===sa&&(n=t,t=sa),n!==sa&&(n=(n=Su(n))==n?n:0),t!==sa&&(t=(t=Su(t))==t?t:0),pt(Su(e),t,n)},An.clone=function(e){return _t(e,4)},An.cloneDeep=function(e){return _t(e,5)},An.cloneDeepWith=function(e,t){return _t(e,5,t="function"==typeof t?t:sa)},An.cloneWith=function(e,t){return _t(e,4,t="function"==typeof t?t:sa)},An.conformsTo=function(e,t){return null==t||gt(e,t,Wu(t))},An.deburr=Du,An.defaultTo=function(e,t){return null==e||e!=e?t:e},An.divide=na,An.endsWith=function(e,t,n){e=Iu(e),t=yr(t);var i=e.length;i=n=n===sa?i:pt(ku(n),0,i);return 0<=(n-=t.length)&&e.slice(n,i)==t},An.eq=lu,An.escape=function(e){return(e=Iu(e))&&_a.test(e)?e.replace(ha,us):e},An.escapeRegExp=function(e){return(e=Iu(e))&&Ea.test(e)?e.replace(Pa,"\\$&"):e},An.every=function(e,t,n){var i=so(e)?u:bt;return n&&Oe(e,t,n)&&(t=sa),i(e,ye(t,3))},An.find=Vi,An.findIndex=Ne,An.findKey=function(e,t){return p(e,ye(t,3),mt)},An.findLast=Fi,An.findLastIndex=Pe,An.findLastKey=function(e,t){return p(e,ye(t,3),At)},An.floor=ia,An.forEach=nu,An.forEachRight=tu,An.forIn=function(e,t){return null==e?e:oi(e,ye(t,3),Uu)},An.forInRight=function(e,t){return null==e?e:ai(e,ye(t,3),Uu)},An.forOwn=function(e,t){return e&&mt(e,ye(t,3))},An.forOwnRight=function(e,t){return e&&At(e,ye(t,3))},An.get=Ru,An.gt=ro,An.gte=oo,An.has=function(e,t){return null!=e&&we(e,t,Rt)},An.hasIn=zu,An.head=qe,An.identity=$u,An.includes=function(e,t,n,i){return e=su(e)?e:Lu(e),n=n&&!i?ku(n):0,i=e.length,n<0&&(n=Pn(i+n,0)),ju(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<v(e,t,n)},An.indexOf=function(e,t,n){var i=null==e?0:e.length;return i?((n=null==n?0:ku(n))<0&&(n=Pn(i+n,0)),v(e,t,n)):-1},An.inRange=function(e,t,n){return t=Au(t),n===sa?(n=t,t=0):n=Au(n),(e=Su(e))>=En(t,n)&&e<Pn(t,n)},An.invoke=So,An.isArguments=ao,An.isArray=so,An.isArrayBuffer=uo,An.isArrayLike=su,An.isArrayLikeObject=hu,An.isBoolean=function(e){return!0===e||!1===e||yu(e)&&"[object Boolean]"==Ot(e)},An.isBuffer=lo,An.isDate=co,An.isElement=function(e){return yu(e)&&1===e.nodeType&&!xu(e)},An.isEmpty=function(e){if(null==e)return!0;if(su(e)&&(so(e)||"string"==typeof e||"function"==typeof e.splice||lo(e)||yo(e)||ao(e)))return!e.length;var t=hi(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ze(e))return!Vt(e).length;for(var n in e)if($.call(e,n))return!1;return!0},An.isEqual=function(e,t){return Mt(e,t)},An.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:sa)?n(e,t):sa;return i===sa?Mt(e,t,sa,n):!!i},An.isError=pu,An.isFinite=function(e){return"number"==typeof e&&bn(e)},An.isFunction=_u,An.isInteger=vu,An.isLength=gu,An.isMap=fo,An.isMatch=function(e,t){return e===t||$t(e,t,xe(t))},An.isMatchWith=function(e,t,n){return n="function"==typeof n?n:sa,$t(e,t,xe(t),n)},An.isNaN=function(e){return bu(e)&&e!=+e},An.isNative=function(e){if(gi(e))throw new H("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ft(e)},An.isNil=function(e){return null==e},An.isNull=function(e){return null===e},An.isNumber=bu,An.isObject=du,An.isObjectLike=yu,An.isPlainObject=xu,An.isRegExp=po,An.isSafeInteger=function(e){return vu(e)&&-9007199254740991<=e&&e<=9007199254740991},An.isSet=ho,An.isString=ju,An.isSymbol=wu,An.isTypedArray=yo,An.isUndefined=function(e){return e===sa},An.isWeakMap=function(e){return yu(e)&&"[object WeakMap]"==hi(e)},An.isWeakSet=function(e){return yu(e)&&"[object WeakSet]"==Ot(e)},An.join=function(e,t){return null==e?"":Cn.call(e,t)},An.kebabCase=Bo,An.last=Ve,An.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;if(n!==sa&&(r=(r=ku(n))<0?Pn(i+r,0):En(r,i-1)),t==t)e:{for(n=r+1;n--;)if(e[n]===t){e=n;break e}e=n}else e=_(e,d,r,!0);return e},An.lowerCase=Io,An.lowerFirst=Ro,An.lt=_o,An.lte=go,An.max=function(e){return e&&e.length?xt(e,$u,It):sa},An.maxBy=function(e,t){return e&&e.length?xt(e,ye(t,2),It):sa},An.mean=function(e){return y(e,$u)},An.meanBy=function(e,t){return y(e,ye(t,2))},An.min=function(e){return e&&e.length?xt(e,$u,Kt):sa},An.minBy=function(e,t){return e&&e.length?xt(e,ye(t,2),Kt):sa},An.stubArray=qu,An.stubFalse=Vu,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=ra,An.nth=function(e,t){return e&&e.length?Qt(e,ku(t)):sa},An.noConflict=function(){return Ja._===this&&(Ja._=nt),this},An.noop=Pu,An.now=Ki,An.pad=function(e,t,n){e=Iu(e);var i=(t=ku(t))?D(e):0;return!t||t<=i?e:ne(gn(t=(t-i)/2),n)+e+ne(_n(t),n)},An.padEnd=function(e,t,n){e=Iu(e);var i=(t=ku(t))?D(e):0;return t&&i<t?e+ne(t-i,n):e},An.padStart=function(e,t,n){e=Iu(e);var i=(t=ku(t))?D(e):0;return t&&i<t?ne(t-i,n)+e:e},An.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(Iu(e).replace(Aa,""),t||0)},An.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Oe(e,t,n)&&(t=n=sa),n===sa&&("boolean"==typeof t?(n=t,t=sa):"boolean"==typeof e&&(n=e,e=sa)),e===sa&&t===sa?(e=0,t=1):(e=Au(e),t===sa?(t=e,e=0):t=Au(t)),t<e){var i=e;e=t,t=i}return n||e%1||t%1?(n=Dn(),En(e+n*(t-e+$a("1e-"+((n+"").length-1))),t)):ir(e,t)},An.reduce=function(e,t,n){var i=so(e)?l:j,r=arguments.length<3;return i(e,ye(t,4),n,r,ii)},An.reduceRight=function(e,t,n){var i=so(e)?s:j,r=arguments.length<3;return i(e,ye(t,4),n,r,ri)},An.repeat=function(e,t,n){return t=(n?Oe(e,t,n):t===sa)?1:ku(t),or(Iu(e),t)},An.replace=function(){var e=arguments,t=Iu(e[0]);return e.length<3?t:t.replace(e[1],e[2])},An.result=function(e,t,n){var i=-1,r=(t=Sr(t,e)).length;for(r||(r=1,e=sa);++i<r;){var o=null==e?sa:e[Me(t[i])];o===sa&&(i=r,o=n),e=_u(o)?o.call(e):o}return e},An.round=oa,An.runInContext=x,An.sample=function(e){return(so(e)?Qn:function cr(e){return Qn(Lu(e))})(e)},An.size=function(e){if(null==e)return 0;if(su(e))return ju(e)?D(e):e.length;var t=hi(e);return"[object Map]"==t||"[object Set]"==t?e.size:Vt(e).length},An.snakeCase=zo,An.some=function(e,t,n){var i=so(e)?h:pr;return n&&Oe(e,t,n)&&(t=sa),i(e,ye(t,3))},An.sortedIndex=function(e,t){return _r(e,t)},An.sortedIndexBy=function(e,t,n){return vr(e,t,ye(n,2))},An.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=_r(e,t);if(i<n&&lu(e[i],t))return i}return-1},An.sortedLastIndex=function(e,t){return _r(e,t,!0)},An.sortedLastIndexBy=function(e,t,n){return vr(e,t,ye(n,2),!0)},An.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=_r(e,t,!0)-1;if(lu(e[n],t))return n}return-1},An.startCase=Uo,An.startsWith=function(e,t,n){return e=Iu(e),n=null==n?0:pt(ku(n),0,e.length),t=yr(t),e.slice(n,n+t.length)==t},An.subtract=aa,An.sum=function(e){return e&&e.length?m(e,$u):0},An.sumBy=function(e,t){return e&&e.length?m(e,ye(t,2)):0},An.template=function(a,e,t){var n=An.templateSettings;t&&Oe(a,e,t)&&(e=sa),a=Iu(a),e=Co({},e,n,ce);var s,u,i=Wu(t=Co({},e.imports,n.imports,ce)),r=S(t,i),l=0;t=e.interpolate||Va;var c="__p+='";t=G((e.escape||Va).source+"|"+t.source+"|"+(t===ma?Ta:Va).source+"|"+(e.evaluate||Va).source+"|$","g");var o="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(a.replace(t,function(e,t,n,i,r,o){return n||(n=i),c+=a.slice(l,o).replace(Fa,z),t&&(s=!0,c+="'+__e("+t+")+'"),r&&(u=!0,c+="';"+r+";\n__p+='"),n&&(c+="'+((__t=("+n+"))==null?'':__t)+'"),l=o+e.length,e}),c+="';",(e=e.variable)||(c="with(obj){"+c+"}"),c=(u?c.replace(ca,""):c).replace(fa,"$1").replace(pa,"$1;"),c="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",(e=Wo(function(){return T(i,o+"return "+c).apply(sa,r)})).source=c,pu(e))throw e;return e},An.times=function(e,t){if((e=ku(e))<1||9007199254740991<e)return[];var n=4294967295,i=En(e,4294967295);for(e-=4294967295,i=A(i,t=ye(t));++n<e;)t(n);return i},An.toFinite=Au,An.toInteger=ku,An.toLength=Eu,An.toLower=function(e){return Iu(e).toLowerCase()},An.toNumber=Su,An.toSafeInteger=function(e){return e?pt(ku(e),-9007199254740991,9007199254740991):0===e?e:0},An.toString=Iu,An.toUpper=function(e){return Iu(e).toUpperCase()},An.trim=function(e,t,n){return(e=Iu(e))&&(n||t===sa)?e.replace(ka,""):e&&(t=yr(t))?Or(e=M(e),t=I(e,n=M(t)),n=R(e,n)+1).join(""):e},An.trimEnd=function(e,t,n){return(e=Iu(e))&&(n||t===sa)?e.replace(Oa,""):e&&(t=yr(t))?Or(e=M(e),0,t=R(e,M(t))+1).join(""):e},An.trimStart=function(e,t,n){return(e=Iu(e))&&(n||t===sa)?e.replace(Aa,""):e&&(t=yr(t))?Or(e=M(e),t=I(e,M(t))).join(""):e},An.truncate=function(e,t){var n=30,i="...";if(du(t)){var r="separator"in t?t.separator:r;n="length"in t?ku(t.length):n,i="omission"in t?yr(t.omission):i}var o=(e=Iu(e)).length;if(qa.test(e)){var a=M(e);o=a.length}if(o<=n)return e;if((o=n-D(i))<1)return i;if(n=a?Or(a,0,o).join(""):e.slice(0,o),r===sa)return n+i;if(a&&(o+=n.length-o),po(r)){if(e.slice(o).search(r)){var s=n;for(r.global||(r=G(r.source,Iu(ja.exec(r))+"g")),r.lastIndex=0;a=r.exec(s);)var u=a.index;n=n.slice(0,u===sa?o:u)}}else e.indexOf(yr(r),o)!=o&&(-1<(r=n.lastIndexOf(r))&&(n=n.slice(0,r)));return n+i},An.unescape=function(e){return(e=Iu(e))&&ya.test(e)?e.replace(da,ls):e},An.uniqueId=function(e){var t=++Q;return Iu(e)+t},An.upperCase=Vo,An.upperFirst=Fo,An.each=nu,An.eachRight=tu,An.first=qe,Nu(An,(Ji={},mt(An,function(e,t){$.call(An.prototype,t)||(Ji[t]=e)}),Ji),{chain:!1}),An.VERSION="4.17.11",r("bind bindKey curry curryRight partial partialRight".split(" "),function(e){An[e].placeholder=An}),r(["drop","take"],function(n,i){Ln.prototype[n]=function(e){e=e===sa?1:Pn(ku(e),0);var t=this.__filtered__&&!i?new Ln(this):this.clone();return t.__filtered__?t.__takeCount__=En(e,t.__takeCount__):t.__views__.push({size:En(e,4294967295),type:n+(t.__dir__<0?"Right":"")}),t},Ln.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()}}),r(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;Ln.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ye(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),r(["head","last"],function(e,t){var n="take"+(t?"Right":"");Ln.prototype[e]=function(){return this[n](1).value()[0]}}),r(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Ln.prototype[e]=function(){return this.__filtered__?new Ln(this):this[n](1)}}),Ln.prototype.compact=function(){return this.filter($u)},Ln.prototype.find=function(e){return this.filter(e).head()},Ln.prototype.findLast=function(e){return this.reverse().find(e)},Ln.prototype.invokeMap=fr(function(t,n){return"function"==typeof t?new Ln(this):this.map(function(e){return Bt(e,t,n)})}),Ln.prototype.reject=function(e){return this.filter(au(ye(e)))},Ln.prototype.slice=function(e,t){e=ku(e);var n=this;return n.__filtered__&&(0<e||t<0)?new Ln(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==sa&&(n=(t=ku(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ln.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ln.prototype.toArray=function(){return this.take(4294967295)},mt(Ln.prototype,function(c,e){var f=/^(?:filter|find|map|reject)|While$/.test(e),p=/^(?:head|last)$/.test(e),d=An[p?"take"+("last"==e?"Right":""):e],h=p||/^find/.test(e);d&&(An.prototype[e]=function(){var e=this.__wrapped__,t=p?[1]:arguments,n=e instanceof Ln,i=t[0],r=n||so(e),o=function s(e){return e=d.apply(An,a([e],t)),p&&u?e[0]:e};r&&f&&"function"==typeof i&&1!=i.length&&(n=r=!1);var u=this.__chain__,l=!!this.__actions__.length;i=h&&!u,n=n&&!l;return!h&&r?(e=n?e:new Ln(this),(e=c.apply(e,t)).__actions__.push({func:Qe,args:[o],thisArg:sa}),new On(e,u)):i&&n?c.apply(this,t):(e=this.thru(o),i?p?e.value()[0]:e.value():e)})}),r("pop push shift sort splice unshift".split(" "),function(e){var n=Z[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);An.prototype[e]=function(){var t=arguments;if(!r||this.__chain__)return this[i](function(e){return n.apply(so(e)?e:[],t)});var e=this.value();return n.apply(so(e)?e:[],t)}}),mt(Ln.prototype,function(e,t){var n=An[t];if(n){var i=n.name+"";(Wn[i]||(Wn[i]=[])).push({name:t,func:n})}}),Wn[Jr(sa,2).name]=[{name:"wrapper",func:sa}],Ln.prototype.clone=function(){var e=new Ln(this.__wrapped__);return e.__actions__=Lr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Lr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Lr(this.__views__),e},Ln.prototype.reverse=function(){if(this.__filtered__){var e=new Ln(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ln.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,i=so(t),r=n<0,o=i?t.length:0;e=0;for(var a=o,s=this.__views__,u=-1,l=s.length;++u<l;){var c=s[u],f=c.size;switch(c.type){case"drop":e+=f;break;case"dropRight":a-=f;break;case"take":a=En(a,e+f);break;case"takeRight":e=Pn(e,a-f)}}if(a=(e={start:e,end:a}).start,e=(s=e.end)-a,a=r?s:a-1,u=(s=this.__iteratees__).length,l=0,c=En(e,this.__takeCount__),!i||!r&&o==e&&c==e)return wr(t,this.__actions__);i=[];e:for(;e--&&l<c;){for(r=-1,o=t[a+=n];++r<u;){f=(p=s[r]).type;var p=(0,p.iteratee)(o);if(2==f)o=p;else if(!p){if(1==f)continue e;break e}}i[l++]=o}return i},An.prototype.at=zi,An.prototype.chain=function(){return Ye(this)},An.prototype.commit=function(){return new On(this.value(),this.__chain__)},An.prototype.next=function(){this.__values__===sa&&(this.__values__=mu(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?sa:this.__values__[this.__index__++]}},An.prototype.plant=function(e){for(var t,n=this;n instanceof kn;){var i=Fe(n);i.__index__=0,i.__values__=sa,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},An.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Ln?(this.__actions__.length&&(e=new Ln(this)),(e=e.reverse()).__actions__.push({func:Qe,args:[Ge],thisArg:sa}),new On(e,this.__chain__)):this.thru(Ge)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,cn&&(An.prototype[cn]=function Xe(){return this}),An}();"object"==_typeof(Q(2))&&Q(2)?(Ja._=cs,void 0===(Y=function(){return cs}.call($,Q,$,X))||(X.exports=Y)):G?((G.exports=cs)._=cs,F._=cs):Ja._=cs}).call(this)}).call(this,Q(4),Q(5)(e))},function(t,e){(function(e){t.exports=e}).call(this,{})},function(e,t,n){e.exports=n(8)},function(bQ,cQ){var dQ;dQ=function(){return this}();try{dQ=dQ||Function("return this")()||eval("this")}catch(e){"object"==typeof window&&(dQ=window)}bQ.exports=dQ},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"computeCirclularFlight",function(){return r}),n.d(i,"computeCirclularFlightPositions",function(){return o}),n.d(i,"computeCirclularAugle",function(){return c}),n.d(i,"computeCircle",function(){return a});var r=function computeCirclularFlight(e,t,n,i){for(var r=new Cesium.SampledPositionProperty,o=360*Cesium.Math.nextRandomNumber(),a=o+360,s=10*(2*Cesium.Math.nextRandomNumber()-1)+45,u=o;u<a;u+=s){var l=Cesium.Math.toRadians(u),c=u-o,f=Cesium.JulianDate.addSeconds(start,c,new Cesium.JulianDate),p=Cesium.Cartesian3.fromDegrees(e+1.5*i*Math.cos(l),t+i*Math.sin(l),n);r.addSample(f,p)}return r},o=function computeCirclularFlightPositions(e,t,n,i){for(var r=[],o=360*Cesium.Math.nextRandomNumber(),a=o+360,s=10*(2*Cesium.Math.nextRandomNumber()-1)+45,u=o;u<a;u+=s){var l=Cesium.Math.toRadians(u),c=Cesium.Cartesian3.fromDegrees(e+1.5*i*Math.cos(l),t+i*Math.sin(l),n);r.push(c)}return r},c=function computeCirclularAugle(e){for(var t=360*Cesium.Math.nextRandomNumber(),n=t+360,i=[],r=t;r<n;r+=e)i.push(r);return i},a=function computeCircle(e){for(var t=[],n=0;n<360;n++){var i=Cesium.Math.toRadians(n);t.push(new Cesium.Cartesian2(e*Math.cos(i),e*Math.sin(i)))}return t},l=function defined(e){return null!=e};function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=function(){function Cameras(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cameras)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Cameras,null,[{key:"getPositionAwayByCamara",value:function getPositionAwayByCamara(e,t,n){var i=Cesium.Cartesian3.distance(e.position,t,new Cesium.Cartesian3),r=Cesium.Cartesian3.subtract(e.position,t,new Cesium.Cartesian3),o=Cesium.Cartesian3.multiplyByScalar(r,n/i,new Cesium.Cartesian3);return Cesium.Cartesian3.add(t,o,new Cesium.Cartesian3)}},{key:"flyAroundPosition",value:function flyAroundPosition(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:20,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.1,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:-45,a=c(r),s=0,u=1e3*i/a.length,l=setInterval(function(){e.lookAt(t,new Cesium.HeadingPitchRange(Cesium.Math.toRadians(a[s]),Cesium.Math.toRadians(o),n)),e.lookAtTransform(Cesium.Matrix4.IDENTITY),s=++s%a.length},u);return function(){clearInterval(l),e.lookAtTransform(Cesium.Matrix4.IDENTITY)}}},{key:"runFunAtDragAndZoomOnce",value:function runFunAtDragAndZoomOnce(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=1<arguments.length?arguments[1]:void 0,n=new Cesium.ScreenSpaceEventHandler(t.canvas),i=null;n.setInputAction(function(e){Xe.log("down"),i&&!i.isDestroyed()&&i.destroy(),(i=new Cesium.ScreenSpaceEventHandler(t.canvas)).setInputAction(function(e){Xe.log("move"),r()},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},Cesium.ScreenSpaceEventType.LEFT_DOWN),n.setInputAction(function(e){Xe.log("up"),i&&!i.isDestroyed()&&i.destroy()},Cesium.ScreenSpaceEventType.LEFT_UP),n.setInputAction(function(e){r()},Cesium.ScreenSpaceEventType.WHEEL);var r=function runFun(){n&&!n.isDestroyed()&&n.destroy(),e()}}},{key:"runFunAtLeftDownAndZoomOnce",value:function runFunAtLeftDownAndZoomOnce(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=1<arguments.length?arguments[1]:void 0,n=new Cesium.ScreenSpaceEventHandler(t.canvas);n.setInputAction(function(e){Xe.log("down"),i()},Cesium.ScreenSpaceEventType.LEFT_DOWN),n.setInputAction(function(e){i()},Cesium.ScreenSpaceEventType.WHEEL);var i=function runFun(){n&&!n.isDestroyed()&&n.destroy(),e()}}},{key:"flyAt",value:function flyAt(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=n.heading,r=void 0===i?0:i,o=n.pitch,a=void 0===o?0:o,s=n.range,u=void 0===s?50:s,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){};a=Cesium.Math.toRadians(a),r=Cesium.Math.toRadians(r);var f=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromHeadingPitchRoll(new Cesium.HeadingPitchRoll(r+Math.PI/2,-a,0))),p=Cesium.Matrix4.multiplyByPoint(f,new Cesium.Cartesian3(u,0,0),new Cesium.Cartesian3),d=Cesium.Transforms.eastNorthUpToFixedFrame(t,Cesium.Ellipsoid.WGS84,new Cesium.Matrix4),h=Cesium.Matrix4.multiplyByPoint(d,p,new Cesium.Cartesian3);e.flyTo({destination:h,orientation:{heading:r,pitch:a,roll:0},complete:l,cancel:c})}},{key:"saveCameraStatus",value:function saveCameraStatus(e){var t={position:e.position,heading:e.heading,pitch:e.pitch,roll:e.roll},n=[t.position.x.toFixed(2),t.position.y.toFixed(2),t.position.z.toFixed(2),t.heading.toFixed(2),t.pitch.toFixed(2),t.roll.toFixed(2)];return encodeURIComponent(n.join(","))}},{key:"loadCameraStatus",value:function loadCameraStatus(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};try{var r=decodeURIComponent(t).split(",");if(!(l(r)&&6<=r.length))throw"not define position| heading | pitch | roll";var o={destination:{x:parseFloat(r[0]),y:parseFloat(r[1]),z:parseFloat(r[2])},orientation:{heading:parseFloat(r[3]),pitch:parseFloat(r[4]),roll:parseFloat(r[5])}};n?e.flyTo(o):e.setView(o)}catch(e){console.error(e),"function"==typeof i&&i(e)}}}]),Cameras}(),s=n(1);function InnerUtils_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function InnerUtils_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function InnerUtils_createClass(e,t,n){return t&&InnerUtils_defineProperties(e.prototype,t),n&&InnerUtils_defineProperties(e,n),e}var u=function customPickStrategy(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i={};if(t.pickPositionSupported)i=t.pickPosition(e);else{var r=t.camera.pickEllipsoid(e);if(!l(r))return;var o=Cesium.Cartographic.fromCartesian(r);i=Cesium.Cartesian3.fromRadians(o.longitude,o.latitude,0)}return 0!==n&&(i=f.getPositionAwayByCamara(t.camera,i,n)),i},p=function(){function Pickthrottle(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;InnerUtils_classCallCheck(this,Pickthrottle),this.lastPick=null,this.lastTime=new Date,this.scene=e,this.pickTimeout=t}return InnerUtils_createClass(Pickthrottle,[{key:"pick",value:function pick(e,t){var n=new Date;if((null===this.lastPick||n.getTime()-this.lastTime.getTime()>this.pickTimeout)&&(this.lastTime=n,this.lastPick=this.scene.pick(e,t,t)),l(this.lastPick))return s.merge({},this.lastPick)}}]),Pickthrottle}(),d=function(){function DrillPickThrottle(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;InnerUtils_classCallCheck(this,DrillPickThrottle),this.lastPicks=null,this.lastTime=new Date,this.scene=e,this.pickTimeout=t}return InnerUtils_createClass(DrillPickThrottle,[{key:"pick",value:function pick(e,t){var n=new Date;if((null===this.lastPicks||n.getTime()-this.lastTime.getTime()>this.pickTimeout)&&(this.lastTime=n,this.lastPicks=Object.values(this.scene.drillPick(e,t,t))),l(this.lastPicks))return s.merge([],this.lastPicks)}}]),DrillPickThrottle}(),h=function Uuid(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===e?t:7&t|8).toString(16)})};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y=function typeContaines(e,t){if("object"===_typeof(e)&&l(e.constructor)){var n=e.constructor.toString().match(/^function\s*([^\s(]+)/);if(l(n)&&l(n[1]))return-1!==n[1].indexOf(t)}return!1};function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function EventSystemV2_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EventSystemV2_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EventSystemV2_createClass(e,t,n){return t&&EventSystemV2_defineProperties(e.prototype,t),n&&EventSystemV2_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=Object.freeze({LEFT_CLICK:"leftClick",LEFT_DOUBLE_CLICK:"leftDoubleClick",MOUSE_MOVE:"mouseMove",MOUSE_MOVE_OUT:"mouseMoveOut",MOUSE_MOVE_IN:"mouseMoveIn",LEFT_UP:"leftUp",LEFT_DOWN:"leftDown",DRAW_START:"drawStart",DRAW:"draw",DRAW_END:"drawEnd",DROP:"drop",DRAG_OVER:"dragOver"}),v=function(){function EventSystemFactory(){EventSystemV2_classCallCheck(this,EventSystemFactory)}return EventSystemV2_createClass(EventSystemFactory,null,[{key:"createEventSystem",value:function createEventSystem(e){if(l(e)){if(l(e._eventSystemUUID)&&l(this.eventSystemMap[e._eventSystemUUID]))return this.eventSystemMap[e._eventSystemUUID];var t=new m(e),n=h();return e._eventSystemUUID=n,this.eventSystemMap[n]=t}}},{key:"closeEventSystem",value:function closeEventSystem(e){l(e._eventSystemUUID)&&l(this.eventSystemMap[e._eventSystemUUID])&&(this.eventSystemMap[e._eventSystemUUID].destroy(),delete this.eventSystemMap[e._eventSystemUUID])}}]),EventSystemFactory}();_defineProperty(v,"eventSystemMap",{});var m=function(){function EventSystemV2(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=(t.accuracy,t.doubleClickTime),i=void 0===n?500:n;EventSystemV2_classCallCheck(this,EventSystemV2),this._init=!1,this._doubleClickTime=i,this._enable=!0,this._enableRotation=!0,this.viewer=e,this._pickthrottle=new p(this.viewer.scene),this._drillPickThrottle=new d(this.viewer.scene),this._dataTransfer=new b,this._accuracy=new C,this._eventBind()}return EventSystemV2_createClass(EventSystemV2,[{key:"enableEvent",value:function enableEvent(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._enable=e}},{key:"_eventBind",value:function _eventBind(){var r=this;if(!this._run&&!this._init){this._run=!0,this._handler=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);var n=null,o=!1;this._handler.setInputAction(function(e){if(r._enable){var t=_objectSpread({},e.position);clearTimeout(n),n=setTimeout(function(){r.callPrimitiveCallback(g.LEFT_CLICK,t)},r._doubleClickTime)}},Cesium.ScreenSpaceEventType.LEFT_CLICK),this._handler.setInputAction(function(e){if(r._enable){var t=_objectSpread({},e.position);clearTimeout(n),r.callPrimitiveCallback(g.LEFT_DOUBLE_CLICK,t)}},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this._handler.setInputAction(function(e){var t,n;if(r._enable&&!o){var i=_objectSpread({},e.endPosition);r._lastPickObject=r._currentPickObject,r._currentPickObject=EventSystemV2.getPickObject(r._pickthrottle.pick(i)),(null===(t=r._lastPickObject)||void 0===t?void 0:t.id)!==(null===(n=r._currentPickObject)||void 0===n?void 0:n.id)&&(EventSystemV2.callPrimitiveCallbackCurrent(r._currentPickObject,g.MOUSE_MOVE_IN,i),EventSystemV2.callPrimitiveCallbackCurrent(r._lastPickObject,g.MOUSE_MOVE_OUT,i),r._lastPickObject=r._currentPickObject),EventSystemV2.callPrimitiveCallbackCurrent(r._currentPickObject,g.MOUSE_MOVE,i)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this._handler.setInputAction(function(e){if(r._enable&&o){var t=_objectSpread({},e.position);o=!1;try{var n,i;!(null===(n=r._dragHandler)||void 0===n?void 0:n.isDestroyed())&&(null===(i=r._dragHandler)||void 0===i||i.destroy()),r.callPrimitiveCallbackDrag(g.DROP,t),EventSystemV2.callPrimitiveCallbackCurrent(r._currentDragObject,g.DRAW_END,t,[r._dataTransfer]),r._dataTransfer._clear(),EventSystemV2.callPrimitiveCallbackCurrent(r._currentDragObject,g.LEFT_UP,t)}catch(e){console.error(e)}finally{A.enableRotation(r.viewer,!0)}}},Cesium.ScreenSpaceEventType.LEFT_UP),this._handler.setInputAction(function(e){if(r._enable){var t=_objectSpread({},e.position);if(r._currentDragObject=r.callPrimitiveCallback(g.LEFT_DOWN,t),r.hasEventOr(r._currentDragObject,[g.DRAW,g.DRAW_START,g.DRAW_END])){A.enableRotation(r.viewer,!1);var n=o=!0;r._dragHandler=new Cesium.ScreenSpaceEventHandler(r.viewer.scene.canvas),r._dragHandler.setInputAction(function(e){if(r._enable){var t=_objectSpread({},e.endPosition);n?(n=!1,EventSystemV2.callPrimitiveCallbackCurrent(r._currentDragObject,g.DRAW_START,t,[r._dataTransfer])):(EventSystemV2.callPrimitiveCallbackCurrent(r._currentDragObject,g.DRAW,t,[r._dataTransfer]),r.callPrimitiveCallbackDrag(g.DRAG_OVER,t))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}}},Cesium.ScreenSpaceEventType.LEFT_DOWN),this._init=!0,this._run=!1}}},{key:"callPrimitiveCallback",value:function callPrimitiveCallback(e,t){var n=this.accuracy.getAccuracy(e),i=n.width,r=n.height,o=this._pickthrottle.pick(t,i,r);return EventSystemV2.callPrimitiveCallbackCurrent(EventSystemV2.getPickObject(o),e,t)}},{key:"callPrimitiveCallbackDrag",value:function callPrimitiveCallbackDrag(e,t){var n=this.accuracy.getAccuracy(e),i=n.width,r=n.height,o=this._pickthrottle.pick(t,i,r);return EventSystemV2.callPrimitiveCallbackCurrent(EventSystemV2.getPickObject(o),e,t,[this._dataTransfer])}},{key:"destroy",value:function destroy(){var e,t,n,i;!(null===(e=this._dragHandler)||void 0===e?void 0:e.isDestroyed())&&(null===(t=this._dragHandler)||void 0===t||t.destroy()),!(null===(n=this._handler)||void 0===n?void 0:n.isDestroyed())&&(null===(i=this._handler)||void 0===i||i.destroy())}},{key:"hasEventAnd",value:function hasEventAnd(t,e){if(Array.isArray(e)&&0<e.length){var n=!0;return e.forEach(function(e){l(null==t?void 0:t[e])||(n=!1)}),n}return!1}},{key:"hasEventOr",value:function hasEventOr(t,e){if(Array.isArray(e)&&0<e.length){var n=!1;return e.forEach(function(e){l(null==t?void 0:t[e])&&(n=!0)}),n}return!1}},{key:"setListener",value:function setListener(e,t,n){l(e)&&l(t)&&"function"==typeof n&&(e[t]=n)}},{key:"removeListener",value:function removeListener(e,t){delete e[t]}},{key:"setListenerOnce",value:function setListenerOnce(o,a,s){var u=this;l(o)&&l(a)&&"function"==typeof s&&(o[a]=function(e,t){for(var n=arguments.length,i=new Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];s.apply(u,[e,t].concat(i)),u.removeListener(o,a)})}},{key:"onLeftClick",value:function onLeftClick(e,t){this.setListener(e,g.LEFT_CLICK,t)}},{key:"onLeftDoubleClick",value:function onLeftDoubleClick(e,t){this.setListener(e,g.LEFT_DOUBLE_CLICK,t)}},{key:"onMouseMove",value:function onMouseMove(e,t){this.setListener(e,g.MOUSE_MOVE,t)}},{key:"onMouseMoveOut",value:function onMouseMoveOut(e,t){this.setListener(e,g.MOUSE_MOVE_OUT,t)}},{key:"onMouseMoveIn",value:function onMouseMoveIn(e,t){this.setListener(e,g.MOUSE_MOVE_IN,t)}},{key:"onLeftUp",value:function onLeftUp(e,t){this.setListener(e,g.LEFT_UP,t)}},{key:"onLeftDown",value:function onLeftDown(e,t){this.setListener(e,g.LEFT_DOWN,t)}},{key:"onDragStart",value:function onDragStart(e,t){this.setListener(e,g.DRAW_START,t)}},{key:"onDrag",value:function onDrag(e,t){this.setListener(e,g.DRAW,t)}},{key:"onDragEnd",value:function onDragEnd(e,t){this.setListener(e,g.DRAW_END,t)}},{key:"onDragOver",value:function onDragOver(e,t){this.setListener(e,g.DRAG_OVER,t)}},{key:"onDrop",value:function onDrop(e,t){this.setListener(e,g.DROP,t)}},{key:"accuracy",get:function get(){return this._accuracy}}],[{key:"getPickObject",value:function getPickObject(e){return y(null==e?void 0:e.id,"Entity")?e.id:(null==e?void 0:e.primitive)?e.primitive:void 0}},{key:"callPrimitiveCallbackCurrent",value:function callPrimitiveCallbackCurrent(e,t,n){var i,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return null==e||null===(i=e[t])||void 0===i||i.apply(this,[n,e].concat(_toConsumableArray(r))),e}}]),EventSystemV2}(),b=function(){function DataTransfer(){EventSystemV2_classCallCheck(this,DataTransfer),this.data={}}return EventSystemV2_createClass(DataTransfer,[{key:"setData",value:function setData(e,t){return this.data[e]=t,this}},{key:"getData",value:function getData(e){return this.data[e]}},{key:"_clear",value:function _clear(){this.data={}}}]),DataTransfer}(),C=function(){function Accuracy(){var t=this;EventSystemV2_classCallCheck(this,Accuracy),Object.values(g).forEach(function(e){t[e]={width:3,height:3}})}return EventSystemV2_createClass(Accuracy,[{key:"setAccuracy",value:function setAccuracy(e,t){var n=t.width,i=t.height;this[e]={width:n,height:i}}},{key:"getAccuracy",value:function getAccuracy(e){return this[e]}}]),Accuracy}();function Scenes_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var w=null,P=function(){function Scenes(){!function Scenes_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Scenes)}return function Scenes_createClass(e,t,n){return t&&Scenes_defineProperties(e.prototype,t),n&&Scenes_defineProperties(e,n),e}(Scenes,null,[{key:"pick",value:function pick(e,t,n,i){return w||(w=e.pick(t,n,i),setTimeout(function(){w=null},100),w)}},{key:"commonPick",value:function commonPick(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return u(e,t,n)}},{key:"commonPickV2",value:function commonPickV2(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=v.createEventSystem(t),r=t.scene,o={};if(Cesium.defined(i._pickthrottle.pick(e))&&r.pickPositionSupported)o=r.pickPosition(e);else{var a=r.camera.pickEllipsoid(e);if(!l(a))return;var s=Cesium.Cartographic.fromCartesian(a);o=Cesium.Cartesian3.fromRadians(s.longitude,s.latitude,0)}return 0!==n&&(o=f.getPositionAwayByCamara(r.camera,o,n)),o}},{key:"commonPickFilter",value:function commonPickFilter(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return!0},i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=v.createEventSystem(t),o=t.scene,a={};if(o.pickPositionSupported&&0<r._drillPickThrottle.pick(e).filter(n).length)o.render(),a=o.pickPosition(e);else{var s=o.camera.pickEllipsoid(e);if(!l(s))return;var u=Cesium.Cartographic.fromCartesian(s);a=Cesium.Cartesian3.fromRadians(u.longitude,u.latitude,0)}return 0!==i&&(a=f.getPositionAwayByCamara(o.camera,a,i)),a}}]),Scenes}();n(6);function Cartesian3s_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=function(){function Cartesian3s(){!function Cartesian3s_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cartesian3s)}return function Cartesian3s_createClass(e,t,n){return t&&Cartesian3s_defineProperties(e.prototype,t),n&&Cartesian3s_defineProperties(e,n),e}(Cartesian3s,null,[{key:"toRadians",value:function toRadians(e){return Cesium.Cartographic.fromCartesian(e)}},{key:"toDegrees",value:function toDegrees(e){var t=Cartesian3s.toRadians(e);return{height:t.height,latitude:Cesium.Math.toDegrees(t.latitude),longitude:Cesium.Math.toDegrees(t.longitude)}}},{key:"formatHeightPlus",value:function formatHeightPlus(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5,n=Cartesian3s.toRadians(e);return Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height+t)}},{key:"formatHeightZero",value:function formatHeightZero(e){var t=Cartesian3s.toRadians(e);return Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,0)}},{key:"formatHeight",value:function formatHeight(e,t){var n=Cartesian3s.toRadians(e);return Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,t)}},{key:"getCenter",value:function getCenter(e){var t=new Cesium.Cartesian3;return e.forEach(function(e){Cesium.Cartesian3.add(t,e,t)}),Cesium.Cartesian3.divideByScalar(t,e.length,t)}},{key:"offsetPositionSmall",value:function offsetPositionSmall(e){if(l(e)){var t=null==e?void 0:e.clone();return t.x=t.x+.1,t.y=t.y+.1,t.z=t.z+.1,t}}}]),Cartesian3s}(),k=function enhanceWithListeners(e){e._listeners={},e.addListener=function(e,t){return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this._listeners[e].length},e.executeListeners=function(e,t){if(this._listeners[e.name]&&0<this._listeners[e.name].length)for(var n=0;n<this._listeners[e.name].length;n++)this._listeners[e.name][n](e);else t&&t(e)}};function Settings_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var A=function(){function Settings(){!function Settings_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Settings)}return function Settings_createClass(e,t,n){return t&&Settings_defineProperties(e.prototype,t),n&&Settings_defineProperties(e,n),e}(Settings,null,[{key:"cancelDefaultDbLeftClick",value:function cancelDefaultDbLeftClick(e){e.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}},{key:"enableRotation",value:function enableRotation(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.scene.screenSpaceCameraController.enableRotate=t}},{key:"setBaseMap",value:function setBaseMap(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}",n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=new Cesium.UrlTemplateImageryProvider({url:t,subdomains:["mt0","mt1","mt2","mt3"]}),r=new Cesium.ImageryLayer(i,Cesium.defaultValue(!0,{}));n&&e.scene.imageryLayers.removeAll(!1),e.scene.imageryLayers.add(r)}},{key:"cancelErrorPanel",value:function cancelErrorPanel(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(e,t,n,i){},r=Cesium.CesiumWidget.prototype.showErrorPanel;Cesium.CesiumWidget.prototype.showErrorPanel=function(e,t,n){i(e,t,n,r)}}}]),Settings}();function EventSystem_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EventSystem_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EventSystem_createClass(e,t,n){return t&&EventSystem_defineProperties(e.prototype,t),n&&EventSystem_defineProperties(e,n),e}var O=!0,S={lastPick:null,lastTime:new Date,pick:function pick(e,t,n){var i=new Date;return(null===this.lastPick||100<i.getTime()-this.lastTime.getTime())&&(this.lastTime=i,this.lastPick=e.pick(t,n,n)),s.merge({},this.lastPick)}},x=function(){function EventSystem(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;EventSystem_classCallCheck(this,EventSystem),this._init=!1,this._accuracy=e,this._enableRotation=!0,this._frameRate=60,this.updateMoveTime(),this._cunsumeMoveOutObject=[],this._enable=!0,window.logs=[]}return EventSystem_createClass(EventSystem,[{key:"setView",value:function setView(e){return this._init||(this.viewer=e,l(e)&&(this._init=!0,this.eventBind())),this}},{key:"setFrameRate",value:function setFrameRate(e){this._frameRate=e,this.updateMoveTime()}},{key:"updateMoveTime",value:function updateMoveTime(){this._moveTime=parseInt(1e3/this._frameRate)}},{key:"setAccuracy",value:function setAccuracy(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return this._accuracy=e,this}},{key:"eventBind",value:function eventBind(){var i=this,t=function mouseMove(e){var t={x:e.endPosition.x,y:e.endPosition.y};if(r)a?(a=!1,i.callPrimitiveCallbackCurrent(o,D.DRAW_START,t),o&&!i._enableRotation&&A.enableRotation(i.viewer,!1)):i.callPrimitiveCallbackCurrent(o,D.DRAW,t);else{var n=i.callPrimitiveCallback(D.MOUSE_MOVE,t);Xe.log([n,s,t]),n!==s&&(s&&i.callPrimitiveCallbackCurrent(s,D.MOUSE_MOVE_OUT,t),s=n)}},r=!1,o=null,a=!0,s=null,e=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas),n=null;e.setInputAction(function(e){i._enable&&i.callPrimitiveCallback(D.LEFT_CLICK,e.position)},Cesium.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction(function(e){i._enable&&i.callPrimitiveCallback(D.LEFT_DOUBLE_CLICK,e.position)},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),e.setInputAction(function(e){i._enable&&(t(e),l(n)&&clearTimeout(n),n=setTimeout(function(){Xe.log("on mouse stop!"),t(e)},300))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(e){i._enable&&(r&&(r=!1,o&&i.callPrimitiveCallbackCurrent(o,D.DRAW_END,e.position)),i.callPrimitiveCallback(D.LEFT_UP,e.position),A.enableRotation(i.viewer,!0),a=!(o=null))},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(e){i._enable&&(r=!0,o=i.callPrimitiveCallback(D.LEFT_DOWN,e.position))},Cesium.ScreenSpaceEventType.LEFT_DOWN)}},{key:"callPrimitiveCallback",value:function callPrimitiveCallback(e,t){var n=S.pick(this.viewer.scene,t,this._accuracy,this._accuracy);return n&&y(n.id,"Entity")?this.callPrimitiveCallbackCurrent(n.id,e,t):n&&n.primitive?this.callPrimitiveCallbackCurrent(n.primitive,e,t):void 0}},{key:"callPrimitiveCallbackCurrent",value:function callPrimitiveCallbackCurrent(e,t,n){return e&&e[t]&&e[t](n,e),Xe.log(t),e}},{key:"consumeMoveOut",value:function consumeMoveOut(){var t=this;if(O){O=!1;var e=this._cunsumeMoveOutObject.slice(0);this._cunsumeMoveOutObject.length=0,e.forEach(function(e){e.obj&&t.callPrimitiveCallbackCurrent(e.obj,D.MOUSE_MOVE_OUT,e.position)}),O=!0}}},{key:"setListener",value:function setListener(e,t,n){l(e)&&l(t)&&"function"==typeof n&&(e[t]=n)}},{key:"removeListener",value:function removeListener(e,t){delete e[t]}},{key:"enableDrawRotation",value:function enableDrawRotation(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._enableRotation=e}},{key:"enableEvent",value:function enableEvent(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._enable=e}},{key:"onLeftClick",value:function onLeftClick(e,t){this.setListener(e,D.LEFT_CLICK,t)}},{key:"onLeftDoubleClick",value:function onLeftDoubleClick(e,t){this.setListener(e,D.LEFT_DOUBLE_CLICK,t)}},{key:"onMouseMove",value:function onMouseMove(e,t){this.setListener(e,D.MOUSE_MOVE,t)}},{key:"onMouseMoveOut",value:function onMouseMoveOut(e,t){this.setListener(e,D.MOUSE_MOVE_OUT,t)}},{key:"onLeftUp",value:function onLeftUp(e,t){this.setListener(e,D.LEFT_UP,t)}},{key:"onLeftDown",value:function onLeftDown(e,t){this.setListener(e,D.LEFT_DOWN,t)}},{key:"onDragStart",value:function onDragStart(e,t){this.setListener(e,D.DRAW_START,t)}},{key:"onDrag",value:function onDrag(e,t){this.setListener(e,D.DRAW,t)}},{key:"onDragEnd",value:function onDragEnd(e,t){this.setListener(e,D.DRAW_END,t)}}]),EventSystem}(),D=Object.freeze({LEFT_CLICK:"leftClick",LEFT_DOUBLE_CLICK:"leftDoubleClick",MOUSE_MOVE:"mouseMove",MOUSE_MOVE_OUT:"mouseMoveOut",MOUSE_MOVE_IN:"mouseMoveIn",LEFT_UP:"leftUp",LEFT_DOWN:"leftDown",DRAW_START:"drawStart",DRAW:"draw",DRAW_END:"drawEnd"}),H=new x,M=function(){function EventSystemInstance(){EventSystem_classCallCheck(this,EventSystemInstance)}return EventSystem_createClass(EventSystemInstance,null,[{key:"setViewer",value:function setViewer(e){H._init||H.setView(e)}},{key:"getInstance",value:function getInstance(e){return l(e)&&this.setViewer(e),H}}]),EventSystemInstance}();function EventUtils_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function EventUtils(){!function EventUtils_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventUtils)}return function EventUtils_createClass(e,t,n){return t&&EventUtils_defineProperties(e.prototype,t),n&&EventUtils_defineProperties(e,n),e}(EventUtils,null,[{key:"addOnceClick",value:function addOnceClick(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},i=new Cesium.ScreenSpaceEventHandler(e.canvas);return i.setInputAction(function(e){i&&!i.isDestroyed()&&i.destroy(),t(e),n()},Cesium.ScreenSpaceEventType.LEFT_CLICK),function(){i&&!i.isDestroyed()&&i.destroy(),n()}}}]),EventUtils}();function Debugs_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=function(){function Debugs(){!function Debugs_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Debugs)}return function Debugs_createClass(e,t,n){return t&&Debugs_defineProperties(e.prototype,t),n&&Debugs_defineProperties(e,n),e}(Debugs,null,[{key:"positionPick",value:function positionPick(e){var t=new Cesium.ScreenSpaceEventHandler(e.canvas),r=e.scene;return t.setInputAction(function(e){var t=e.position;if(Cesium.defined(r.pick(t))&&r.pickPositionSupported){var n=r.pickPosition(t);console.log(["pick at model",Cesium.Cartographic.fromCartesian(n)])}var i=Cesium.Cartographic.fromCartesian(r.camera.pickEllipsoid(t));n=Cesium.Cartesian3.fromRadians(i.longitude,i.latitude,0),console.log(["pick at ellipsoid",n])},Cesium.ScreenSpaceEventType.LEFT_CLICK),{destroy:function destroy(){t.destroy()}}}}]),Debugs}();function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Math_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Math_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Math_createClass(e,t,n){return t&&Math_defineProperties(e.prototype,t),n&&Math_defineProperties(e,n),e}var L=function(){function simpleCos(e,t,n){return Math_classCallCheck(this,simpleCos),this.A=e,this.k=t,this.b=n,this}return Math_createClass(simpleCos,[{key:"calc",value:function calc(e){return Math.cos(this.k*e+this.b)*this.A}}]),simpleCos}(),B=function(){function SimpleCosBuilder(){Math_classCallCheck(this,SimpleCosBuilder)}return Math_createClass(SimpleCosBuilder,[{key:"setPeriod",value:function setPeriod(e){return this.k=2*Math.PI/e,this}},{key:"setAmplitude",value:function setAmplitude(e){return this.A=e,this}},{key:"setPhase",value:function setPhase(e){return this.b=e,this}},{key:"build",value:function build(){return new L(this.A,this.k,this.b)}}]),SimpleCosBuilder}();function BaseEntity_typeof(e){return(BaseEntity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BaseEntity_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!==BaseEntity_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function BaseEntity(e){return function BaseEntity_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseEntity),_possibleConstructorReturn(this,_getPrototypeOf(BaseEntity).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(BaseEntity,Cesium.Entity),function BaseEntity_createClass(e,t,n){return t&&BaseEntity_defineProperties(e.prototype,t),n&&BaseEntity_defineProperties(e,n),e}(BaseEntity,[{key:"setViewer",value:function setViewer(e){e.entities.add(this),this._viewer=e}},{key:"removeViewer",value:function removeViewer(e){e.entities.remove(this),delete this._viewer}},{key:"display",value:function display(){this.show=!0}},{key:"hide",value:function hide(){this.show=!1}},{key:"setSelected",value:function setSelected(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.selected=e}},{key:"cancelSelected",value:function cancelSelected(){this.selected=!1}},{key:"onSelect",value:function onSelect(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this._selectedCallback=e}},{key:"onRelease",value:function onRelease(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this._releaseCallback=e}},{key:"initEvent",value:function initEvent(){var t=this;M.getInstance().onLeftClick(this,function(e){"function"==typeof t.onClickCallback&&t.onClickCallback(e)})}},{key:"onClick",value:function onClick(e){this.onClickCallback=e}},{key:"selected",set:function set(e){this._selected=e,this.selected?"function"==typeof this._selectedCallback()&&this._selectedCallback():"function"==typeof this._releaseCallback&&this._releaseCallback()},get:function get(){return this._selected}}]),BaseEntity}();function DazzlingLabelEntity_typeof(e){return(DazzlingLabelEntity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DazzlingLabelEntity_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function DazzlingLabelEntity_getPrototypeOf(e){return(DazzlingLabelEntity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DazzlingLabelEntity_setPrototypeOf(e,t){return(DazzlingLabelEntity_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function DazzlingLabelEntity_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var R=function(e){function DazzlingLabelEntity(n){var i,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.modelColor,r=void 0===t?Cesium.Color.DARKVIOLET:t,o=e.line,a=(o=void 0===o?{}:o).width,s=void 0===a?5:a,u=e.ring,l=(u=void 0===u?{}:u).timePeriod,c=void 0===l?10:l,f=u.relativeSize,p=void 0===f?1:f;!function DazzlingLabelEntity_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DazzlingLabelEntity),i=function DazzlingLabelEntity_possibleConstructorReturn(e,t){return!t||"object"!==DazzlingLabelEntity_typeof(t)&&"function"!=typeof t?DazzlingLabelEntity_assertThisInitialized(e):t}(this,DazzlingLabelEntity_getPrototypeOf(DazzlingLabelEntity).call(this,n));var d=(new B).setPeriod(c/2).setAmplitude(-.5).setPhase(0).build(),h=Cesium.JulianDate.now();return i.ringEntity=new Cesium.Entity({position:new Cesium.CallbackProperty(function(e,t){return E.formatHeight(n.position,(.5+d.calc(Cesium.JulianDate.secondsDifference(Cesium.JulianDate.now(),h)%(c/2)))*E.toRadians(n.position).height)},!1),model:{uri:Ze+"/resources/圆环.glb",scale:new Cesium.CallbackProperty(function(e,t){return Cesium.Cartesian3.distance(n.position,i.viewer.scene.camera.position)*p/340},!1),maximumScale:1,color:r,show:new Cesium.CallbackProperty(function(e,t){return i.selected},!1)},polyline:{positions:[E.formatHeightZero(n.position),n.position],width:s,material:r}}),i.ringEntity.parent=DazzlingLabelEntity_assertThisInitialized(DazzlingLabelEntity_assertThisInitialized(i)),i.initEvent(),i.selected=!1,i}return function DazzlingLabelEntity_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DazzlingLabelEntity_setPrototypeOf(e,t)}(DazzlingLabelEntity,I),function DazzlingLabelEntity_createClass(e,t,n){return t&&DazzlingLabelEntity_defineProperties(e.prototype,t),n&&DazzlingLabelEntity_defineProperties(e,n),e}(DazzlingLabelEntity,[{key:"setViewer",value:function setViewer(e){(this.viewer=e).entities.add(this),e.entities.add(this.ringEntity)}},{key:"removeViewer",value:function removeViewer(e){e.entities.add(this),e.entities.add(this.ringEntity)}}]),DazzlingLabelEntity}();function EditableEntity_typeof(e){return(EditableEntity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EditableEntity_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EditableEntity_possibleConstructorReturn(e,t){return!t||"object"!==EditableEntity_typeof(t)&&"function"!=typeof t?function EditableEntity_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function EditableEntity_getPrototypeOf(e){return(EditableEntity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EditableEntity_setPrototypeOf(e,t){return(EditableEntity_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function EditableEntity(e){var t;return function EditableEntity_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EditableEntity),(t=EditableEntity_possibleConstructorReturn(this,EditableEntity_getPrototypeOf(EditableEntity).call(this,e)))._relativeHeight=5,t}return function EditableEntity_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EditableEntity_setPrototypeOf(e,t)}(EditableEntity,I),function EditableEntity_createClass(e,t,n){return t&&EditableEntity_defineProperties(e.prototype,t),n&&EditableEntity_defineProperties(e,n),e}(EditableEntity,[{key:"setEditable",value:function setEditable(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=M.getInstance(this._viewer);if(!1===e)return n.removeListener(this,g.DRAW),n.removeListener(this,g.DRAW_START),n.removeListener(this,g.DRAW_END),void(this._editable=!1);this._editable||(this._editable=!0,n.onDragStart(this,function(e){n.enableDrawRotation(!1),t.show=!1,t.position=u(e,t._viewer.scene,t._relativeHeight)}),n.onDrag(this,function(e){t.position=u(e,t._viewer.scene,t._relativeHeight)}),n.onDragEnd(this,function(e){n.enableDrawRotation(!0),t.show=!0}))}},{key:"relativeHeight",set:function set(e){this._relativeHeight=e},get:function get(){return this._relativeHeight}}]),EditableEntity}();function BuildingHightlightBuilder_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=function(){function BuildingHightlightBuilder(){!function BuildingHightlightBuilder_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BuildingHightlightBuilder),this._height=100,this._bottomHeight=-50}return function BuildingHightlightBuilder_createClass(e,t,n){return t&&BuildingHightlightBuilder_defineProperties(e.prototype,t),n&&BuildingHightlightBuilder_defineProperties(e,n),e}(BuildingHightlightBuilder,[{key:"setPositions",value:function setPositions(e){return this._position=e,this}},{key:"setColor",value:function setColor(e){return this._color=e,this}},{key:"setHoverColor",value:function setHoverColor(e){return this._hoverColor=e,this}},{key:"setOnClick",value:function setOnClick(e){return this.clickCallback=e,this}},{key:"setViewer",value:function setViewer(e){return this._viewer=e,this}},{key:"setBottomHeight",value:function setBottomHeight(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-50;return this._bottomHeight=e,this}},{key:"setHeight",value:function setHeight(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return this._height=e,this}},{key:"_setDefault",value:function _setDefault(){l(this._hoverColor)||(this._hoverColor=Cesium.Color.YELLOW.withAlpha(.5)),this._hoverColorBytes=this._hoverColor.toBytes(),l(this._color)||(this._color=Cesium.Color.YELLOW.withAlpha(0)),this._colorBytes=this._color.toBytes()}},{key:"build",value:function build(){var n=this;this._setDefault();var e=M.getInstance(),i=new Cesium.ClassificationPrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:Cesium.PolygonGeometry.fromPositions({vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT,positions:this._position,extrudedHeight:this._height,height:this._bottomHeight,closeBottom:!0}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(this._color),show:new Cesium.ShowGeometryInstanceAttribute(!0)},id:"box-2"}),classificationType:Cesium.ClassificationType.BOTH});return e.onMouseMove(i,function(e,t){t&&(Xe.log(["move in",e,t]),i.getGeometryInstanceAttributes("box-2").color=n._hoverColorBytes)}),e.onMouseMoveOut(i,function(e,t){i.getGeometryInstanceAttributes("box-2").color=n._colorBytes}),this.clickCallback&&e.onLeftClick(i,function(e){"function"==typeof n.clickCallback&&n.clickCallback(e,i)}),i}}]),BuildingHightlightBuilder}(),V=function cesium1_50Patch(){if(Cesium.VERSION<"1.50")Xe.log("cesium版本小于1.50");else{try{Object.defineProperties(Cesium.Model.prototype,{_cachedGltf:{set:function set(e){this._vtxf_cachedGltf=e,this._vtxf_cachedGltf&&this._vtxf_cachedGltf._gltf&&function fixGltf(a){if(a.extensionsUsed){var e=a.extensionsUsed.indexOf("KHR_technique_webgl"),t=a.extensionsRequired.indexOf("KHR_technique_webgl");if(-1!==e){a.extensionsRequired.splice(t,1,"KHR_techniques_webgl"),a.extensionsUsed.splice(e,1,"KHR_techniques_webgl"),a.extensions=a.extensions||{},a.extensions.KHR_techniques_webgl={},a.extensions.KHR_techniques_webgl.programs=a.programs,a.extensions.KHR_techniques_webgl.shaders=a.shaders,a.extensions.KHR_techniques_webgl.techniques=a.techniques;var s=a.extensions.KHR_techniques_webgl.techniques;a.materials.forEach(function(e,t){a.materials[t].extensions.KHR_technique_webgl.values=a.materials[t].values,a.materials[t].extensions.KHR_techniques_webgl=a.materials[t].extensions.KHR_technique_webgl;var n=a.materials[t].extensions.KHR_techniques_webgl;for(var i in n.values){var r=s[n.technique].uniforms;for(var o in r)if(r[o]===i){n.values[o]=n.values[i],delete n.values[i];break}}}),s.forEach(function(e){for(var t in e.attributes){var n=e.attributes[t];e.attributes[t]=e.parameters[n]}for(var i in e.uniforms)n=e.uniforms[i],e.uniforms[i]=e.parameters[n]})}}}(this._vtxf_cachedGltf._gltf)},get:function get(){return this._vtxf_cachedGltf}}})}catch(e){window.debugMode&&console.error(e)}}},F=function cancelPrintTitleProviderErrorInCesium1_50(){Cesium.TileProviderError.handleError=function(e,t,n,i,r,o,a,s,u){var l=e;return defined(e)?(l.provider=t,l.message=i,l.x=r,l.y=o,l.level=a,l.retry=!1,l.error=u,++l.timesRetried):l=new TileProviderError(t,i,r,o,a,0,u),0<n.numberOfListeners&&n.raiseEvent(l),l.retry&&defined(s)&&s(),l}};function Compass_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Compass_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(){function CompassElementBuilder(){Compass_classCallCheck(this,CompassElementBuilder),this.time=100,this.position={x:0,y:0},this.mode3d=!0}return function Compass_createClass(e,t,n){return t&&Compass_defineProperties(e.prototype,t),n&&Compass_defineProperties(e,n),e}(CompassElementBuilder,[{key:"setImageUrl",value:function setImageUrl(e){return this.imageUrl=e,this}},{key:"setCamera",value:function setCamera(e){return this.camera=e,this}},{key:"setClassName",value:function setClassName(e){return this.className=e,this}},{key:"setPosition",value:function setPosition(e){var t=e.x,n=void 0===t?0:t,i=e.y,r=void 0===i?0:i;return this.position={x:n,y:r},this}},{key:"setUpdateTime",value:function setUpdateTime(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;return this.time=e,this}},{key:"is3DMode",value:function is3DMode(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return this.mode3d=e,this}},{key:"build",value:function build(){var e,i=this,r=new G(this.imageUrl);return r.element.style.left=this.position.x+"px",r.element.style.top=this.position.y+"px",r.element.className=this.className,e=this.mode3d?setInterval(function(){var e=Cesium.Math.toDegrees(i.camera.pitch+Math.PI/2),t=Cesium.Math.toDegrees(i.camera.roll),n=Cesium.Math.toDegrees(-i.camera.heading);45<e&&(e=45),45<t&&(t=45),r.element.style.webkitTransform="rotateX(".concat(e,"deg) rotateY(").concat(t,"deg) rotateZ(").concat(n,"deg)"),r.element.style.transform="rotateX(".concat(e,"deg) rotateY(").concat(t,"deg) rotateZ(").concat(n,"deg)"),r.element.style.mozTransform="rotateX(".concat(e,"deg) rotateY(").concat(t,"deg) rotateZ(").concat(n,"deg)")},this.time):setInterval(function(){var e=Cesium.Math.toDegrees(-i.camera.heading);r.element.style.webkitTransform="rotateZ(".concat(e,"deg)"),r.element.style.transform="rotateZ(".concat(e,"deg)"),r.element.style.mozTransform="rotateZ(".concat(e,"deg)")},this.time),{destory:function destory(){clearInterval(e);try{r.element.parentNode.removeChild(r.element)}catch(e){console.error(e)}},compass:r}}}]),CompassElementBuilder}(),G=function Compass(e){Compass_classCallCheck(this,Compass);var t=document.createElement("div");l(e)&&(t.style.background='url("'.concat(e,'") no-repeat center'),t.style.backgroundSize="100px 100px "),t.style.position="absolute",t.style.width="100px",t.style.height="100px",this.element=t};function DraggableCoordinate2_toConsumableArray(e){return function DraggableCoordinate2_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function DraggableCoordinate2_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function DraggableCoordinate2_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function DraggableCoordinate2_slicedToArray(e,t){return function DraggableCoordinate2_arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function DraggableCoordinate2_iterableToArrayLimit(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function DraggableCoordinate2_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function DraggableCoordinate2_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N=function(){function DraggableCoordinate(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.viewer,n=e.size,i=void 0===n?1e4:n,r=e.screenSize,o=void 0===r?200:r,a=e.defaultSize,s=void 0===a?1:a,u=e.position,l=void 0===u?new Cesium.Cartesian3:u;!function DraggableCoordinate2_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DraggableCoordinate),this.position=l,this.screenSize=o,this.size=s,this.viewer=t,this.bindEntities=[],this.onDragCallback=function(){},this.onDragEndCallback=function(){},this._createAxis(i)}return function DraggableCoordinate2_createClass(e,t,n){return t&&DraggableCoordinate2_defineProperties(e.prototype,t),n&&DraggableCoordinate2_defineProperties(e,n),e}(DraggableCoordinate,[{key:"_calcSize",value:function _calcSize(e,t){return e*t/142290}},{key:"_createAxis",value:function _createAxis(e){var i=this;this.onCameraChanged=function(){i.size=i._calcSize(i.screenSize,Cesium.Cartesian3.distance(i.position,i.viewer.camera.position))},this.axisz=this.viewer.entities.add({position:new Cesium.CallbackProperty(function(e,t){return i.position},!1),model:{uri:Ze+"/resources/axisz.glb",scale:new Cesium.CallbackProperty(function(e,t){return i.size},!1),color:Cesium.Color.GREEN,show:!0}}),this.axisx=this.viewer.entities.add({position:new Cesium.CallbackProperty(function(e,t){return i.position},!1),model:{uri:Ze+"/resources/axisx.glb",scale:new Cesium.CallbackProperty(function(e,t){return i.size},!1),color:Cesium.Color.RED,show:!0}}),this.axisy=this.viewer.entities.add({position:new Cesium.CallbackProperty(function(e,t){return i.position},!1),model:{uri:Ze+"/resources/axisy.glb",scale:new Cesium.CallbackProperty(function(e,t){return i.size},!1),color:Cesium.Color.YELLOW,show:!0}}),this.viewer.camera.changed.addEventListener(this.onCameraChanged),this.eventHandler=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),this.dragHandle=null,this.eventHandler.setInputAction(function(e){i.dragHandle&&!i.dragHandle.isDestroyed()&&i.dragHandle.destroy();var t=i.viewer.scene.pick(e.position,6,6);if(t&&t.id){if(t.id.id===i.axisz.id)i.pick=q.Z;else if(t.id.id===i.axisx.id)i.pick=q.X;else{if(t.id.id!==i.axisy.id)return;i.pick=q.Y}A.enableRotation(i.viewer,!1),i._onDrag=!0;var n=i.viewer.scene.cartesianToCanvasCoordinates(i.position);i.delta={x:n.x-e.position.x,y:n.y-e.position.y},i.oDetal={x:n.x-e.position.x,y:n.y-e.position.y},i.oPosition=i.position.clone(),i.oDistance=Cesium.Cartesian3.distance(i.position,i.viewer.camera.position),i.dragHandle=new Cesium.ScreenSpaceEventHandler(i.viewer.canvas),i.dragHandle.setInputAction(function(e){switch(i.pick){case q.X:i._onLatDrag({x:e.endPosition.x+i.delta.x,y:e.endPosition.y+i.delta.y});break;case q.Y:i._onLngDrag({x:e.endPosition.x+i.delta.x,y:e.endPosition.y+i.delta.y});break;case q.Z:i._onHeightDrag({x:e.endPosition.x+i.delta.x,y:e.endPosition.y+i.delta.y})}i.onDragCallback(i.position.clone())},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},Cesium.ScreenSpaceEventType.LEFT_DOWN),this.eventHandler.setInputAction(function(e){i._onDrag&&i.onDragEndCallback(i.position.clone()),i._DestroyDragHandle()},Cesium.ScreenSpaceEventType.LEFT_UP)}},{key:"_DestroyDragHandle",value:function _DestroyDragHandle(){this._onDrag&&(A.enableRotation(this.viewer,!0),this._onDrag=!1),this.dragHandle&&!this.dragHandle.isDestroyed()&&this.dragHandle.destroy()}},{key:"_getPositionParam",value:function _getPositionParam(e){var t=this.viewer.camera.getPickRay(e),n=Cesium.Ray.getPoint(t,1e3),i=t.origin,r=Cesium.Cartographic.fromCartesian(n);return{from:Cesium.Cartographic.fromCartesian(i),to:r,pre:Cesium.Cartographic.fromCartesian(this.position)}}},{key:"_onLatDrag",value:function _onLatDrag(e){var t=this._getPositionParam(e),n=DraggableCoordinate2_slicedToArray(DraggableCoordinate._getNewPoint({from:t.from,to:t.to,pre:t.pre,type:q.Y}),3),i=n[0],r=n[1],o=n[2];this.position=Cesium.Cartesian3.fromRadians(i,r,o)}},{key:"_onLngDrag",value:function _onLngDrag(e){var t=this._getPositionParam(e),n=DraggableCoordinate2_slicedToArray(DraggableCoordinate._getNewPoint({from:t.from,to:t.to,pre:t.pre,type:q.X}),3),i=n[0],r=n[1],o=n[2];this.position=Cesium.Cartesian3.fromRadians(i,r,o)}},{key:"_onHeightDrag",value:function _onHeightDrag(e){var t=this._getPositionParam(e),n=DraggableCoordinate2_slicedToArray(DraggableCoordinate._getNewPoint({from:t.from,to:t.to,pre:t.pre,type:q.Z}),3),i=n[0],r=n[1],o=n[2];this.position=Cesium.Cartesian3.fromRadians(i,r,o)}},{key:"getPositionFunction",value:function getPositionFunction(){var e=this;return function(){return e.position}}},{key:"onDrag",value:function onDrag(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this.onDragCallback=e}},{key:"onDragEnd",value:function onDragEnd(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this.onDragEndCallback=e}},{key:"destroy",value:function destroy(){this.viewer.camera.changed.removeEventListener(this.onCameraChanged),this.viewer.entities.remove(this.axisz),this.viewer.entities.remove(this.axisx),this.viewer.entities.remove(this.axisy),this.unbindAllEntities(),this._DestroyDragHandle()}},{key:"bindEntity",value:function bindEntity(e){var n=this;this.bindEntities.push(e),e.position=new Cesium.CallbackProperty(function(e,t){return n.position},!1)}},{key:"unbindEntity",value:function unbindEntity(t){this.bindEntities.find(function(e){return e.id===t.id})&&(t.position=this.position.clone(),this.bindEntities=this.bindEntities.filter(function(e){return e!==t}))}},{key:"unbindAllEntities",value:function unbindAllEntities(){var t=this;this.bindEntities.forEach(function(e){e.position=t.position.clone()})}}],[{key:"_getNewPoint",value:function _getNewPoint(e){var t=e.from,n=e.to,i=e.pre,r=e.type,o=void 0===r?q.X:r,a=null;return a=o===q.X?[0,i.latitude,i.height]:o===q.Y?[i.longitude,0,i.height]:[i.longitude,i.latitude,0],function CalcTwoLineCommonVertByFourPoints(e,t,n,i){var r=_slicedToArray(e,3),o=r[0],a=r[1],s=r[2],u=_slicedToArray(t,3),l=u[0],c=u[1],f=u[2],p=_slicedToArray(n,3),d=p[0],h=p[1],y=p[2],_=_slicedToArray(i,3),g=l-o,v=c-a,m=f-s,b=_[0]-d,C=_[1]-h,w=_[2]-y,P=g*v*C-v*v*b-m*m*b+g*m*w,E=g*g*C-g*v*b-v*m*w+m*m*C,k=g*m*b-g*g*w-v*v*w+v*m*C,A=-o*P+a*E-s*k,O=(E*h-P*d-k*y-A)/(P*b-E*C+k*w);return[b*O+d,C*O+h,w*O+y]}([t.longitude,t.latitude,t.height],[n.longitude,n.latitude,n.height],[i.longitude,i.latitude,i.height],DraggableCoordinate2_toConsumableArray(a))}}]),DraggableCoordinate}(),q=Object.freeze({X:"X",Y:"Y",Z:"Z"});function DrawHelper_typeof(e){return(DrawHelper_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DrawHelper_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=Cesium.Ellipsoid.WGS84,K={lastPick:null,lastTime:new Date,pick:function pick(e,t,n){var i=new Date;return(null===this.lastPick||100<i.getTime()-this.lastTime.getTime())&&(this.lastTime=i,this.lastPick=e.pick(t,n,n)),s.merge({},this.lastPick)}},X=function defaultPickStrategy(e,t){return t.scene.camera.pickEllipsoid(e)},Y=function customPickStrategy(e,t,n){null==n&&(n=0);var i={};if(Cesium.defined(t.pick(e))&&t.pickPositionSupported)i=t.pickPosition(e);else{var r=Cesium.Cartographic.fromCartesian(t.camera.pickEllipsoid(e));i=Cesium.Cartesian3.fromRadians(r.longitude,r.latitude,0)}return 0!==n&&(i=function getPositionAwayByCamara(e,t,n){var i=Cesium.Cartesian3.distance(e.position,t,new Cesium.Cartesian3),r=Cesium.Cartesian3.subtract(e.position,t,new Cesium.Cartesian3),o=Cesium.Cartesian3.multiplyByScalar(r,n/i,new Cesium.Cartesian3);return Cesium.Cartesian3.add(t,o,new Cesium.Cartesian3)}(t.camera,i,n)),i};function DrawHelper_(e){this._viewer=e,this._scene=e.scene,this._tooltip=function createTooltip(e){var t=function tooltip(e){var t=document.createElement("DIV");t.className="twipsy right";var n=document.createElement("DIV");n.className="twipsy-arrow",t.appendChild(n);var i=document.createElement("DIV");i.className="twipsy-inner",t.appendChild(i),this._div=t,this._title=i,e.appendChild(t),this.addEvent(),this.setVisible(!1)};return t.prototype.setVisible=function(e){this._div.style.display=e?"block":"none"},t.prototype.showAt=function(e,t){e&&t&&(this.setVisible(!0),this._title.innerHTML=t)},t.prototype.show=function(e){e&&(this.setVisible(!0),this._title.innerHTML=e)},t.prototype.addEvent=function(){var t=this,n=0;document.body.addEventListener("mousemove",function(e){"block"===t._div.style.display&&0==(n=n++%3)&&(t._div.style.left=e.offsetX+20+"px",t._div.style.top=e.offsetY-t._div.clientHeight/2+"px")})},new t(e)}(e.container),this._surfaces=[],Cesium.defined(Cesium.ContextLimits)&&(Cesium.ContextLimits._maximumAliasedLineWidth=10),this.initialiseHandlers(),this.enhancePrimitives(),DrawHelper_enhanceWithListeners(this)}DrawHelper_.prototype.initialiseHandlers=function(){var i,r=this._scene,o=this,e=new Cesium.ScreenSpaceEventHandler(r.canvas);function callPrimitiveCallback(e,t){if(1!=o._handlersMuted){var n=r.pick(t);n&&n.primitive&&n.primitive[e]&&n.primitive[e](t),n&&n.id&&"Entity"===n.id.constructor.toString().match(/^function\s*([^\s(]+)/)[1]&&n.id[e]&&n.id[e](t)}}e.setInputAction(function(e){callPrimitiveCallback("leftClick",e.position)},Cesium.ScreenSpaceEventType.LEFT_CLICK),e.setInputAction(function(e){callPrimitiveCallback("leftDoubleClick",e.position)},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),e.setInputAction(function(e){var t={x:e.endPosition.x,y:e.endPosition.y};if(1!=o._handlersMuted){var n=K.pick(r,t);!i||n&&i==n.primitive||((!i.isDestroyed||!i.isDestroyed())&&i.mouseOut(t),i=null),n&&n.primitive&&((n=n.primitive).mouseOut&&(i=n),n.mouseMove&&n.mouseMove(t))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),e.setInputAction(function(e){callPrimitiveCallback("leftUp",e.position)},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(e){callPrimitiveCallback("leftDown",e.position)},Cesium.ScreenSpaceEventType.LEFT_DOWN)},DrawHelper_.prototype.setListener=function(e,t,n){e[t]=n},DrawHelper_.prototype.muteHandlers=function(e){this._handlersMuted=e},DrawHelper_.prototype.registerEditableShape=function(t){var n=this;DrawHelper_setListener(t,"mouseMove",function(e){t.setHighlighted(!0),t._editMode||n._tooltip.showAt(e,"Click to edit this shape")}),DrawHelper_setListener(t,"mouseOut",function(e){t.setHighlighted(!1),n._tooltip.setVisible(!1)}),DrawHelper_setListener(t,"leftClick",function(e){t.setEditMode(!0)})},DrawHelper_.prototype.startDrawing=function(e){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp(),this.editCleanUp=e,this.muteHandlers(!0)},DrawHelper_.prototype.stopDrawing=function(){this.editCleanUp&&(this.editCleanUp(),this.editCleanUp=null),this.muteHandlers(!1)},DrawHelper_.prototype.disableAllHighlights=function(){this.setHighlighted(void 0)},DrawHelper_.prototype.setHighlighted=function(e){this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=e&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=e},DrawHelper_.prototype.disableAllEditMode=function(){this.setEdited(void 0)},DrawHelper_.prototype.setEdited=function(e){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=e};var $=Cesium.Material.fromType(Cesium.Material.ColorType);$.uniforms.color=new Cesium.Color(1,1,0,.5);var Q={ellipsoid:Cesium.Ellipsoid.WGS84,textureRotationAngle:0,height:0,asynchronous:!0,show:!0,debugShowBoundingVolume:!1,strategy:{pickStrategy:X}},J=copyOptions(Q,{appearance:new Cesium.EllipsoidSurfaceAppearance({aboveGround:!1}),material:$,granularity:Math.PI/180,strategy:{pickStrategy:X}}),ee=copyOptions(Q,{}),te=copyOptions(Q,{}),ne=copyOptions(Q,{}),ie=copyOptions(J,{rotation:0}),re=copyOptions(Q,{width:5,geodesic:!0,granularity:1e4,appearance:new Cesium.PolylineMaterialAppearance({aboveGround:!1}),material:$}),oe=function(){function _(){}return _.prototype.initialiseOptions=function(e){fillOptions(this,e),this._ellipsoid=void 0,this._granularity=void 0,this._height=void 0,this._textureRotationAngle=void 0,this._id=void 0,this._createPrimitive=!0,this._primitive=void 0,this._outlinePolygon=void 0},_.prototype.setAttribute=function(e,t){this[e]=t,this._createPrimitive=!0},_.prototype.getAttribute=function(e){return this[e]},_.prototype.update=function(e,t,n){new Date;if(!Cesium.defined(this.ellipsoid))throw new Cesium.DeveloperError("this.ellipsoid must be defined.");if(!Cesium.defined(this.appearance))throw new Cesium.DeveloperError("this.material must be defined.");if(this.granularity<0)throw new Cesium.DeveloperError("this.granularity and scene2D/scene3D overrides must be greater than zero.");if(this.show&&(this._createPrimitive||Cesium.defined(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){var i=this.getGeometry();if(!i)return;this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy();this._primitive=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:i,id:this.id,pickPrimitive:this}),appearance:this.appearance,asynchronous:this.asynchronous}),this._outlinePolygon=this._outlinePolygon&&this._outlinePolygon.destroy(),this.strokeColor&&this.getOutlineGeometry&&(this._outlinePolygon=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:this.getOutlineGeometry(),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)}}),appearance:new Cesium.PerInstanceColorAppearance({flat:!0,renderState:{depthTest:{enabled:!0}}})}))}var r=this._primitive;r.appearance.material=this.material,r.update(e,t,n),this._outlinePolygon&&this._outlinePolygon.update(e,t,n)}},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Cesium.destroyObject(this)},_.prototype.setStrokeStyle=function(e,t){this.strokeColor&&this.strokeColor.equals(e)&&this.strokeWidth==t||(this._createPrimitive=!0,this.strokeColor=e,this.strokeWidth=t)},_}();DrawHelper_.ExtentPrimitive=function(){function _(e){if(!Cesium.defined(e.extent))throw new Cesium.DeveloperError("Extent is required");e=copyOptions(e,J),this.initialiseOptions(e),this.setExtent(e.extent)}return(_.prototype=new oe).setExtent=function(e){this.setAttribute("extent",e)},_.prototype.getExtent=function(){return this.getAttribute("extent")},_.prototype.getGeometry=function(){if(Cesium.defined(this.extent))return new Cesium.RectangleGeometry({rectangle:this.extent,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},_.prototype.getOutlineGeometry=function(){return new Cesium.RectangleOutlineGeometry({rectangle:this.extent})},_}(),DrawHelper_.PolygonPrimitive=function(){function _(e){e=copyOptions(e,J),this.initialiseOptions(e),this.isPolygon=!0}return(_.prototype=new oe).setPositions=function(e){this.setAttribute("positions",e)},_.prototype.getPositions=function(){return this.getAttribute("positions")},_.prototype.getGeometry=function(){if(Cesium.defined(this.positions)&&!(this.positions.length<3))return Cesium.PolygonGeometry.fromPositions({positions:this.positions,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},_.prototype.getOutlineGeometry=function(){return Cesium.PolygonOutlineGeometry.fromPositions({positions:this.getPositions()})},_}(),DrawHelper_.CirclePrimitive=function(){function _(e){if(!Cesium.defined(e.center)||!Cesium.defined(e.radius))throw new Cesium.DeveloperError("Center and radius are required");e=copyOptions(e,J),this.initialiseOptions(e),this.setRadius(e.radius)}return(_.prototype=new oe).setCenter=function(e){this.setAttribute("center",e)},_.prototype.setRadius=function(e){this.setAttribute("radius",Math.max(.1,e))},_.prototype.getCenter=function(){return this.getAttribute("center")},_.prototype.getRadius=function(){return this.getAttribute("radius")},_.prototype.getGeometry=function(){if(Cesium.defined(this.center)&&Cesium.defined(this.radius))return new Cesium.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},_.prototype.getOutlineGeometry=function(){return new Cesium.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})},_}(),DrawHelper_.EllipsePrimitive=function(){function _(e){if(!(Cesium.defined(e.center)&&Cesium.defined(e.semiMajorAxis)&&Cesium.defined(e.semiMinorAxis)))throw new Cesium.DeveloperError("Center and semi major and semi minor axis are required");e=copyOptions(e,ie),this.initialiseOptions(e)}return(_.prototype=new oe).setCenter=function(e){this.setAttribute("center",e)},_.prototype.setSemiMajorAxis=function(e){e<this.getSemiMinorAxis()||this.setAttribute("semiMajorAxis",e)},_.prototype.setSemiMinorAxis=function(e){e>this.getSemiMajorAxis()||this.setAttribute("semiMinorAxis",e)},_.prototype.setRotation=function(e){return this.setAttribute("rotation",e)},_.prototype.getCenter=function(){return this.getAttribute("center")},_.prototype.getSemiMajorAxis=function(){return this.getAttribute("semiMajorAxis")},_.prototype.getSemiMinorAxis=function(){return this.getAttribute("semiMinorAxis")},_.prototype.getRotation=function(){return this.getAttribute("rotation")},_.prototype.getGeometry=function(){var e;if(Cesium.defined(this.center)&&Cesium.defined(this.semiMajorAxis)&&Cesium.defined(this.semiMinorAxis))return new Cesium.EllipseGeometry((DrawHelper_defineProperty(e={ellipsoid:this.ellipsoid,center:this.center,semiMajorAxis:this.semiMajorAxis,semiMinorAxis:this.semiMinorAxis,rotation:this.rotation,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle},"ellipsoid",this.ellipsoid),DrawHelper_defineProperty(e,"granularity",this.granularity),e))},_.prototype.getOutlineGeometry=function(){return new Cesium.EllipseOutlineGeometry({center:this.getCenter(),semiMajorAxis:this.getSemiMajorAxis(),semiMinorAxis:this.getSemiMinorAxis(),rotation:this.getRotation()})},_}(),DrawHelper_.PolylinePrimitive=function(){function _(e){e=copyOptions(e,re),this.initialiseOptions(e)}return(_.prototype=new oe).setPositions=function(e){this.setAttribute("positions",e)},_.prototype.setWidth=function(e){this.setAttribute("width",e)},_.prototype.setGeodesic=function(e){this.setAttribute("geodesic",e)},_.prototype.getPositions=function(){return this.getAttribute("positions")},_.prototype.getWidth=function(){return this.getAttribute("width")},_.prototype.getGeodesic=function(e){return this.getAttribute("geodesic")},_.prototype.getGeometry=function(){if(Cesium.defined(this.positions)&&!(this.positions.length<2))return new Cesium.PolylineGeometry({positions:this.positions,height:this.height,width:this.width<1?1:this.width,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,ellipsoid:this.ellipsoid})},_}();var ae={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0,strategy:{pickStrategy:X}},se={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0};function DrawHelper_getExtentCorners(e){return Z.cartographicArrayToCartesianArray([Cesium.Rectangle.northwest(e),Cesium.Rectangle.northeast(e),Cesium.Rectangle.southeast(e),Cesium.Rectangle.southwest(e)])}function DrawHelper_getExtent(e,t){var n=new Cesium.Rectangle;n.west=Math.min(e.longitude,t.longitude),n.east=Math.max(e.longitude,t.longitude),n.south=Math.min(e.latitude,t.latitude),n.north=Math.max(e.latitude,t.latitude);var i=Cesium.Math.EPSILON7;return n.east-n.west<i&&(n.east+=2*i),n.north-n.south<i&&(n.north+=2*i),n}function DrawHelper_clone(e,t){if(null==e||"object"!=DrawHelper_typeof(e))return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var n in t=t||new e.constructor,e)t[n]=void 0===t[n]?DrawHelper_clone(e[n],null):t[n];return t}function fillOptions(e,t){var n;for(n in e=e||{},t)void 0===e[n]&&(e[n]=DrawHelper_clone(t[n]))}function copyOptions(e,t){var n,i=DrawHelper_clone(e);for(n in t)void 0===i[n]&&(i[n]=DrawHelper_clone(t[n]));return i}function DrawHelper_setListener(e,t,n){e[t]=n}function DrawHelper_enhanceWithListeners(e){e._listeners={},e.addListener=function(e,t){return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this._listeners[e].length},e.executeListeners=function(e,t){if(this._listeners[e.name]&&0<this._listeners[e.name].length)for(var n=0;n<this._listeners[e.name].length;n++)this._listeners[e.name][n](e);else t&&t(e)}}function getCesiumHightZero(e){var t=Cesium.Cartographic.fromCartesian(e);return Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,0)}function util_typeof(e){return(util_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}DrawHelper_.prototype.createBillboardGroup=function(e,t,n){var i=new DrawHelper_.BillboardGroup(this,t);return i.addBillboards(e,n),i},(DrawHelper_.BillboardGroup=function(e,t){this._drawHelper=e,this._scene=e._scene,this._options=copyOptions(t,ae);var n=new Cesium.BillboardCollection;this._scene.primitives.add(n),this._billboards=n,this._orderedBillboards=[]}).prototype.createBillboard=function(e,i){var r=this._billboards.add({show:!0,position:e,pixelOffset:new Cesium.Cartesian2(this._options.shiftX,this._options.shiftY),eyeOffset:new Cesium.Cartesian3(0,0,0),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.CENTER,scale:1,image:this._options.iconUrl,color:new Cesium.Color(1,1,1,1)});if(i){var n=function enableRotation(e){t.enableRotate=e},o=function getIndex(){for(var e=0,t=a._orderedBillboards.length;e<t&&a._orderedBillboards[e]!=r;++e);return e},a=this,t=this._scene.screenSpaceCameraController;if(i.dragHandlers){a=this;DrawHelper_setListener(r,"leftDown",function(e){function onDragEnd(e){t.destroy(),n(!0),i.dragHandlers.onDragEnd&&i.dragHandlers.onDragEnd(o(),e)}var t=new Cesium.ScreenSpaceEventHandler(a._scene.canvas);t.setInputAction(function(e){var t=a._scene.camera.pickEllipsoid(e.endPosition,Z);t?function onDrag(e){r.position=e;for(var t=0,n=a._orderedBillboards.length;t<n&&a._orderedBillboards[t]!=r;++t);i.dragHandlers.onDrag&&i.dragHandlers.onDrag(o(),e)}(t):onDragEnd(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(e){onDragEnd(a._scene.camera.pickEllipsoid(e.position,Z))},Cesium.ScreenSpaceEventType.LEFT_UP),n(!1),i.dragHandlers.onDragStart&&i.dragHandlers.onDragStart(o(),a._scene.camera.pickEllipsoid(e,Z))})}i.onDoubleClick&&DrawHelper_setListener(r,"leftDoubleClick",function(e){i.onDoubleClick(o())}),i.onClick&&DrawHelper_setListener(r,"leftClick",function(e){i.onClick(o())}),i.tooltip&&(DrawHelper_setListener(r,"mouseMove",function(e){a._drawHelper._tooltip.showAt(e,i.tooltip())}),DrawHelper_setListener(r,"mouseOut",function(e){a._drawHelper._tooltip.setVisible(!1)}))}return r},DrawHelper_.BillboardGroup.prototype.insertBillboard=function(e,t,n){this._orderedBillboards.splice(e,0,this.createBillboard(t,n))},DrawHelper_.BillboardGroup.prototype.addBillboard=function(e,t){this._orderedBillboards.push(this.createBillboard(e,t))},DrawHelper_.BillboardGroup.prototype.addBillboards=function(e,t){for(var n=0;n<e.length;n++)this.addBillboard(e[n],t)},DrawHelper_.BillboardGroup.prototype.updateBillboardsPositions=function(e){for(var t=0;t<e.length;t++)this.getBillboard(t).position=e[t]},DrawHelper_.BillboardGroup.prototype.countBillboards=function(){return this._orderedBillboards.length},DrawHelper_.BillboardGroup.prototype.getBillboard=function(e){return this._orderedBillboards[e]},DrawHelper_.BillboardGroup.prototype.removeBillboard=function(e){this._billboards.remove(this.getBillboard(e)),this._orderedBillboards.splice(e,1)},DrawHelper_.BillboardGroup.prototype.remove=function(){this._billboards=this._billboards&&this._billboards.removeAll()&&this._billboards.destroy()},DrawHelper_.BillboardGroup.prototype.setOnTop=function(){this._scene.primitives.raiseToTop(this._billboards)},DrawHelper_.prototype.startDrawingMarker=function(i){i=copyOptions(i,ae);this.startDrawing(function(){a&&a.remove(),t&&t.destroy(),o&&o.setVisible(!1)});var n=this,e=this._scene,r=this._viewer,o=(e.primitives,this._tooltip),a=new DrawHelper_.BillboardGroup(this,i),t=new Cesium.ScreenSpaceEventHandler(e.canvas);t.setInputAction(function(e){if(null!=e.position){var t=i.strategy.pickStrategy(e.position,r);t&&(a.addBillboard(t),n.stopDrawing(),i.callback(t,n))}},Cesium.ScreenSpaceEventType.LEFT_CLICK),t.setInputAction(function(e){var t=e.endPosition;if(null!=t){var n=i.strategy.pickStrategy(t,r);n?o.showAt(t,"<p>Click to add your marker. Position is: </p>"+function getDisplayLatLngString(e,t){return e.longitude.toFixed(t||3)+", "+e.latitude.toFixed(t||3)}(Z.cartesianToCartographic(n))):o.showAt(t,"<p>Click on the globe to add your marker.</p>")}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},DrawHelper_.prototype.startDrawingPolygon=function(e){this.startDrawingPolyshape(!0,e)},DrawHelper_.prototype.startDrawingPolyline=function(e){this.startDrawingPolyshape(!1,e)},DrawHelper_.prototype.startDrawingPolyshape=function(e,i){i=copyOptions(i,e?J:re),this.startDrawing(function(){a&&a.remove(r),c&&c.remove(),f&&f.destroy(),s&&s.setVisible(!1)});var r,t=this,n=this._scene,o=this._viewer,a=n.primitives,s=this._tooltip,u=e?3:2;(r=e?new DrawHelper_.PolygonPrimitive(i):new DrawHelper_.PolylinePrimitive(i)).asynchronous=!1,a.add(r);var l=[],c=new DrawHelper_.BillboardGroup(this,ae),f=new Cesium.ScreenSpaceEventHandler(n.canvas);f.setInputAction(function(e){if(null!=e.position){if(l.length<u)return;if(i.strategy.pickStrategy(e.position,o)&&(t.stopDrawing(),"function"==typeof i.callback)){l.length;i.callback(l,t)}}},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),f.setInputAction(function(e){var t=i.strategy.pickStrategy(e.position,o);t=getCesiumHightZero(t),null!=e.position&&t&&(0==l.length&&(l.push(t.clone()),c.addBillboard(l[0])),l.length>=u&&(r.positions=l,r._createPrimitive=!0),l.push(t),c.addBillboard(t))},Cesium.ScreenSpaceEventType.LEFT_CLICK),f.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(0==l.length)s.showAt(t,"<p>Click to add first point</p>");else{var n=i.strategy.pickStrategy(t,o);n&&(l.pop(),n.y+=Cesium.Math.EPSILON7,l.push(n),l.length>=u&&(r.positions=l,r._createPrimitive=!0),c.getBillboard(l.length-1).position=n,s.showAt(t,"<p>Click to add new point ("+l.length+")</p>"+(l.length>u?"<p>Double click to finish drawing</p>":"")))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},DrawHelper_.prototype.startDrawingExtent=function(i){i=copyOptions(i,J);this.startDrawing(function(){null!=u&&o&&o.remove(u),l&&l.remove(),t&&t.destroy(),a&&a.setVisible(!1)});var n=this,e=this._scene,r=this._viewer,o=this._scene.primitives,a=this._tooltip,s=null,u=null,l=null,t=new Cesium.ScreenSpaceEventHandler(e.canvas);function updateExtent(e){null==u&&((u=new DrawHelper_.ExtentPrimitive({extent:e,material:i.material})).asynchronous=!1,o.add(u)),u.setExtent(e);var t=DrawHelper_getExtentCorners(u.rectangle=e);null==l?(l=new DrawHelper_.BillboardGroup(n,ae)).addBillboards(t):l.updateBillboardsPositions(t)}t.setInputAction(function(e){if(null!=e.position){var t=i.strategy.pickStrategy(e.position,r);if(t)if(null==u)updateExtent(DrawHelper_getExtent(s=Z.cartesianToCartographic(t),s));else n.stopDrawing(),"function"==typeof i.callback&&i.callback(DrawHelper_getExtent(s,Z.cartesianToCartographic(t)))}},Cesium.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==u)a.showAt(t,"<p>Click to start drawing rectangle</p>");else{var n=i.strategy.pickStrategy(t,r);if(n)updateExtent(DrawHelper_getExtent(s,Z.cartesianToCartographic(n))),a.showAt(t,"<p>Drag to change rectangle extent</p><p>Click again to finish drawing</p>")}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},DrawHelper_.prototype.startDrawingCircle=function(i){i=copyOptions(i,J);this.startDrawing(function cleanUp(){null!=s&&o&&o.remove(s),u&&u.remove(),t&&t.destroy(),a&&a.setVisible(!1)});var n=this,e=this._scene,r=this._viewer,o=this._scene.primitives,a=this._tooltip,s=null,u=null,t=new Cesium.ScreenSpaceEventHandler(e.canvas);t.setInputAction(function(e){if(null!=e.position){var t=i.strategy.pickStrategy(e.position,r);t&&(null==s?(s=new DrawHelper_.CirclePrimitive({center:t,radius:0,asynchronous:!1,material:i.material}),o.add(s),(u=new DrawHelper_.BillboardGroup(n,ae)).addBillboards([t])):("function"==typeof i.callback&&i.callback(s.getCenter(),s.getRadius(),n),n.stopDrawing()))}},Cesium.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==s)a.showAt(t,"<p>Click to start drawing the circle</p>");else{var n=i.strategy.pickStrategy(t,r);n&&(s.setRadius(Cesium.Cartesian3.distance(getCesiumHightZero(s.getCenter()),getCesiumHightZero(n))),u.updateBillboardsPositions(n),a.showAt(t,"<p>Move mouse to change circle radius</p><p>Click again to finish drawing</p>"))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},DrawHelper_.prototype.enhancePrimitives=function(){var y=this;function setHighlighted(e){y._scene;this._highlighted&&this._highlighted==e||!0!==this._editMode&&((this._highlighted=e)?(y.setHighlighted(this),this._strokeColor=this.strokeColor,this.setStrokeStyle(Cesium.Color.fromCssColorString("white"),this.strokeWidth)):this._strokeColor?this.setStrokeStyle(this._strokeColor,this.strokeWidth):this.setStrokeStyle(void 0,void 0))}function setEditMode(e){if(this._editMode!=e)if(y.disableAllHighlights(),e){y.setEdited(this);var n=y._scene,i=this;if(null==this._markers){var r=function updateHalfMarkers(e,t){var n=e-1<0?t.length-1:e-1;n<l.countBillboards()&&(l.getBillboard(n).position=a(n)),(n=e)<l.countBillboards()&&(l.getBillboard(n).position=a(n))},o=function onEdited(){i.executeListeners({name:"onEdited",positions:i.positions})},a=function calculateHalfMarkerPosition(e){var t=i.positions;return Z.cartographicToCartesian(new Cesium.EllipsoidGeodesic(Z.cartesianToCartographic(t[e]),Z.cartesianToCartographic(t[e<t.length-1?e+1:0])).interpolateUsingFraction(.5))},t=this.dragBillboard?this.dragBillboard:se,s=this.dragHalfBillboard?this.dragHalfBillboard:se,u=new DrawHelper_.BillboardGroup(y,t),l=new DrawHelper_.BillboardGroup(y,s),c={dragHandlers:{onDrag:function onDrag(e,t){i.positions[e]=t,r(e,i.positions),i._createPrimitive=!0},onDragEnd:function onDragEnd(e,t){i._createPrimitive=!0,o()}},onDoubleClick:function onDoubleClick(e){i.positions.length<4||(i.positions.splice(e,1),i._createPrimitive=!0,u.removeBillboard(e),l.removeBillboard(e),r(e,i.positions),o())},tooltip:function tooltip(){if(3<i.positions.length)return"Double click to remove this point"}};u.addBillboards(i.positions,c),this._markers=u;for(var f=[],p=0,d=i.positions.length+(this.isPolygon?0:-1);p<d;p++)f.push(a(p));var h={dragHandlers:{onDragStart:function onDragStart(e,t){this.index=e+1,i.positions.splice(this.index,0,t),i._createPrimitive=!0},onDrag:function onDrag(e,t){i.positions[this.index]=t,i._createPrimitive=!0},onDragEnd:function onDragEnd(e,t){u.insertBillboard(this.index,t,c),l.getBillboard(this.index-1).position=a(this.index-1),l.insertBillboard(this.index,a(this.index),h),i._createPrimitive=!0,o()}},tooltip:function tooltip(){return"Drag to create a new point"}};l.addBillboards(f,h),this._editMarkers=l,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(n.canvas),this._globeClickhandler.setInputAction(function(e){var t=n.pick(e.position);t&&t.primitive||i.setEditMode(!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),u.setOnTop(),l.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._editMarkers.remove(),this._markers=null,this._editMarkers=null,this._globeClickhandler.destroy()),this._editMode=!1}Cesium.Billboard.prototype.setEditable=function(){if(!this._editable){this._editable=!0;var n=this,i=this;DrawHelper_setListener(n,"leftDown",function(e){function onDragEnd(e){t.destroy(),enableRotation(!0),i.executeListeners({name:"dragEnd",positions:e})}var t=new Cesium.ScreenSpaceEventHandler(y._scene.canvas);t.setInputAction(function(e){var t=y._scene.camera.pickEllipsoid(e.endPosition,Z);t?function onDrag(e){n.position=e,i.executeListeners({name:"drag",positions:e})}(t):onDragEnd(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(e){onDragEnd(y._scene.camera.pickEllipsoid(e.position,Z))},Cesium.ScreenSpaceEventType.LEFT_UP),enableRotation(!1)}),DrawHelper_enhanceWithListeners(n)}function enableRotation(e){y._scene.screenSpaceCameraController.enableRotate=e}},Cesium.Entity.prototype.setEditable=function(e){if(!1===e)return function DrawHelper_removeListener(e,t){delete e[t]}(n=this,"leftDown"),void(this._editable=!1);if("billboard"===this.modeType&&!this._editable){this._editable=!0;var n,i=this;DrawHelper_setListener(n=this,"leftDown",function(e){function onDragEnd(e){t.destroy(),enableRotation(!0),i.executeListeners({name:"dragEnd",positions:e})}var t=new Cesium.ScreenSpaceEventHandler(y._scene.canvas);t.setInputAction(function(e){var t=Y(e.endPosition,y._scene,6);t?function onDrag(e){n.position=e,i.executeListeners({name:"drag",positions:e})}(t):onDragEnd(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),t.setInputAction(function(e){onDragEnd(Y(e.position,y._scene,6))},Cesium.ScreenSpaceEventType.LEFT_UP),enableRotation(!1)}),DrawHelper_enhanceWithListeners(n)}function enableRotation(e){y._scene.screenSpaceCameraController.enableRotate=e}},DrawHelper_.PolylinePrimitive.prototype.setEditable=function(){if(!this.setEditMode){this.isPolygon=!1,this.asynchronous=!1,y.registerEditableShape(this),this.setEditMode=setEditMode;var t=this.width;this.setHighlighted=function(e){!0!==this._editMode&&(e?(y.setHighlighted(this),this.setWidth(2*t)):this.setWidth(t))},this.getExtent=function(){return Cesium.Extent.fromCartographicArray(Z.cartesianArrayToCartographicArray(this.positions))},DrawHelper_enhanceWithListeners(this),this.setEditMode(!1)}},DrawHelper_.PolygonPrimitive.prototype.setEditable=function(){this.asynchronous=!1;y._scene;y.registerEditableShape(this),this.setEditMode=setEditMode,this.setHighlighted=setHighlighted,DrawHelper_enhanceWithListeners(this),this.setEditMode(!1)},DrawHelper_.ExtentPrimitive.prototype.setEditable=function(){if(!this.setEditMode){var r=this,o=y._scene;y.registerEditableShape(r),r.asynchronous=!1,r.setEditMode=function(e){if(this._editMode!=e)if(y.disableAllHighlights(),e){if(y.setEdited(this),null==this._markers){this.dragBillboard&&this.dragBillboard;var t=this.dragHalfBillboard?this.dragHalfBillboard:se,i=new DrawHelper_.BillboardGroup(y,t),n={dragHandlers:{onDrag:function onDrag(e,t){var n=i.getBillboard((e+2)%4).position;r.setExtent(DrawHelper_getExtent(Z.cartesianToCartographic(n),Z.cartesianToCartographic(t))),i.updateBillboardsPositions(DrawHelper_getExtentCorners(r.extent))},onDragEnd:function onDragEnd(e,t){!function onEdited(){r.executeListeners({name:"onEdited",extent:r.extent})}()}},tooltip:function tooltip(){return"Drag to change the corners of this extent"}};i.addBillboards(DrawHelper_getExtentCorners(r.extent),n),this._markers=i,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(o.canvas),this._globeClickhandler.setInputAction(function(e){var t=o.pick(e.position);try{t&&!t.isDestroyed()&&t.primitive||r.setEditMode(!1)}catch(e){r.setEditMode(!1)}},Cesium.ScreenSpaceEventType.LEFT_CLICK),i.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},r.setHighlighted=setHighlighted,DrawHelper_enhanceWithListeners(r),r.setEditMode(!1)}},DrawHelper_.EllipsePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var a=this,s=y._scene;a.asynchronous=!1,y.registerEditableShape(a),a.setEditMode=function(e){if(this._editMode!=e)if(y.disableAllHighlights(),e){y.setEdited(this);var n=this;if(null==this._markers){var i=function getMarkerPositions(){return Cesium.Shapes.computeEllipseBoundary(Z,a.getCenter(),a.getSemiMajorAxis(),a.getSemiMinorAxis(),a.getRotation()+Math.PI/2,Math.PI/2).splice(0,4)},t=this.dragBillboard?this.dragBillboard:se,r=new DrawHelper_.BillboardGroup(y,t),o={dragHandlers:{onDrag:function onDrag(e,t){var n=Cesium.Cartesian3.distance(a.getCenter(),t);e%2==0?a.setSemiMajorAxis(n):a.setSemiMinorAxis(n),r.updateBillboardsPositions(i())},onDragEnd:function onDragEnd(e,t){!function onEdited(){a.executeListeners({name:"onEdited",center:a.getCenter(),semiMajorAxis:a.getSemiMajorAxis(),semiMinorAxis:a.getSemiMinorAxis(),rotation:0})}()}},tooltip:function tooltip(){return"Drag to change the excentricity and radius"}};r.addBillboards(i(),o),this._markers=r,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(s.canvas),this._globeClickhandler.setInputAction(function(e){var t=s.pick(e.position);t&&t.primitive||n.setEditMode(!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),r.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},a.setHighlighted=setHighlighted,DrawHelper_enhanceWithListeners(a),a.setEditMode(!1)}},DrawHelper_.CirclePrimitive.prototype.getCircleCartesianCoordinates=function(e){for(var t,n=Cesium.CircleOutlineGeometry.createGeometry(new Cesium.CircleOutlineGeometry({ellipsoid:Z,center:this.getCenter(),radius:this.getRadius(),granularity:e})),i=0,r=[];i<n.attributes.position.values.length;i+=3)t=n.attributes.position.values,r.push(new Cesium.Cartesian3(t[i],t[i+1],t[i+2]));return r},DrawHelper_.CirclePrimitive.prototype.setEditable=function(){if(!this.setEditMode){var a=this,s=y._scene;a.asynchronous=!1,y.registerEditableShape(a),a.setEditMode=function(e){if(this._editMode!=e)if(y.disableAllHighlights(),e){y.setEdited(this);var n=this;if(null==this._markers){var i=function getMarkerPositions(){return n.getCircleCartesianCoordinates(Cesium.Math.PI_OVER_TWO)},t=this.dragBillboard?this.dragBillboard:se,r=new DrawHelper_.BillboardGroup(y,t),o={dragHandlers:{onDrag:function onDrag(e,t){a.setRadius(Cesium.Cartesian3.distance(a.getCenter(),t)),r.updateBillboardsPositions(i())},onDragEnd:function onDragEnd(e,t){!function onEdited(){a.executeListeners({name:"onEdited",center:a.getCenter(),radius:a.getRadius()})}()}},tooltip:function tooltip(){return"Drag to change the radius"}};r.addBillboards(i(),o),this._markers=r,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(s.canvas),this._globeClickhandler.setInputAction(function(e){var t=s.pick(e.position);t&&t.primitive||n.setEditMode(!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),r.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1},a.setHighlighted=setHighlighted,DrawHelper_enhanceWithListeners(a),a.setEditMode(!1)}}},DrawHelper_.DrawHelperWidget=function _(e,t){if(!Cesium.defined(t.container))throw new Cesium.DeveloperError("Container is required");var n={markerIcon:" marker",polylineIcon:" polyline",polygonIcon:" polygon",circleIcon:" circle",extentIcon:" extent",clearIcon:" clear",polylineDrawingOptions:re,polygonDrawingOptions:ee,extentDrawingOptions:te,circleDrawingOptions:ne,strategy:{pickStrategy:t.pickStrategy?t.pickStrategy:X}};fillOptions(t,n);var i=this,o=document.createElement("DIV");function addIcon(e,t,n,i){var r=document.createElement("DIV");return r.className="button"+t,r.title=n,o.appendChild(r),r.onclick=i,r}o.className="toolbar",t.container.appendChild(o);var r=e._scene;-1!==t.buttons.indexOf("marker")&&addIcon(0,t.markerIcon,"Click to start drawing a 2D marker",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"markerClick"}),e.startDrawingMarker({callback:function callback(e){i.executeListeners({name:"markerCreated",position:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("polyline")&&addIcon(0,t.polylineIcon,"Click to start drawing a 2D polyline",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"polylineClick"}),e.startDrawingPolyline({callback:function callback(e){i.executeListeners({name:"polylineCreated",positions:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("polygon")&&addIcon(0,t.polygonIcon,"Click to start drawing a 2D polygon",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"polygonClick"}),e.startDrawingPolygon({callback:function callback(e){i.executeListeners({name:"polygonCreated",positions:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("extent")&&addIcon(0,t.extentIcon,"Click to start drawing an Extent",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"extentClick"}),e.startDrawingExtent({callback:function callback(e){i.executeListeners({name:"extentCreated",extent:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("circle")&&addIcon(0,t.circleIcon,"Click to start drawing a Circle",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"circleClick"}),e.startDrawingCircle({callback:function callback(e,t){i.executeListeners({name:"circleCreated",center:e,radius:t})},strategy:t.strategy})});var a=document.createElement("DIV");a.className="divider",o.appendChild(a),-1!==t.buttons.indexOf("clear")&&addIcon(0,t.clearIcon,"Remove all primitives",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"clearClick"}),r.primitives.removeAll()}),DrawHelper_enhanceWithListeners(this)},DrawHelper_.prototype.addToolbar=function(e,t){return t=copyOptions(t,{container:e}),new DrawHelper_.DrawHelperWidget(this,t)};var ue=function fillOptions(e,t){var n;for(n in e=e||{},t)void 0===e[n]&&(e[n]=ce(t[n]))},le=function copyOptions(e,t){var n,i=ce(e);for(n in t)void 0===i[n]&&(i[n]=ce(t[n]));return i},ce=function clone(e,t){if(null==e||"object"!=util_typeof(e))return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);for(var n in t=t||new e.constructor,e)t[n]=void 0===t[n]?clone(e[n],null):t[n];return t},fe=Cesium.Ellipsoid.WGS84,pe=Cesium.Material.fromType(Cesium.Material.ColorType);pe.uniforms.color=new Cesium.Color(1,1,0,.5);var de=function defaultPickStrategy(e,t){return t.scene.camera.pickEllipsoid(e)},he={ellipsoid:Cesium.Ellipsoid.WGS84,textureRotationAngle:0,height:0,asynchronous:!0,show:!0,debugShowBoundingVolume:!1,strategy:{pickStrategy:de}},ye=le(he,{appearance:new Cesium.EllipsoidSurfaceAppearance({aboveGround:!1}),material:pe,granularity:Math.PI/180,strategy:{pickStrategy:de}}),_e=le(he,{}),ge=le(he,{}),ve=le(he,{}),me=le(ye,{rotation:0}),be=le(he,{width:5,geodesic:!0,granularity:1e4,appearance:new Cesium.PolylineMaterialAppearance({aboveGround:!1}),material:pe}),Ce={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0,strategy:{pickStrategy:de}},we={iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAABbElEQVQoU2NkIAEwwtR6enqyc3Jy6jEzMyv9//+fl5GR8fPfv3/vff/+/dL27dt/gtSBFYMUcnBwePj4+ARYW1u7cHFxiX/9+vXl0aNH92zdunXDjx8/doA0gBV7eXmZ+/r6Zjo4OMR+//6dCWYbOzv7v3379i3evn379G3btp0EK3Z3d49tampq//79u/T///8Zfv36xfD792+Gf//+MbCwsDydOHFi5c6dOxeDFTs5OeV0dHT0vXr1ivXLl28Mf//+gXubjY3t9/Tp04r27ds3BazYysoqsaqqtuX7919S6IHz7dvXZzNnTqk5duzYfLBiY2NjG2dnt2w7O9ewf//+wd38/z/Dv717t686evTA1LNnzx4BK3ZwcOB49epViKOju7+NjYsNHx+/yKdPH94cPrz3yIEDOzeKiYmtOXDgwA94OMvIyHB+//7d+v///7oMDAwCDAwMHxgZGS9zcnIeffLkyXd4OBMbiQDHU6AM+91hMQAAAABJRU5ErkJggg==",shiftX:0,shiftY:0};function EditableBillboard_typeof(e){return(EditableBillboard_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EditableBillboard_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EditableBillboard_possibleConstructorReturn(e,t){return!t||"object"!==EditableBillboard_typeof(t)&&"function"!=typeof t?function EditableBillboard_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function EditableBillboard_getPrototypeOf(e){return(EditableBillboard_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EditableBillboard_setPrototypeOf(e,t){return(EditableBillboard_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function EditableBillboard(e,t,n){var i;return function EditableBillboard_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EditableBillboard),(i=EditableBillboard_possibleConstructorReturn(this,EditableBillboard_getPrototypeOf(EditableBillboard).call(this,e,t))).viewer=n,i}return function EditableBillboard_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EditableBillboard_setPrototypeOf(e,t)}(EditableBillboard,Cesium.Billboard),function EditableBillboard_createClass(e,t,n){return t&&EditableBillboard_defineProperties(e.prototype,t),n&&EditableBillboard_defineProperties(e,n),e}(EditableBillboard,[{key:"setEditable",value:function setEditable(){var t=this;if(!this._editable){this._editable=!0;var n=M.getInstance();n.onDragStart(this,function(e){n.enableDrawRotation(!1),t.position=t.viewer.scene.camera.pickEllipsoid(e)}),n.onDrag(this,function(e){t.position=t.viewer.scene.camera.pickEllipsoid(e)}),n.onDragEnd(this,function(e){n.enableDrawRotation(!0)})}}}]),EditableBillboard}();function BillboardGroup_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ee=function(){function BillboardGroup(e,t){!function BillboardGroup_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BillboardGroup),this._drawHelper=e,this._scene=e._scene,this._options=le(t,Ce);var n=new Cesium.BillboardCollection;this._scene.primitives.add(n),this._billboards=n,this._orderedBillboards=[],this._evnetSystem=M.getInstance()}return function BillboardGroup_createClass(e,t,n){return t&&BillboardGroup_defineProperties(e.prototype,t),n&&BillboardGroup_defineProperties(e,n),e}(BillboardGroup,[{key:"createBillboard",value:function createBillboard(e,r){var o=this,t=new Pe({show:!0,position:e,pixelOffset:new Cesium.Cartesian2(this._options.shiftX,this._options.shiftY),eyeOffset:new Cesium.Cartesian3(0,0,0),horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.CENTER,scale:1,image:this._options.iconUrl,color:new Cesium.Color(1,1,1,1)},this,this._drawHelper._viewer),a=this._billboards.add(t);if(r){this._scene.screenSpaceCameraController;var s=function getIndex(){var e,t;for(e=0,t=o._orderedBillboards.length;e<t&&o._orderedBillboards[e]!=a;++e);return e};r.dragHandlers&&(this._evnetSystem.onDragStart(t,function(e){o._evnetSystem.enableDrawRotation(!1),r.dragHandlers.onDragStart&&r.dragHandlers.onDragStart(s(),o._scene.camera.pickEllipsoid(e,fe))}),this._evnetSystem.onDrag(t,function(e){var t=o._scene.camera.pickEllipsoid(e,fe);a.position=t;for(var n=0,i=o._orderedBillboards.length;n<i&&o._orderedBillboards[n]!=a;++n);r.dragHandlers.onDrag&&r.dragHandlers.onDrag(s(),t)}),this._evnetSystem.onDragEnd(t,function(e){o._evnetSystem.enableDrawRotation(!0);var t=o._scene.camera.pickEllipsoid(e,fe);r.dragHandlers.onDragEnd&&r.dragHandlers.onDragEnd(s(),t)})),r.onDoubleClick&&this._evnetSystem.onLeftDoubleClick(a,function(){r.onDoubleClick(s())}),r.onClick&&this._evnetSystem.onLeftClick(t,function(){r.onClick(s())}),r.tooltip&&(this._evnetSystem.onMouseMove(t,function(e){o._drawHelper._tooltip.showAt(e,r.tooltip())}),this._evnetSystem.onMouseMoveOut(t,function(e){o._drawHelper._tooltip.setVisible(!1)}))}return a}},{key:"insertBillboard",value:function insertBillboard(e,t,n){this._orderedBillboards.splice(e,0,this.createBillboard(t,n))}},{key:"addBillboard",value:function addBillboard(e,t){this._orderedBillboards.push(this.createBillboard(e,t))}},{key:"addBillboards",value:function addBillboards(e,t){for(var n=0;n<e.length;n++)this.addBillboard(e[n],t)}},{key:"updateBillboardsPositions",value:function updateBillboardsPositions(e){for(var t=0;t<e.length;t++)this.getBillboard(t).position=e[t]}},{key:"countBillboards",value:function countBillboards(){return this._orderedBillboards.length}},{key:"getBillboard",value:function getBillboard(e){return this._orderedBillboards[e]}},{key:"removeBillboard",value:function removeBillboard(e){this._billboards.remove(this.getBillboard(e)),this._orderedBillboards.splice(e,1)}},{key:"remove",value:function remove(){this._billboards=this._billboards&&this._billboards.removeAll()&&this._billboards.destroy()}},{key:"setOnTop",value:function setOnTop(){this._scene.primitives.raiseToTop(this._billboards)}}]),BillboardGroup}();function Tooltip_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ke=function(){function Tooltip(e){!function Tooltip_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Tooltip);var t=document.createElement("DIV");t.className="twipsy right";var n=document.createElement("DIV");n.className="twipsy-arrow",t.appendChild(n);var i=document.createElement("DIV");i.className="twipsy-inner",t.appendChild(i),this._div=t,this._title=i,e.appendChild(t),this.addEvent(),this.setVisible(!1)}return function Tooltip_createClass(e,t,n){return t&&Tooltip_defineProperties(e.prototype,t),n&&Tooltip_defineProperties(e,n),e}(Tooltip,[{key:"setVisible",value:function setVisible(e){this._div.style.display=e?"block":"none"}},{key:"showAt",value:function showAt(e,t){e&&t&&(this.setVisible(!0),this._title.innerHTML=t)}},{key:"show",value:function show(e){e&&(this.setVisible(!0),this._title.innerHTML=e)}},{key:"addEvent",value:function addEvent(){var t=this,n=0;document.body.addEventListener("mousemove",function(e){"block"===t._div.style.display&&0==(n=n++%3)&&(t._div.style.left=e.offsetX+20+"px",t._div.style.top=e.offsetY-t._div.clientHeight/2+"px")})}}]),Tooltip}(),Ae=n(0);function ChangeablePrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Oe=function(){function ChangeablePrimitive(){!function ChangeablePrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ChangeablePrimitive)}return function ChangeablePrimitive_createClass(e,t,n){return t&&ChangeablePrimitive_defineProperties(e.prototype,t),n&&ChangeablePrimitive_defineProperties(e,n),e}(ChangeablePrimitive,[{key:"initialiseOptions",value:function initialiseOptions(e){ue(this,e),this._ellipsoid=void 0,this._granularity=void 0,this._height=void 0,this._textureRotationAngle=void 0,this._id=void 0,this._createPrimitive=!0,this._primitive=void 0,this._outlinePolygon=void 0}},{key:"setAttribute",value:function setAttribute(e,t){this[e]=t,this._createPrimitive=!0}},{key:"getAttribute",value:function getAttribute(e){return this[e]}},{key:"update",value:function update(e,t,n){var i=new Date;if(!Ae.defined(this.ellipsoid))throw new Ae.DeveloperError("this.ellipsoid must be defined.");if(!Ae.defined(this.appearance))throw new Ae.DeveloperError("this.material must be defined.");if(this.granularity<0)throw new Ae.DeveloperError("this.granularity and scene2D/scene3D overrides must be greater than zero.");if(this.show&&(this._createPrimitive||Ae.defined(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){var r=this.getGeometry();if(!r)return;Xe.log("in update"),this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy();this._primitive=new Ae.Primitive({geometryInstances:new Ae.GeometryInstance({geometry:r,id:this.id,pickPrimitive:this}),appearance:this.appearance,asynchronous:this.asynchronous}),this._outlinePolygon=this._outlinePolygon&&this._outlinePolygon.destroy(),this.strokeColor&&this.getOutlineGeometry&&(this._outlinePolygon=new Ae.Primitive({geometryInstances:new Ae.GeometryInstance({geometry:this.getOutlineGeometry(),attributes:{color:Ae.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)}}),appearance:new Ae.PerInstanceColorAppearance({flat:!0,renderState:{depthTest:{enabled:!0},lineWidth:Math.min(this.strokeWidth||4)}})}))}var o=this._primitive;o.appearance.material=this.material,o.update(e,t,n),this._outlinePolygon&&this._outlinePolygon.update(e,t,n),Xe.log((new Date).getTime()-i.getTime())}}},{key:"isDestroyed",value:function isDestroyed(){return!1}},{key:"destroy",value:function destroy(){return this._primitive=this._primitive&&this._primitive.destroy(),Ae.destroyObject(this)}},{key:"setStrokeStyle",value:function setStrokeStyle(e,t){this.strokeColor&&this.strokeColor.equals(e)&&this.strokeWidth==t||(this._createPrimitive=!0,this.strokeColor=e,this.strokeWidth=t)}},{key:"getOutlineGeometry",value:function getOutlineGeometry(){return null}},{key:"getGeometry",value:function getGeometry(){return null}},{key:"setEditable",value:function setEditable(){}},{key:"setHighlighted",value:function setHighlighted(e){var t=this._drawHelper;this._highlighted&&this._highlighted==e||!0!==this._editMode&&((this._highlighted=e)?(t.setHighlighted(this),this._strokeColor=this.strokeColor,this.setStrokeStyle(Ae.Color.fromCssColorString("white"),this.strokeWidth)):this._strokeColor?this.setStrokeStyle(this._strokeColor,this.strokeWidth):this.setStrokeStyle(void 0,void 0))}}]),ChangeablePrimitive}();function CirclePrimitive_typeof(e){return(CirclePrimitive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CirclePrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CirclePrimitive_getPrototypeOf(e){return(CirclePrimitive_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CirclePrimitive_setPrototypeOf(e,t){return(CirclePrimitive_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function CirclePrimitive_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Se=function(e){function CirclePrimitive(e,t){var n;if(function CirclePrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CirclePrimitive),(n=function CirclePrimitive_possibleConstructorReturn(e,t){return!t||"object"!==CirclePrimitive_typeof(t)&&"function"!=typeof t?CirclePrimitive_assertThisInitialized(e):t}(this,CirclePrimitive_getPrototypeOf(CirclePrimitive).call(this)))._drawHelper=t,!Cesium.defined(e.center)||!Cesium.defined(e.radius))throw new Cesium.DeveloperError("Center and radius are required");e=le(e,ye),n.initialiseOptions(e),n.setRadius(e.radius),t.registerEditableShape(CirclePrimitive_assertThisInitialized(CirclePrimitive_assertThisInitialized(n))),k(CirclePrimitive_assertThisInitialized(CirclePrimitive_assertThisInitialized(n)));M.getInstance();return n}return function CirclePrimitive_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CirclePrimitive_setPrototypeOf(e,t)}(CirclePrimitive,Oe),function CirclePrimitive_createClass(e,t,n){return t&&CirclePrimitive_defineProperties(e.prototype,t),n&&CirclePrimitive_defineProperties(e,n),e}(CirclePrimitive,[{key:"setCenter",value:function setCenter(e){this.setAttribute("center",e)}},{key:"setRadius",value:function setRadius(e){this.setAttribute("radius",Math.max(.1,e))}},{key:"getCenter",value:function getCenter(){return this.getAttribute("center")}},{key:"getRadius",value:function getRadius(){return this.getAttribute("radius")}},{key:"getGeometry",value:function getGeometry(){if(Cesium.defined(this.center)&&Cesium.defined(this.radius))return new Cesium.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})}},{key:"getOutlineGeometry",value:function getOutlineGeometry(){return new Cesium.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})}},{key:"setEditMode",value:function setEditMode(){var n=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this._drawHelper,i=this,r=t._scene,o=function getMarkerPositions(){return n.getCircleCartesianCoordinates(Cesium.Math.PI_OVER_TWO)};if(this._editMode!=e)if(t.disableAllHighlights(),e){t.setEdited(this);var a=this;if(null==this._markers){var s=this.dragBillboard?this.dragBillboard:we,u=new Ee(t,s),l={dragHandlers:{onDrag:function onDrag(e,t){i.setRadius(Cesium.Cartesian3.distance(i.getCenter(),t)),u.updateBillboardsPositions(o())},onDragEnd:function onDragEnd(e,t){!function onEdited(){n.executeListeners({name:"onEdited",center:n.getCenter(),radius:n.getRadius()})}()}},tooltip:function tooltip(){return"Drag to change the radius"}};u.addBillboards(o(),l),this._markers=u,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(r.canvas),this._globeClickhandler.setInputAction(function(e){var t=r.pick(e.position);t&&t.primitive||a.setEditMode(!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),u.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1}},{key:"getCircleCartesianCoordinates",value:function getCircleCartesianCoordinates(e){for(var t,n=Cesium.CircleOutlineGeometry.createGeometry(new Cesium.CircleOutlineGeometry({ellipsoid:fe,center:this.getCenter(),radius:this.getRadius(),granularity:e})),i=0,r=[];i<n.attributes.position.values.length;i+=3)t=n.attributes.position.values,r.push(new Cesium.Cartesian3(t[i],t[i+1],t[i+2]));return r}}]),CirclePrimitive}();function EllipsePrimitive_typeof(e){return(EllipsePrimitive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EllipsePrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function EllipsePrimitive_getPrototypeOf(e){return(EllipsePrimitive_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EllipsePrimitive_setPrototypeOf(e,t){return(EllipsePrimitive_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function EllipsePrimitive_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xe=function(e){function EllipsePrimitive(e,t){var n;if(function EllipsePrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EllipsePrimitive),n=function EllipsePrimitive_possibleConstructorReturn(e,t){return!t||"object"!==EllipsePrimitive_typeof(t)&&"function"!=typeof t?EllipsePrimitive_assertThisInitialized(e):t}(this,EllipsePrimitive_getPrototypeOf(EllipsePrimitive).call(this)),!(Cesium.defined(e.center)&&Cesium.defined(e.semiMajorAxis)&&Cesium.defined(e.semiMinorAxis)))throw new Cesium.DeveloperError("Center and semi major and semi minor axis are required");return n._drawHelper=t,e=le(e,me),n.initialiseOptions(e),t.registerEditableShape(EllipsePrimitive_assertThisInitialized(EllipsePrimitive_assertThisInitialized(n))),k(EllipsePrimitive_assertThisInitialized(EllipsePrimitive_assertThisInitialized(n))),n}return function EllipsePrimitive_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EllipsePrimitive_setPrototypeOf(e,t)}(EllipsePrimitive,Oe),function EllipsePrimitive_createClass(e,t,n){return t&&EllipsePrimitive_defineProperties(e.prototype,t),n&&EllipsePrimitive_defineProperties(e,n),e}(EllipsePrimitive,[{key:"setCenter",value:function setCenter(e){this.setAttribute("center",e)}},{key:"setSemiMajorAxis",value:function setSemiMajorAxis(e){e<this.getSemiMinorAxis()||this.setAttribute("semiMajorAxis",e)}},{key:"setSemiMinorAxis",value:function setSemiMinorAxis(e){e>this.getSemiMajorAxis()||this.setAttribute("semiMinorAxis",e)}},{key:"setRotation",value:function setRotation(e){return this.setAttribute("rotation",e)}},{key:"getCenter",value:function getCenter(){return this.getAttribute("center")}},{key:"getSemiMajorAxis",value:function getSemiMajorAxis(){return this.getAttribute("semiMajorAxis")}},{key:"getSemiMinorAxis",value:function getSemiMinorAxis(){return this.getAttribute("semiMinorAxis")}},{key:"getRotation",value:function getRotation(){return this.getAttribute("rotation")}},{key:"getGeometry",value:function getGeometry(){if(Cesium.defined(this.center)&&Cesium.defined(this.semiMajorAxis)&&Cesium.defined(this.semiMinorAxis))return new Cesium.EllipseGeometry({ellipsoid:this.ellipsoid,center:this.center,semiMajorAxis:this.semiMajorAxis,semiMinorAxis:this.semiMinorAxis,rotation:this.rotation,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,granularity:this.granularity})}},{key:"getOutlineGeometry",value:function getOutlineGeometry(){return new Cesium.EllipseOutlineGeometry({center:this.getCenter(),semiMajorAxis:this.getSemiMajorAxis(),semiMinorAxis:this.getSemiMinorAxis(),rotation:this.getRotation()})}},{key:"setEditMode",value:function setEditMode(){var n=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this._editMode!=e){var t=this._drawHelper,i=t.scene,r=this,o=function getMarkerPositions(){return Cesium.Shapes.computeEllipseBoundary(fe,n.getCenter(),n.getSemiMajorAxis(),n.getSemiMinorAxis(),n.getRotation()+Math.PI/2,Math.PI/2).splice(0,4)};if(t.disableAllHighlights(),e){t.setEdited(this);var a=this;if(null==this._markers){var s=this.dragBillboard?this.dragBillboard:dragBillboard,u=new _.BillboardGroup(t,s),l={dragHandlers:{onDrag:function onDrag(e,t){var n=Cesium.Cartesian3.distance(r.getCenter(),t);e%2==0?r.setSemiMajorAxis(n):r.setSemiMinorAxis(n),u.updateBillboardsPositions(o())},onDragEnd:function onDragEnd(e,t){!function onEdited(){n.executeListeners({name:"onEdited",center:n.getCenter(),semiMajorAxis:n.getSemiMajorAxis(),semiMinorAxis:n.getSemiMinorAxis(),rotation:0})}()}},tooltip:function tooltip(){return"Drag to change the excentricity and radius"}};u.addBillboards(o(),l),this._markers=u,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(i.canvas),this._globeClickhandler.setInputAction(function(e){var t=i.pick(e.position);t&&t.primitive||a.setEditMode(!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),u.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1}}}]),EllipsePrimitive}(),De=function getExtent(e,t){var n=new Cesium.Rectangle;n.west=Math.min(e.longitude,t.longitude),n.east=Math.max(e.longitude,t.longitude),n.south=Math.min(e.latitude,t.latitude),n.north=Math.max(e.latitude,t.latitude);var i=Cesium.Math.EPSILON7;return n.east-n.west<i&&(n.east+=2*i),n.north-n.south<i&&(n.north+=2*i),n},He=function getExtentCorners(e){return fe.cartographicArrayToCartesianArray([Cesium.Rectangle.northwest(e),Cesium.Rectangle.northeast(e),Cesium.Rectangle.southeast(e),Cesium.Rectangle.southwest(e)])},Me=function createIconDiv(e,t,n,i,r){var o=document.createElement("DIV");return o.className="button"+n,o.title=i,e.appendChild(o),o.onclick=r,o},Te=function getCesiumHightZero(e){var t=Cesium.Cartographic.fromCartesian(e);return Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,0)};function ExtentPrimitive_typeof(e){return(ExtentPrimitive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ExtentPrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ExtentPrimitive_getPrototypeOf(e){return(ExtentPrimitive_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ExtentPrimitive_setPrototypeOf(e,t){return(ExtentPrimitive_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function ExtentPrimitive_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var je=function(e){function ExtentPrimitive(e,t){var n;if(function ExtentPrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ExtentPrimitive),n=function ExtentPrimitive_possibleConstructorReturn(e,t){return!t||"object"!==ExtentPrimitive_typeof(t)&&"function"!=typeof t?ExtentPrimitive_assertThisInitialized(e):t}(this,ExtentPrimitive_getPrototypeOf(ExtentPrimitive).call(this)),!Cesium.defined(e.extent))throw new Cesium.DeveloperError("Extent is required");return n._drawHelper=t,e=le(e,ye),n.initialiseOptions(e),n.setExtent(e.extent),t.registerEditableShape(ExtentPrimitive_assertThisInitialized(ExtentPrimitive_assertThisInitialized(n))),k(ExtentPrimitive_assertThisInitialized(ExtentPrimitive_assertThisInitialized(n))),n}return function ExtentPrimitive_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ExtentPrimitive_setPrototypeOf(e,t)}(ExtentPrimitive,Oe),function ExtentPrimitive_createClass(e,t,n){return t&&ExtentPrimitive_defineProperties(e.prototype,t),n&&ExtentPrimitive_defineProperties(e,n),e}(ExtentPrimitive,[{key:"setExtent",value:function setExtent(e){this.setAttribute("extent",e)}},{key:"getExtent",value:function getExtent(){return this.getAttribute("extent")}},{key:"getGeometry",value:function getGeometry(){if(Cesium.defined(this.extent))return new Cesium.RectangleGeometry({rectangle:this.extent,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})}},{key:"getOutlineGeometry",value:function getOutlineGeometry(){return new Cesium.RectangleOutlineGeometry({rectangle:this.extent})}},{key:"setEditMode",value:function setEditMode(){var n=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(this._editMode!=e){var i=this,r=this._drawHelper;if(r.disableAllHighlights(),e){if(r.setEdited(this),null==this._markers){this.dragBillboard&&this.dragBillboard;var t=this.dragHalfBillboard?this.dragHalfBillboard:we,o=new Ee(r,t),a={dragHandlers:{onDrag:function onDrag(e,t){var n=o.getBillboard((e+2)%4).position;i.setExtent(De(fe.cartesianToCartographic(n),fe.cartesianToCartographic(t))),o.updateBillboardsPositions(He(i.extent))},onDragEnd:function onDragEnd(e,t){!function onEdited(){n.executeListeners({name:"onEdited",extent:n.extent})}()}},tooltip:function tooltip(){return"Drag to change the corners of this extent"}};o.addBillboards(He(i.extent),a),this._markers=o,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(r._scene.canvas),this._globeClickhandler.setInputAction(function(e){var t=r._scene.pick(e.position);try{t&&!t.isDestroyed()&&t.primitive||n.setEditMode(!1)}catch(e){n.setEditMode(!1)}},Cesium.ScreenSpaceEventType.LEFT_CLICK),o.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._markers=null,this._globeClickhandler.destroy()),this._editMode=!1}}}]),ExtentPrimitive}();function PolySharpPrimitive_typeof(e){return(PolySharpPrimitive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolySharpPrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PolySharpPrimitive_possibleConstructorReturn(e,t){return!t||"object"!==PolySharpPrimitive_typeof(t)&&"function"!=typeof t?function PolySharpPrimitive_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function PolySharpPrimitive_getPrototypeOf(e){return(PolySharpPrimitive_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolySharpPrimitive_setPrototypeOf(e,t){return(PolySharpPrimitive_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function PolySharpPrimitive(){return function PolySharpPrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PolySharpPrimitive),PolySharpPrimitive_possibleConstructorReturn(this,PolySharpPrimitive_getPrototypeOf(PolySharpPrimitive).call(this))}return function PolySharpPrimitive_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolySharpPrimitive_setPrototypeOf(e,t)}(PolySharpPrimitive,Oe),function PolySharpPrimitive_createClass(e,t,n){return t&&PolySharpPrimitive_defineProperties(e.prototype,t),n&&PolySharpPrimitive_defineProperties(e,n),e}(PolySharpPrimitive,[{key:"setEditMode",value:function setEditMode(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this._drawHelper;if(this._editMode!=e)if(t.disableAllHighlights(),e){t.setEdited(this);var n=t._scene,i=this;if(null==this._markers){var r=this.dragBillboard?this.dragBillboard:we,o=this.dragHalfBillboard?this.dragHalfBillboard:we,a=new Ee(t,r),s=new Ee(t,o),u={dragHandlers:{onDrag:function onDrag(e,t){i.positions[e]=t,i.updateHalfMarkers(e,i.positions,s),i._createPrimitive=!0},onDragEnd:function onDragEnd(e,t){i._createPrimitive=!0,i.execOnEdited()}},onDoubleClick:function onDoubleClick(e){i.positions.length<4||(i.positions.splice(e,1),i._createPrimitive=!0,a.removeBillboard(e),s.removeBillboard(e),i.updateHalfMarkers(e,i.positions,s),i.execOnEdited())},tooltip:function tooltip(){if(3<i.positions.length)return"Double click to remove this point"}};a.addBillboards(i.positions,u),this._markers=a;for(var l=[],c=0,f=i.positions.length+(this.isPolygon?0:-1);c<f;c++)l.push(i.calculateHalfMarkerPosition(c));var p={dragHandlers:{onDragStart:function onDragStart(e,t){this.index=e+1,i.positions.splice(this.index,0,t),i._createPrimitive=!0},onDrag:function onDrag(e,t){i.positions[this.index]=t,i._createPrimitive=!0},onDragEnd:function onDragEnd(e,t){a.insertBillboard(this.index,t,u),s.getBillboard(this.index-1).position=i.calculateHalfMarkerPosition(this.index-1),s.insertBillboard(this.index,i.calculateHalfMarkerPosition(this.index),p),i._createPrimitive=!0,i.execOnEdited()}},tooltip:function tooltip(){return"Drag to create a new point"}};s.addBillboards(l,p),this._editMarkers=s,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(n.canvas),this._globeClickhandler.setInputAction(function(e){var t=n.pick(e.position);t&&t.primitive||i.setEditMode(!1)},Cesium.ScreenSpaceEventType.LEFT_CLICK),a.setOnTop(),s.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._editMarkers.remove(),this._markers=null,this._editMarkers=null,this._globeClickhandler.destroy()),this._editMode=!1}},{key:"calculateHalfMarkerPosition",value:function calculateHalfMarkerPosition(e){var t=this.positions;return fe.cartographicToCartesian(new Cesium.EllipsoidGeodesic(fe.cartesianToCartographic(t[e]),fe.cartesianToCartographic(t[e<t.length-1?e+1:0])).interpolateUsingFraction(.5))}},{key:"updateHalfMarkers",value:function updateHalfMarkers(e,t,n){var i=e-1<0?t.length-1:e-1;i<n.countBillboards()&&(n.getBillboard(i).position=this.calculateHalfMarkerPosition(i)),(i=e)<n.countBillboards()&&(n.getBillboard(i).position=this.calculateHalfMarkerPosition(i))}},{key:"execOnEdited",value:function execOnEdited(){this.executeListeners({name:"onEdited",positions:this.positions})}}]),PolySharpPrimitive}();function PolygonPrimitive_typeof(e){return(PolygonPrimitive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolygonPrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PolygonPrimitive_getPrototypeOf(e){return(PolygonPrimitive_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolygonPrimitive_setPrototypeOf(e,t){return(PolygonPrimitive_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PolygonPrimitive_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Be=function(e){function PolygonPrimitive(e,t){var n;return function PolygonPrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PolygonPrimitive),n=function PolygonPrimitive_possibleConstructorReturn(e,t){return!t||"object"!==PolygonPrimitive_typeof(t)&&"function"!=typeof t?PolygonPrimitive_assertThisInitialized(e):t}(this,PolygonPrimitive_getPrototypeOf(PolygonPrimitive).call(this)),e=le(e,ye),n._drawHelper=t,n.initialiseOptions(e),n.isPolygon=!0,t.registerEditableShape(PolygonPrimitive_assertThisInitialized(PolygonPrimitive_assertThisInitialized(n))),k(PolygonPrimitive_assertThisInitialized(PolygonPrimitive_assertThisInitialized(n))),n}return function PolygonPrimitive_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolygonPrimitive_setPrototypeOf(e,t)}(PolygonPrimitive,Le),function PolygonPrimitive_createClass(e,t,n){return t&&PolygonPrimitive_defineProperties(e.prototype,t),n&&PolygonPrimitive_defineProperties(e,n),e}(PolygonPrimitive,[{key:"setPositions",value:function setPositions(e){this.setAttribute("positions",e)}},{key:"getPositions",value:function getPositions(){return this.getAttribute("positions")}},{key:"getGeometry",value:function getGeometry(){if(Cesium.defined(this.positions)&&!(this.positions.length<3))return Cesium.PolygonGeometry.fromPositions({positions:this.positions,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})}},{key:"getOutlineGeometry",value:function getOutlineGeometry(){return Cesium.PolygonOutlineGeometry.fromPositions({positions:this.getPositions()})}}]),PolygonPrimitive}();function PolylinePrimitive_typeof(e){return(PolylinePrimitive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolylinePrimitive_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PolylinePrimitive_getPrototypeOf(e){return(PolylinePrimitive_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolylinePrimitive_setPrototypeOf(e,t){return(PolylinePrimitive_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PolylinePrimitive_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ie=function(e){function PolylinePrimitive(e,t){var n;return function PolylinePrimitive_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PolylinePrimitive),(n=function PolylinePrimitive_possibleConstructorReturn(e,t){return!t||"object"!==PolylinePrimitive_typeof(t)&&"function"!=typeof t?PolylinePrimitive_assertThisInitialized(e):t}(this,PolylinePrimitive_getPrototypeOf(PolylinePrimitive).call(this)))._drawHelper=t,e=le(e,be),n.initialiseOptions(e),t.registerEditableShape(PolylinePrimitive_assertThisInitialized(PolylinePrimitive_assertThisInitialized(n))),k(PolylinePrimitive_assertThisInitialized(PolylinePrimitive_assertThisInitialized(n))),n}return function PolylinePrimitive_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolylinePrimitive_setPrototypeOf(e,t)}(PolylinePrimitive,Le),function PolylinePrimitive_createClass(e,t,n){return t&&PolylinePrimitive_defineProperties(e.prototype,t),n&&PolylinePrimitive_defineProperties(e,n),e}(PolylinePrimitive,[{key:"setPositions",value:function setPositions(e){this.setAttribute("positions",e)}},{key:"setWidth",value:function setWidth(e){this.setAttribute("width",e)}},{key:"setGeodesic",value:function setGeodesic(e){this.setAttribute("geodesic",e)}},{key:"getPositions",value:function getPositions(){return this.getAttribute("positions")}},{key:"getWidth",value:function getWidth(){return this.getAttribute("width")}},{key:"getGeodesic",value:function getGeodesic(){return this.getAttribute("geodesic")}},{key:"getGeodesic",value:function getGeodesic(e){return this.getAttribute("geodesic")}},{key:"getGeometry",value:function getGeometry(){if(Cesium.defined(this.positions)&&!(this.positions.length<2))return new Cesium.PolylineGeometry({positions:this.positions,height:this.height,width:this.width<1?1:this.width,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,ellipsoid:this.ellipsoid})}},{key:"setHighlighted",value:function setHighlighted(e){!0!==this._editMode&&(e?(this._drawHelper.setHighlighted(this),this.setWidth(2*this.width)):this.setWidth(this.width))}},{key:"getExtent",value:function getExtent(){return Cesium.Extent.fromCartographicArray(fe.cartesianArrayToCartographicArray(this.positions))}}]),PolylinePrimitive}();function BaseHandler_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Re=function(){function BaseHandler(){!function BaseHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseHandler)}return function BaseHandler_createClass(e,t,n){return t&&BaseHandler_defineProperties(e.prototype,t),n&&BaseHandler_defineProperties(e,n),e}(BaseHandler,[{key:"start",value:function start(){}},{key:"complete",value:function complete(){}}]),BaseHandler}();function PolyshapeHandler_typeof(e){return(PolyshapeHandler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolyshapeHandler_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PolyshapeHandler_possibleConstructorReturn(e,t){return!t||"object"!==PolyshapeHandler_typeof(t)&&"function"!=typeof t?function PolyshapeHandler_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function PolyshapeHandler_getPrototypeOf(e){return(PolyshapeHandler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolyshapeHandler_setPrototypeOf(e,t){return(PolyshapeHandler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e){function PolyshapeHandler(){return function PolyshapeHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PolyshapeHandler),PolyshapeHandler_possibleConstructorReturn(this,PolyshapeHandler_getPrototypeOf(PolyshapeHandler).apply(this,arguments))}return function PolyshapeHandler_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolyshapeHandler_setPrototypeOf(e,t)}(PolyshapeHandler,Re),function PolyshapeHandler_createClass(e,t,n){return t&&PolyshapeHandler_defineProperties(e.prototype,t),n&&PolyshapeHandler_defineProperties(e,n),e}(PolyshapeHandler,[{key:"start",value:function start(i,t,e){i=le(i,e?ye:be);var n=t.scene,r=t.viewer,o=n.primitives,a=t.tooltip,s=new Cesium.ScreenSpaceEventHandler(n.canvas);t.startDrawing(function(){o&&o.remove(u),f&&f.remove(),s&&s.destroy(),a&&a.setVisible(!1)});var u,l=e?3:2;(u=e?t.createEditablePolygonPrimitive(i):t.createEditablePolylinePrimitive(i)).asynchronous=!1,o.add(u);var c=[],f=new Ee(t,Ce);s.setInputAction(function(e){if(null!=e.position){if(c.length<l)return;if(i.strategy.pickStrategy(e.position,r)&&(t.stopDrawing(),"function"==typeof i.callback)){c.length;i.callback(c,t)}}},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),s.setInputAction(function(e){var t=i.strategy.pickStrategy(e.position,r);t=Te(t),null!=e.position&&t&&(0==c.length&&(c.push(t.clone()),f.addBillboard(c[0])),c.length>=l&&(u.positions=c,u._createPrimitive=!0),c.push(t),f.addBillboard(t))},Cesium.ScreenSpaceEventType.LEFT_CLICK),s.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(0==c.length)a.showAt(t,"<p>Click to add first point</p>");else{var n=i.strategy.pickStrategy(t,r);n&&(c.pop(),n.y+=Cesium.Math.EPSILON7,c.push(n),c.length>=l&&(u.positions=c,u._createPrimitive=!0),f.getBillboard(c.length-1).position=n,a.showAt(t,"<p>Click to add new point ("+c.length+")</p>"+(c.length>l?"<p>Double click to finish drawing</p>":"")))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}}]),PolyshapeHandler}();function PolygonHandler_typeof(e){return(PolygonHandler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolygonHandler_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PolygonHandler_possibleConstructorReturn(e,t){return!t||"object"!==PolygonHandler_typeof(t)&&"function"!=typeof t?function PolygonHandler_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PolygonHandler_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function PolygonHandler_getPrototypeOf(e){return(PolygonHandler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolygonHandler_setPrototypeOf(e,t){return(PolygonHandler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function PolygonHandler(){return function PolygonHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PolygonHandler),PolygonHandler_possibleConstructorReturn(this,PolygonHandler_getPrototypeOf(PolygonHandler).apply(this,arguments))}return function PolygonHandler_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolygonHandler_setPrototypeOf(e,t)}(PolygonHandler,ze),function PolygonHandler_createClass(e,t,n){return t&&PolygonHandler_defineProperties(e.prototype,t),n&&PolygonHandler_defineProperties(e,n),e}(PolygonHandler,[{key:"start",value:function start(e,t){_get(PolygonHandler_getPrototypeOf(PolygonHandler.prototype),"start",this).call(this,e,t,!0)}}]),PolygonHandler}();function PolylineHandler_typeof(e){return(PolylineHandler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PolylineHandler_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function PolylineHandler_possibleConstructorReturn(e,t){return!t||"object"!==PolylineHandler_typeof(t)&&"function"!=typeof t?function PolylineHandler_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function PolylineHandler_get(e,t,n){return(PolylineHandler_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function PolylineHandler_superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PolylineHandler_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function PolylineHandler_getPrototypeOf(e){return(PolylineHandler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PolylineHandler_setPrototypeOf(e,t){return(PolylineHandler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){function PolylineHandler(){return function PolylineHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PolylineHandler),PolylineHandler_possibleConstructorReturn(this,PolylineHandler_getPrototypeOf(PolylineHandler).apply(this,arguments))}return function PolylineHandler_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PolylineHandler_setPrototypeOf(e,t)}(PolylineHandler,ze),function PolylineHandler_createClass(e,t,n){return t&&PolylineHandler_defineProperties(e.prototype,t),n&&PolylineHandler_defineProperties(e,n),e}(PolylineHandler,[{key:"start",value:function start(e,t){PolylineHandler_get(PolylineHandler_getPrototypeOf(PolylineHandler.prototype),"start",this).call(this,e,t,!1)}}]),PolylineHandler}();function ExtentHandler_typeof(e){return(ExtentHandler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ExtentHandler_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ExtentHandler_possibleConstructorReturn(e,t){return!t||"object"!==ExtentHandler_typeof(t)&&"function"!=typeof t?function ExtentHandler_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function ExtentHandler_getPrototypeOf(e){return(ExtentHandler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ExtentHandler_setPrototypeOf(e,t){return(ExtentHandler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e){function ExtentHandler(){return function ExtentHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ExtentHandler),ExtentHandler_possibleConstructorReturn(this,ExtentHandler_getPrototypeOf(ExtentHandler).apply(this,arguments))}return function ExtentHandler_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ExtentHandler_setPrototypeOf(e,t)}(ExtentHandler,Re),function ExtentHandler_createClass(e,t,n){return t&&ExtentHandler_defineProperties(e.prototype,t),n&&ExtentHandler_defineProperties(e,n),e}(ExtentHandler,[{key:"start",value:function start(r,i){var o=this;this.drawHelper=i,this.options=le(r,ye);var e=i.scene,a=i.viewer;this.primitives=i.scene.primitives;var s=i.tooltip,u=null;this.extent=null,this.markers=null;var t=new Cesium.ScreenSpaceEventHandler(e.canvas);i.startDrawing(function(){null!=o.extent&&o.primitives&&o.primitives.remove(o.extent),o.markers&&o.markers.remove(),t&&t.destroy(),s&&s.setVisible(!1)}),t.setInputAction(function(e){if(null!=e.position){var t=r.strategy.pickStrategy(e.position,a);if(t)if(null==o.extent){u=fe.cartesianToCartographic(t);var n=De(u,u);o.updateExtent(n)}else i.stopDrawing(),"function"==typeof r.callback&&r.callback(De(u,fe.cartesianToCartographic(t)))}},Cesium.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==o.extent)s.showAt(t,"<p>Click to start drawing rectangle</p>");else{var n=r.strategy.pickStrategy(t,a);if(n){var i=De(u,fe.cartesianToCartographic(n));o.updateExtent(i),s.showAt(t,"<p>Drag to change rectangle extent</p><p>Click again to finish drawing</p>")}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"updateExtent",value:function updateExtent(e){null==this.extent&&(this.extent=this.drawHelper.createEditableExtentPrimitive({extent:e,material:this.options.material}),this.extent.asynchronous=!1,this.primitives.add(this.extent)),this.extent.setExtent(e),this.extent.rectangle=e;var t=He(e);null==this.markers?(this.markers=new Ee(this.drawHelper,Ce),this.markers.addBillboards(t)):this.markers.updateBillboardsPositions(t)}}]),ExtentHandler}();function CircleHandler_typeof(e){return(CircleHandler_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CircleHandler_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function CircleHandler_possibleConstructorReturn(e,t){return!t||"object"!==CircleHandler_typeof(t)&&"function"!=typeof t?function CircleHandler_assertThisInitialized(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function CircleHandler_getPrototypeOf(e){return(CircleHandler_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CircleHandler_setPrototypeOf(e,t){return(CircleHandler_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var We=function(e){function CircleHandler(){return function CircleHandler_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CircleHandler),CircleHandler_possibleConstructorReturn(this,CircleHandler_getPrototypeOf(CircleHandler).apply(this,arguments))}return function CircleHandler_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CircleHandler_setPrototypeOf(e,t)}(CircleHandler,Re),function CircleHandler_createClass(e,t,n){return t&&CircleHandler_defineProperties(e.prototype,t),n&&CircleHandler_defineProperties(e,n),e}(CircleHandler,[{key:"start",value:function start(i,n){i=le(i,ye);var e=new Cesium.ScreenSpaceEventHandler(n.scene.canvas),r=null,o=null,a=(n.scene,n.viewer),s=n.scene.primitives,u=n.tooltip;n.startDrawing(function(){null!=r&&s&&s.remove(r),o&&o.remove(),e&&e.destroy(),u&&u.setVisible(!1)}),e.setInputAction(function(e){if(null!=e.position){var t=i.strategy.pickStrategy(e.position,a);t&&(null==r?(r=n.createEditableCirclePrimitive({center:t,radius:0,asynchronous:!1,material:i.material}),s.add(r),(o=new Ee(n,Ce)).addBillboards([t])):("function"==typeof i.callback&&i.callback(r.getCenter(),r.getRadius(),n),n.stopDrawing()))}},Cesium.ScreenSpaceEventType.LEFT_DOWN),e.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==r)u.showAt(t,"<p>Click to start drawing the circle</p>");else{var n=i.strategy.pickStrategy(t,a);n&&(r.setRadius(Cesium.Cartesian3.distance(Te(r.getCenter()),Te(n))),o.updateBillboardsPositions(n),u.showAt(t,"<p>Move mouse to change circle radius</p><p>Click again to finish drawing</p>"))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}}]),CircleHandler}();var Ge=function DrawHelperWidget(e,t){var n=this;if(function DrawHelperWidget_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DrawHelperWidget),!Cesium.defined(t.container))throw new Cesium.DeveloperError("Container is required");var i={markerIcon:" marker",polylineIcon:" polyline",polygonIcon:" polygon",circleIcon:" circle",extentIcon:" extent",clearIcon:" clear",polylineDrawingOptions:be,polygonDrawingOptions:_e,extentDrawingOptions:ge,circleDrawingOptions:ve,strategy:{pickStrategy:t.pickStrategy?t.pickStrategy:de}};ue(t,i);var r=document.createElement("DIV");r.className="toolbar",t.container.appendChild(r);var o=e._scene;-1!==t.buttons.indexOf("marker")&&Me(r,0,t.markerIcon,"Click to start drawing a 2D marker",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"markerClick"}),e.startDrawingMarker({callback:function callback(e){_self.executeListeners({name:"markerCreated",position:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("polyline")&&Me(r,0,t.polylineIcon,"Click to start drawing a 2D polyline",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"polylineClick"}),e.startDrawingPolyline({callback:function callback(e){n.executeListeners({name:"polylineCreated",positions:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("polygon")&&Me(r,0,t.polygonIcon,"Click to start drawing a 2D polygon",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"polygonClick"}),e.startDrawingPolygon({callback:function callback(e){n.executeListeners({name:"polygonCreated",positions:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("extent")&&Me(r,0,t.extentIcon,"Click to start drawing an Extent",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"extentClick"}),e.startDrawingExtent({callback:function callback(e){n.executeListeners({name:"extentCreated",extent:e})},strategy:t.strategy})}),-1!==t.buttons.indexOf("circle")&&Me(r,0,t.circleIcon,"Click to start drawing a Circle",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"circleClick"}),e.startDrawingCircle({callback:function callback(e,t){n.executeListeners({name:"circleCreated",center:e,radius:t})},strategy:t.strategy})});var a=document.createElement("DIV");a.className="divider",r.appendChild(a),-1!==t.buttons.indexOf("clear")&&Me(r,0,t.clearIcon,"Remove all primitives",function(){"function"==typeof t.clickCallback&&t.clickCallback({name:"clearClick"}),o.primitives.removeAll()}),k(this)};function DrawHelperV2_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ne=function(){function DrawHelper(e){!function DrawHelperV2_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DrawHelper),this.eventSystem=M.getInstance(e),this.eventSystem.setFrameRate(60),this._viewer=e,this._scene=e.scene,this._tooltip=new ke(e.container),this._surfaces=[],Cesium.defined(Cesium.ContextLimits)&&(Cesium.ContextLimits._maximumAliasedLineWidth=10),k(this)}return function DrawHelperV2_createClass(e,t,n){return t&&DrawHelperV2_defineProperties(e.prototype,t),n&&DrawHelperV2_defineProperties(e,n),e}(DrawHelper,[{key:"addToolbar",value:function addToolbar(e,t){return t=le(t,{container:e}),new Ge(this,t)}},{key:"startDrawing",value:function startDrawing(e){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp(),this.editCleanUp=e,this.muteHandlers(!0),this.eventSystem.enableEvent(!1)}},{key:"stopDrawing",value:function stopDrawing(){this.editCleanUp&&(this.editCleanUp(),this.editCleanUp=null),this.muteHandlers(!1),this.eventSystem.enableEvent(!0)}},{key:"muteHandlers",value:function muteHandlers(e){this._handlersMuted=e}},{key:"disableAllHighlights",value:function disableAllHighlights(){this.setHighlighted(void 0)}},{key:"setHighlighted",value:function setHighlighted(e){this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=e&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=e}},{key:"disableAllEditMode",value:function disableAllEditMode(){this.setEdited(void 0)}},{key:"setEdited",value:function setEdited(e){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=e}},{key:"createBillboardGroup",value:function createBillboardGroup(e,t,n){var i=new Ee(this,t);return i.addBillboards(e,n),i}},{key:"startDrawingMarker",value:function startDrawingMarker(e){}},{key:"startDrawingPolygon",value:function startDrawingPolygon(e){(new Ue).start(e,this)}},{key:"startDrawingPolyline",value:function startDrawingPolyline(e){(new Ve).start(e,this)}},{key:"startDrawingPolyshape",value:function startDrawingPolyshape(e){(new ze).start(e,this)}},{key:"startDrawingExtent",value:function startDrawingExtent(e){(new Fe).start(e,this)}},{key:"startDrawingCircle",value:function startDrawingCircle(e){(new We).start(e,this)}},{key:"enhancePrimitives",value:function enhancePrimitives(){}},{key:"createEditableCirclePrimitive",value:function createEditableCirclePrimitive(e){return new Se(e,this)}},{key:"createEditableBillboard",value:function createEditableBillboard(e){return new Pe(e,this.viewer)}},{key:"createEditableEllipsePrimitive",value:function createEditableEllipsePrimitive(e){return new xe(e,this)}},{key:"createEditableExtentPrimitive",value:function createEditableExtentPrimitive(e){return new je(e,this)}},{key:"createEditablePolygonPrimitive",value:function createEditablePolygonPrimitive(e){return new Be(e,this)}},{key:"createEditablePolylinePrimitive",value:function createEditablePolylinePrimitive(e){return new Ie(e,this)}},{key:"registerEditableShape",value:function registerEditableShape(t){var n=this;this.eventSystem.onMouseMove(t,function(e){t.setHighlighted(!0),t._editMode||n._tooltip.showAt(e,"Click to edit this shape")}),this.eventSystem.onMouseMoveOut(t,function(e){t.setHighlighted(!1),n._tooltip.setVisible(!1)}),this.eventSystem.onLeftClick(t,function(){t.setEditMode(!0)})}},{key:"viewer",get:function get(){return this._viewer},set:function set(e){this._viewer=e}},{key:"scene",get:function get(){return this._scene},set:function set(e){this._scene=e}},{key:"tooltip",get:function get(){return this._tooltip},set:function set(e){this._tooltip=e}},{key:"surfaces",get:function get(){return this._surfaces},set:function set(e){this._surfaces=e}}]),DrawHelper}();function ChoiceHelper(e){this._cesiumViewer=e.viewer,this.util=new Util(this._cesiumViewer),this._scene=this._cesiumViewer.scene,this._drawHelper=new DrawHelper_(this._cesiumViewer),this._option=e,this._afterClick=e.callbacks.afterClick,this._primitives=[];var t,n,i,r,o,a,s,u=this;if(Cesium.defined(e.toolbar)&&Cesium.defined(e.toolbar.container))this._toolbarContainer=e.toolbar.container,this._toolbar=this._drawHelper.addToolbar(this._toolbarContainer,{buttons:e.toolbar.buttons,clickCallback:function clickCallback(e){u._afterClick&&u._afterClick(),u.util.getWithDefault(u._primitives,[]).forEach(function(e,t){u._scene.primitives.remove(e)})},pickStrategy:qe});else{if(!Cesium.defined(e.dom))return void console.error("传入参数有误！");this._toolbar=this._drawHelper.addToolbar(document.body,{buttons:[]});var l=this._toolbar;e.dom.polygon&&(s=e.dom.polygon.onclick,e.dom.polygon.onclick=function(e){s&&s(e),u._afterClick&&u._afterClick(),u._drawHelper.startDrawingPolygon({callback:function callback(e,t){l.executeListeners({name:"polygonCreated",positions:e})},strategy:{pickStrategy:qe}})}),e.dom.polygon&&(a=e.dom.polyline.onclick,e.dom.polyline.onclick=function(e){a&&a(e),u._afterClick&&u._afterClick(),u._drawHelper.startDrawingPolyline({callback:function callback(e,t){l.executeListeners({name:"polylineCreated",positions:e})},strategy:{pickStrategy:qe}})}),e.dom.marker&&(o=e.dom.marker.onclick,e.dom.marker.onclick=function(e){o&&o(e),u._afterClick&&u._afterClick(),u._drawHelper.startDrawingMarker({callback:function callback(e,t){l.executeListeners({name:"markerCreated",position:e})},strategy:{pickStrategy:qe}})}),e.dom.extent&&(r=e.dom.extent.onclick,e.dom.extent.onclick=function(e){r&&r(e),u._afterClick&&u._afterClick(),u._drawHelper.startDrawingExtent({callback:function callback(e,t){l.executeListeners({name:"extentCreated",extent:e})},strategy:{pickStrategy:qe}})}),e.dom.circle&&(i=e.dom.circle.onclick,e.dom.circle.onclick=function(e){i&&i(e),u._afterClick&&u._afterClick(),u._drawHelper.startDrawingCircle({callback:function callback(e,t,n){l.executeListeners({name:"circleCreated",center:e,radius:t})},strategy:{pickStrategy:qe}})}),e.dom.clear&&(n=e.dom.clear.onclick,e.dom.clear.onclick=function(e){n&&n(e),u._afterClick&&u._afterClick()}),e.dom.cancel&&(t=e.dom.cancel.onclick,e.dom.cancel.onclick=function(e){t&&t(e),u._afterClick&&u._afterClick(),u._drawHelper.stopDrawing()})}this._eventInit()}var qe=function pickStrategy(e,t){if(Cesium.defined(t.scene.pick(e))&&t.scene.pickPositionSupported)return t.scene.pickPosition(e);var n=Cesium.Cartographic.fromCartesian(t.scene.camera.pickEllipsoid(e));return Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,0)};function Util(e){this._viewer=e,this._ellipsoid=this._viewer.scene.globe._ellipsoid}ChoiceHelper.prototype._optionReload=function(){},ChoiceHelper.prototype._eventInit=function(){var a=this;a._toolbar.addListener("polygonCreated",function(e){new DrawHelper_.PolygonPrimitive({positions:e.positions,material:Cesium.Material.fromType("Checkerboard")});console.log(e);var r=[];a.util.getWithDefault(e.positions,[]).forEach(function(e,t){r.push(a.util.Cartesian3ToLatLng(e))}),a._filterExecuter(function(e){var i=[];return a.util.getWithDefault(e,[]).forEach(function(e,t){var n=Cesium.Cartographic.fromCartesian(e.position.getValue(0));a.util._isInPolygon(n,r)&&i.push(e)}),i})}),a._toolbar.addListener("circleCreated",function(o){a._filterExecuter(function(e){var r=[];return a.util.getWithDefault(e,[]).forEach(function(e,t){var n=Cesium.Cartographic.fromCartesian(e.position.getValue(0)),i=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,0);Cesium.Cartesian3.distance(a.util.getCesiumHightZero(o.center),i)<=o.radius&&r.push(e)}),r})}),a._toolbar.addListener("extentCreated",function(e){var r=e.extent;a._filterExecuter(function(e){var i=[];return a.util.getWithDefault(e,[]).forEach(function(e,t){var n=a.util.Cartesian3ToLatLng(e.position.getValue(0));r.west<=n.longitude&&r.east>=n.longitude&&r.south<=n.latitude&&r.north>=n.latitude&&i.push(e)}),i})}),a._toolbar.addListener("markerCreated",function(e){a._option.callbacks.marker(e.position)})},ChoiceHelper.prototype.setOption=function(e){},ChoiceHelper.prototype._callBack=function(){},ChoiceHelper.prototype._filterExecuter=function(e){var t=this,r=e(t._cesiumViewer.entities.values);t.util.getWithDefault(t._option.callbacks.choice,[]).forEach(function(n,e){var i=[];t.util.getWithDefault(r,[]).forEach(function(e,t){n.filter(e)&&i.push(e)}),n.onChoice(i)})},Util.prototype.Cartesian3ToLatLng=function(e){return this._ellipsoid.cartesianToCartographic(e)},Util.prototype.Cartesian3ToDegrees=function(e){var t=this._ellipsoid.cartesianToCartographic(e);return{height:t.height,latitude:Cesium.Math.toDegrees(t.latitude),longitude:Cesium.Math.toDegrees(t.longitude)}},Util.prototype.getWithDefault=function(e,t){return e||t},Util.prototype.getCesiumHightZero=function(e){var t=Cesium.Cartographic.fromCartesian(e);return Cesium.Cartesian3.fromRadians(t.longitude,t.latitude,0)},Util.prototype.formatHetightPlusNumber=function(e,t){var n=Cesium.Cartographic.fromCartesian(e);return Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height+t)},Util.prototype._isInPolygon=function(e,t){var n,i,r=e.longitude,o=e.latitude,a=0,s=0,u=0,l=0,c=0;if(t.size<3)return!1;for(n=0,i=t.length,a=0;a<i-1;a++)c=a===i-1?(s=t[a].longitude,l=t[a].latitude,u=t[0].longitude,t[0].latitude):(s=t[a].longitude,l=t[a].latitude,u=t[a+1].longitude,t[a+1].latitude),(l<=o&&o<c||c<=o&&o<l)&&0<Math.abs(l-c)&&s-(s-u)*(l-o)/(l-c)<r&&n++;return n%2!=0};n(7);n.d(t,"__dirpath",function(){return Ze}),n.d(t,"OfficialUtils",function(){return Ke}),n.d(t,"debugManager",function(){return Xe}),n.d(t,"Cameras",function(){return f}),n.d(t,"Scenes",function(){return P}),n.d(t,"Cartesian3s",function(){return E}),n.d(t,"EventSystemInstance",function(){return M}),n.d(t,"EventSystemFactory",function(){return v}),n.d(t,"EventTypeV2",function(){return g}),n.d(t,"EventType",function(){return g}),n.d(t,"EventUtils",function(){return T}),n.d(t,"Debugs",function(){return j}),n.d(t,"DazzlingLabelEntity",function(){return R}),n.d(t,"EditableEntity",function(){return z}),n.d(t,"BuildingHightlightBuilder",function(){return U}),n.d(t,"Pickthrottle",function(){return p}),n.d(t,"Settings",function(){return A}),n.d(t,"cesium1_50Patch",function(){return V}),n.d(t,"cancelPrintTitleProviderErrorInCesium1_50",function(){return F}),n.d(t,"CompassElementBuilder",function(){return W}),n.d(t,"DraggableCoordinate",function(){return N}),n.d(t,"DrawHelper",function(){return DrawHelper_}),n.d(t,"DrawHelperV2",function(){return Ne}),n.d(t,"ChoiceHelper",function(){return ChoiceHelper});var Ze=function getPathDir(){for(var e="",t=document.querySelectorAll("script"),n=0;n<t.length;n++)if(/Cesiums[^\/]*$/.test(t.item(n).src)){e=t.item(n).src;break}return e.match(/(.+)\/(Cesiums.js.*|Cesiums.min.js)/)[1]}(),Ke=i,Xe={_debug:!1,set debug(e){this._debug=e},get debug(){return this._debug},log:function log(e){this._debug&&(console.groupCollapsed(e),console.trace(e),console.groupEnd())}}}])});